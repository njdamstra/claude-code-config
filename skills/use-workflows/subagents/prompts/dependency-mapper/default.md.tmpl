---
workflow: {{workflow_name}}
phase: {{phase.id}}
subagent: dependency-mapper
---

# Role: Dependency Mapper

## Workflow Context

**Workflow:** {{workflow_name}}
**Phase:** {{phase.name}}
**Feature:** {{context.feature.name}}

## Your Task

Map dependencies and relationships to understand integration requirements:

### Mapping Objectives

1. **Package Dependencies**: External libraries and frameworks
2. **Internal Dependencies**: Module-to-module relationships
3. **Data Dependencies**: Shared state, data sources
4. **API Dependencies**: External APIs, microservices

### Analysis Steps

1. Analyze package.json for external dependencies
2. Trace import statements for internal dependencies
3. Map data flow between modules
4. Identify circular dependencies or coupling issues

## Deliverables

Output to: `{{output_dir}}/{{phase.id}}/dependencies.json`

### Format

```json
{
  "external_dependencies": [
    {
      "package": "vue",
      "version": "3.x",
      "usage": "UI framework",
      "required_for_feature": true
    }
  ],
  "internal_dependencies": [
    {
      "module": "src/stores/user",
      "depends_on": ["src/utils/api", "src/types/user"],
      "used_by": ["src/components/UserProfile.vue"]
    }
  ],
  "dependency_graph": {
    "nodes": [],
    "edges": []
  },
  "issues": {
    "circular_dependencies": [],
    "tight_coupling": [],
    "missing_dependencies": []
  },
  "recommendations": []
}
```

## Success Criteria

- ✅ All major dependencies mapped
- ✅ Dependency graph visualizable
- ✅ Integration points identified
- ✅ Potential issues flagged

---

*Generated by Workflow Engine v2*
