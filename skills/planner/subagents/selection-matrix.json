{
  "subagent_selection": {
    "new-feature": {
      "research": {
        "always": ["code-researcher"],
        "conditional": {}
      },
      "design": {
        "always": ["requirements-specialist", "architecture-specialist"],
        "conditional": {}
      },
      "validation": {
        "always": ["feasibility-validator", "completeness-checker"],
        "conditional": {
          "--estimate": ["estimate-reviewer"]
        }
      }
    },
    "debugging": {
      "investigation": {
        "always": ["bug-investigator"],
        "conditional": {}
      },
      "analysis": {
        "always": ["root-cause-tracer"],
        "conditional": {
          "data_bug": ["data-flow-analyzer"],
          "timing_bug": ["timing-analyzer"]
        }
      },
      "solution": {
        "always": ["fix-designer"],
        "conditional": {
          "multiple_approaches": ["alternative-evaluator"]
        }
      },
      "validation": {
        "always": ["approach-validator", "risk-assessor"]
      }
    },
    "refactoring": {
      "analysis": {
        "always": ["code-smell-detector", "complexity-analyzer", "duplication-finder", "test-coverage-checker"],
        "conditional": {}
      },
      "planning": {
        "always": ["refactoring-sequencer", "technique-selector", "test-planner"],
        "conditional": {
          "high_risk": ["risk-mapper"]
        }
      },
      "validation": {
        "always": ["safety-validator", "scope-reviewer"]
      }
    },
    "improving": {
      "assessment": {
        "always": ["baseline-profiler", "bottleneck-identifier", "opportunity-scanner"],
        "conditional": {
          "ux_improvement": ["ux-analyzer"],
          "quality_improvement": ["code-quality-checker"]
        }
      },
      "planning": {
        "always": ["optimization-designer", "impact-estimator", "verification-planner"],
        "conditional": {
          "user_facing": ["rollout-planner"]
        }
      },
      "validation": {
        "always": ["roi-validator", "risk-assessor"]
      }
    },
    "quick": {
      "discovery": {
        "always": ["file-locator", "pattern-checker"],
        "conditional": {
          "integration_needed": ["code-researcher"]
        }
      }
    }
  },

  "subagent_locations": {
    "code-researcher": "~/.claude/agents/plans/code-researcher.md",
    "requirements-specialist": "~/.claude/agents/plans/requirements-specialist.md",
    "architecture-specialist": "~/.claude/agents/plans/architecture-specialist.md",
    "bug-investigator": "~/.claude/agents/plans/bug-investigator.md",
    "root-cause-tracer": "~/.claude/agents/plans/root-cause-tracer.md",
    "fix-designer": "~/.claude/agents/plans/fix-designer.md",
    "file-locator": "~/.claude/agents/plans/file-locator.md",
    "pattern-checker": "~/.claude/agents/plans/pattern-checker.md",
    "code-smell-detector": "~/.claude/agents/plans/code-smell-detector.md",
    "complexity-analyzer": "~/.claude/agents/plans/complexity-analyzer.md",
    "duplication-finder": "~/.claude/agents/plans/duplication-finder.md",
    "test-coverage-checker": "~/.claude/agents/plans/test-coverage-checker.md",
    "refactoring-sequencer": "~/.claude/agents/plans/refactoring-sequencer.md",
    "technique-selector": "~/.claude/agents/plans/technique-selector.md",
    "test-planner": "~/.claude/agents/plans/test-planner.md",
    "baseline-profiler": "~/.claude/agents/plans/baseline-profiler.md",
    "bottleneck-identifier": "~/.claude/agents/plans/bottleneck-identifier.md",
    "opportunity-scanner": "~/.claude/agents/plans/opportunity-scanner.md",
    "ux-analyzer": "~/.claude/agents/plans/ux-analyzer.md",
    "code-quality-checker": "~/.claude/agents/plans/code-quality-checker.md",
    "optimization-designer": "~/.claude/agents/plans/optimization-designer.md",
    "impact-estimator": "~/.claude/agents/plans/impact-estimator.md",
    "feasibility-validator": "~/.claude/agents/plans/feasibility-validator.md",
    "completeness-checker": "~/.claude/agents/plans/completeness-checker.md",
    "estimate-reviewer": "~/.claude/agents/plans/estimate-reviewer.md",
    "approach-validator": "~/.claude/agents/plans/approach-validator.md",
    "risk-assessor": "~/.claude/agents/plans/risk-assessor.md",
    "safety-validator": "~/.claude/agents/plans/safety-validator.md",
    "scope-reviewer": "~/.claude/agents/plans/scope-reviewer.md",
    "roi-validator": "~/.claude/agents/plans/roi-validator.md",
    "alternative-evaluator": "~/.claude/agents/plans/alternative-evaluator.md",
    "verification-planner": "~/.claude/agents/plans/verification-planner.md",
    "rollout-planner": "~/.claude/agents/plans/rollout-planner.md",
    "risk-mapper": "~/.claude/agents/plans/risk-mapper.md",
    "data-flow-analyzer": "~/.claude/agents/plans/data-flow-analyzer.md",
    "timing-analyzer": "~/.claude/agents/plans/timing-analyzer.md"
  },

  "workflow_notes": {
    "new-feature": {
      "agents_before": 10,
      "agents_after": 3,
      "improvement": "70% reduction",
      "phases": ["research", "design", "validation"]
    },
    "debugging": {
      "agents_before": 8,
      "agents_after": 3,
      "improvement": "62% reduction",
      "phases": ["investigation", "analysis", "solution", "validation"]
    },
    "refactoring": {
      "agents_before": 8,
      "agents_after": 7,
      "improvement": "12% reduction (kept specialized for quality)",
      "phases": ["analysis", "planning", "validation"]
    },
    "improving": {
      "agents_before": 8,
      "agents_after": 6,
      "improvement": "25% reduction",
      "phases": ["assessment", "planning", "validation"]
    },
    "quick": {
      "agents_before": 2,
      "agents_after": 2,
      "improvement": "No change (already minimal)",
      "phases": ["discovery"]
    }
  },

  "conditional_rules": {
    "--estimate": "Spawn estimate-reviewer to validate effort estimates",
    "multi_component": "Deprecated - code-researcher handles integration discovery",
    "large_refactoring": "Deprecated - code-researcher handles dependency mapping",
    "high_risk": "Spawn risk-mapper for high-risk refactorings",
    "stateful_bug": "Deprecated - bug-investigator handles state inspection conditionally",
    "data_bug": "Spawn data-flow-analyzer for bugs involving data transformations",
    "timing_bug": "Spawn timing-analyzer for race conditions or async bugs",
    "multiple_approaches": "Spawn alternative-evaluator when multiple fix options exist",
    "ux_improvement": "Spawn ux-analyzer for UX-focused improvements",
    "quality_improvement": "Spawn code-quality-checker for code quality improvements",
    "user_facing": "Spawn rollout-planner for user-facing changes requiring gradual rollout",
    "integration_needed": "Spawn code-researcher for quick tasks with integration complexity"
  },

  "migration_notes": {
    "deprecated_agents": [
      "codebase-scanner → code-researcher",
      "pattern-analyzer → code-researcher",
      "dependency-mapper → code-researcher",
      "frontend-scanner → code-researcher (conditional)",
      "backend-scanner → code-researcher (conditional)",
      "user-story-writer → requirements-specialist",
      "technical-requirements-analyzer → requirements-specialist",
      "edge-case-identifier → requirements-specialist",
      "architecture-designer → architecture-specialist",
      "implementation-sequencer → architecture-specialist",
      "test-strategy-planner → architecture-specialist",
      "bug-reproducer → bug-investigator",
      "environment-analyzer → bug-investigator",
      "log-analyzer → bug-investigator",
      "hypothesis-generator → root-cause-tracer",
      "code-tracer → root-cause-tracer",
      "dependency-checker → root-cause-tracer"
    ],
    "archive_location": "~/.claude/.archives/agents/plans-deprecated-2025-10-31/",
    "date": "2025-10-31"
  },

  "notes": {
    "parallel_execution": "All agents in a phase spawn simultaneously (max 5 per phase)",
    "model_optimization": "Research agents use haiku, design/validation use sonnet",
    "context_sharing": "Agents read from .temp/ to avoid redundant file scanning",
    "default_flag": "If no flag specified, code-researcher handles both frontend and backend"
  }
}
