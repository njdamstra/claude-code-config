{"parentUuid":null,"isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","type":"user","message":{"role":"user","content":"**Objective:** Extract key patterns for skill file creation\n\n**Patterns to identify:**\n1. YAML frontmatter structure (required vs optional fields)\n2. Skill file organization (sections, headings)\n3. Progressive disclosure patterns\n4. Tool restrictions syntax\n5. Model specifications\n\n**Reference files:**\n- Any existing skill files in ~/.claude/skills/\n- Focus on well-structured skills like vue-component-builder, nanostore-builder\n\n**Output:**\nWrite findings to `.claude/plans/meta-skills-agent/.temp/phase1-discovery/patterns.json`\n\n**Format:**\n```json\n{\n  \"frontmatter_required\": [\"name\", \"description\"],\n  \"frontmatter_optional\": [\"tools\", \"model\", \"tags\"],\n  \"typical_sections\": [\"Overview\", \"When to Use\", \"Usage\", \"Examples\"],\n  \"progressive_disclosure_pattern\": \"description here\",\n  \"best_practices\": [\"practice 1\", \"practice 2\"]\n}\n```"},"uuid":"0f76a9da-55cc-44e9-8300-05ad045f55b2","timestamp":"2025-10-30T05:56:16.593Z"}
{"parentUuid":"0f76a9da-55cc-44e9-8300-05ad045f55b2","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","message":{"model":"claude-haiku-4-5-20251001","id":"msg_019uC753FLd3qdUF9ocSZsWA","type":"message","role":"assistant","content":[{"type":"text","text":"I'll analyze the existing skill files to extract key patterns for skill file creation."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":25430,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":25430,"ephemeral_1h_input_tokens":0},"output_tokens":103,"service_tier":"standard"}},"requestId":"req_011CUcsGFWwn9gXWD8MXfLkT","type":"assistant","uuid":"02cdefe5-6e39-45a4-9f14-ca63b8e9dd9b","timestamp":"2025-10-30T05:56:18.542Z"}
{"parentUuid":"02cdefe5-6e39-45a4-9f14-ca63b8e9dd9b","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","message":{"model":"claude-haiku-4-5-20251001","id":"msg_019uC753FLd3qdUF9ocSZsWA","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01CQCndLoHgTYoXPdDETbZ67","name":"Bash","input":{"command":"ls -la /Users/natedamstra/.claude/skills/","description":"List existing skill files"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":25430,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":25430,"ephemeral_1h_input_tokens":0},"output_tokens":103,"service_tier":"standard"}},"requestId":"req_011CUcsGFWwn9gXWD8MXfLkT","type":"assistant","uuid":"6b1a6e1a-7d7c-49cd-aef5-6bb1e5caa1b5","timestamp":"2025-10-30T05:56:18.832Z"}
{"parentUuid":"6b1a6e1a-7d7c-49cd-aef5-6bb1e5caa1b5","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01CQCndLoHgTYoXPdDETbZ67","type":"tool_result","content":"total 0\ndrwxr-xr-x@  7 natedamstra  staff   224 Oct 17 18:55 _archived_appwrite-integration\ndrwxr-xr-x@ 23 natedamstra  staff   736 Oct 29 21:02 .\ndrwxr-xr-x@ 95 natedamstra  staff  3040 Oct 29 22:54 ..\ndrwxr-xr-x@  4 natedamstra  staff   128 Oct 21 18:20 astro-routing\ndrwxr-xr-x@  9 natedamstra  staff   288 Oct 21 15:44 astro-vue-architect\ndrwxr-xr-x@  3 natedamstra  staff    96 Oct 17 18:56 cc-hook-designer\ndrwxr-xr-x@  4 natedamstra  staff   128 Oct 29 19:45 cc-mastery\ndrwxr-xr-x@  3 natedamstra  staff    96 Oct 17 18:56 cc-mcp-integration\ndrwxr-xr-x@  3 natedamstra  staff    96 Oct 17 18:56 cc-output-style-creator\ndrwxr-xr-x@  3 natedamstra  staff    96 Oct 29 19:44 cc-skill-builder\ndrwxr-xr-x@  3 natedamstra  staff    96 Oct 29 19:43 cc-slash-command-builder\ndrwxr-xr-x@  3 natedamstra  staff    96 Oct 29 19:44 cc-subagent-architect\ndrwxr-xr-x@  8 natedamstra  staff   256 Oct 29 20:40 codebase-documenation\ndrwxr-xr-x@  5 natedamstra  staff   160 Oct 17 18:55 codebase-researcher\ndrwxr-xr-x@  5 natedamstra  staff   160 Oct 29 17:30 docs-deprecated\ndrwxr-xr-x@  9 natedamstra  staff   288 Oct 21 18:20 nanostore-builder\ndrwxr-xr-x@  8 natedamstra  staff   256 Oct 29 22:45 planner\ndrwxr-xr-x@ 15 natedamstra  staff   480 Oct 21 14:35 soc-appwrite-integration\ndrwxr-xr-x@  6 natedamstra  staff   192 Oct 17 18:55 typescript-fixer\ndrwxr-xr-x@  7 natedamstra  staff   224 Oct 21 15:45 vue-component-builder\ndrwx------@  3 natedamstra  staff    96 Oct 21 15:45 vue-composable-builder\ndrwx------@  3 natedamstra  staff    96 Oct 21 15:24 vueuse-expert\ndrwxr-xr-x@  7 natedamstra  staff   224 Oct 21 18:20 zod-schema-architect","is_error":false}]},"uuid":"351d38ec-ffba-4018-be1a-31968260a68d","timestamp":"2025-10-30T05:56:20.095Z","toolUseResult":{"stdout":"total 0\ndrwxr-xr-x@  7 natedamstra  staff   224 Oct 17 18:55 _archived_appwrite-integration\ndrwxr-xr-x@ 23 natedamstra  staff   736 Oct 29 21:02 .\ndrwxr-xr-x@ 95 natedamstra  staff  3040 Oct 29 22:54 ..\ndrwxr-xr-x@  4 natedamstra  staff   128 Oct 21 18:20 astro-routing\ndrwxr-xr-x@  9 natedamstra  staff   288 Oct 21 15:44 astro-vue-architect\ndrwxr-xr-x@  3 natedamstra  staff    96 Oct 17 18:56 cc-hook-designer\ndrwxr-xr-x@  4 natedamstra  staff   128 Oct 29 19:45 cc-mastery\ndrwxr-xr-x@  3 natedamstra  staff    96 Oct 17 18:56 cc-mcp-integration\ndrwxr-xr-x@  3 natedamstra  staff    96 Oct 17 18:56 cc-output-style-creator\ndrwxr-xr-x@  3 natedamstra  staff    96 Oct 29 19:44 cc-skill-builder\ndrwxr-xr-x@  3 natedamstra  staff    96 Oct 29 19:43 cc-slash-command-builder\ndrwxr-xr-x@  3 natedamstra  staff    96 Oct 29 19:44 cc-subagent-architect\ndrwxr-xr-x@  8 natedamstra  staff   256 Oct 29 20:40 codebase-documenation\ndrwxr-xr-x@  5 natedamstra  staff   160 Oct 17 18:55 codebase-researcher\ndrwxr-xr-x@  5 natedamstra  staff   160 Oct 29 17:30 docs-deprecated\ndrwxr-xr-x@  9 natedamstra  staff   288 Oct 21 18:20 nanostore-builder\ndrwxr-xr-x@  8 natedamstra  staff   256 Oct 29 22:45 planner\ndrwxr-xr-x@ 15 natedamstra  staff   480 Oct 21 14:35 soc-appwrite-integration\ndrwxr-xr-x@  6 natedamstra  staff   192 Oct 17 18:55 typescript-fixer\ndrwxr-xr-x@  7 natedamstra  staff   224 Oct 21 15:45 vue-component-builder\ndrwx------@  3 natedamstra  staff    96 Oct 21 15:45 vue-composable-builder\ndrwx------@  3 natedamstra  staff    96 Oct 21 15:24 vueuse-expert\ndrwxr-xr-x@  7 natedamstra  staff   224 Oct 21 18:20 zod-schema-architect","stderr":"","interrupted":false,"isImage":false}}
{"parentUuid":"351d38ec-ffba-4018-be1a-31968260a68d","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01CgS5c9qdWqpnAD4yDqG85y","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01HJeTS72gFan2ndCBdrfEcb","name":"Read","input":{"file_path":"/Users/natedamstra/.claude/skills/vue-component-builder/SKILL.md"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":26364,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":26364,"ephemeral_1h_input_tokens":0},"output_tokens":244,"service_tier":"standard"}},"requestId":"req_011CUcsGWpCfFhqAQxHTuHy4","type":"assistant","uuid":"2fc3f9f1-5293-44e4-98e5-ad77cdd8c0fe","timestamp":"2025-10-30T05:56:23.988Z"}
{"parentUuid":"2fc3f9f1-5293-44e4-98e5-ad77cdd8c0fe","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01CgS5c9qdWqpnAD4yDqG85y","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01WWUesubUc6cr3qTaA5cfux","name":"Read","input":{"file_path":"/Users/natedamstra/.claude/skills/nanostore-builder/SKILL.md"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":26364,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":26364,"ephemeral_1h_input_tokens":0},"output_tokens":244,"service_tier":"standard"}},"requestId":"req_011CUcsGWpCfFhqAQxHTuHy4","type":"assistant","uuid":"ed580a9e-d992-4719-b471-6552b342bb40","timestamp":"2025-10-30T05:56:24.776Z"}
{"parentUuid":"ed580a9e-d992-4719-b471-6552b342bb40","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01CgS5c9qdWqpnAD4yDqG85y","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01XS66HAuf1fLCEGEyWK3dWt","name":"Read","input":{"file_path":"/Users/natedamstra/.claude/skills/cc-skill-builder/SKILL.md"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":26364,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":26364,"ephemeral_1h_input_tokens":0},"output_tokens":244,"service_tier":"standard"}},"requestId":"req_011CUcsGWpCfFhqAQxHTuHy4","type":"assistant","uuid":"e5b47563-8e33-47de-b79c-87208e64c482","timestamp":"2025-10-30T05:56:25.018Z"}
{"parentUuid":"e5b47563-8e33-47de-b79c-87208e64c482","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01CgS5c9qdWqpnAD4yDqG85y","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01NAvSxSre6rAwMJPZtFjgzj","name":"Read","input":{"file_path":"/Users/natedamstra/.claude/skills/typescript-fixer/SKILL.md"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":26364,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":26364,"ephemeral_1h_input_tokens":0},"output_tokens":244,"service_tier":"standard"}},"requestId":"req_011CUcsGWpCfFhqAQxHTuHy4","type":"assistant","uuid":"8176b18c-da7a-479b-9b26-8a460a30c842","timestamp":"2025-10-30T05:56:25.055Z"}
{"parentUuid":"8176b18c-da7a-479b-9b26-8a460a30c842","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01XS66HAuf1fLCEGEyWK3dWt","type":"tool_result","content":"     1→---\n     2→name: CC Skill Builder\n     3→description: MUST BE USED for creating and designing Claude Code skills with proper structure, frontmatter, and progressive disclosure. Use when creating new skills, modifying existing skills, designing skill architectures, or asking \"how do I create a skill\", \"make a skill for\", \"design a skill\", \"skill best practices\". Provides complete skill templates, frontmatter validation, description optimization, progressive disclosure patterns, and file organization strategies. Use for \"create skill\", \"new skill\", \"skill structure\", \"SKILL.md\", \"skill frontmatter\", \"skill description\", \"skill organization\".\n     4→version: 1.0.0\n     5→tags: [claude-code, skills, skill-creation, skill-design, frontmatter, progressive-disclosure, templates, best-practices, skill-architecture]\n     6→---\n     7→\n     8→# CC Skill Builder\n     9→\n    10→## Quick Start\n    11→\n    12→A Claude Code skill is a modular capability that Claude autonomously invokes based on your request and the skill's description. Skills consist of:\n    13→\n    14→1. **SKILL.md** - Required file with YAML frontmatter + core instructions\n    15→2. **Supporting files** - Optional reference docs, examples, scripts, templates\n    16→3. **Progressive disclosure** - Load information only as needed to minimize context\n    17→\n    18→**Key Principle:** Skills are model-invoked (Claude decides when to use them based on description), NOT user-invoked like slash commands.\n    19→\n    20→## Core Skill Architecture\n    21→\n    22→### File Structure\n    23→\n    24→```\n    25→~/.claude/skills/my-skill/          # User-level (personal)\n    26→├── SKILL.md                        # Required: frontmatter + core instructions\n    27→├── reference.md                    # Optional: detailed documentation\n    28→├── examples.md                     # Optional: usage examples\n    29→├── scripts/\n    30→│   ├── helper.py                   # Optional: executable scripts\n    31→│   └── validator.sh\n    32→└── templates/\n    33→    ├── template-1.txt\n    34→    └── template-2.json\n    35→\n    36→.claude/skills/project-skill/       # Project-level (team shared)\n    37→└── [same structure]\n    38→```\n    39→\n    40→**Scope Rules:**\n    41→- User-level: `~/.claude/skills/` - Personal workflows, cross-project\n    42→- Project-level: `.claude/skills/` - Team standards, version controlled\n    43→- Priority: Project-level overrides user-level with same name\n    44→\n    45→### SKILL.md Format\n    46→\n    47→```markdown\n    48→---\n    49→name: Skill Display Name\n    50→description: |\n    51→  One-line summary describing WHAT this skill does and WHEN to use it.\n    52→  Be specific: mention file types, use cases, and trigger conditions.\n    53→version: 1.0.0\n    54→tags: [category, use-case, tool]\n    55→---\n    56→\n    57→# Skill Display Name\n    58→\n    59→## Quick Start\n    60→- 2-3 bullet points for immediate use\n    61→- What Claude should do first\n    62→\n    63→## Instructions\n    64→1. Primary workflow steps\n    65→2. Decision points\n    66→3. Error handling\n    67→\n    68→## Examples\n    69→### Basic Example\n    70→[Code or walkthrough]\n    71→\n    72→### Advanced Example\n    73→[Complex scenario]\n    74→\n    75→## Reference\n    76→For detailed information, see [reference.md](reference.md).\n    77→\n    78→## Troubleshooting\n    79→### Issue: X happens\n    80→Solution: Y\n    81→```\n    82→\n    83→## CRITICAL: Description Field Mastery\n    84→\n    85→**The description is your ONLY chance to tell Claude when to use this skill.**\n    86→\n    87→### Description Best Practices\n    88→\n    89→❌ **WRONG - Too Vague:**\n    90→```yaml\n    91→description: Helpful skill for analysis\n    92→```\n    93→\n    94→✅ **RIGHT - Specific Triggers:**\n    95→```yaml\n    96→description: |\n    97→  Analyze sales data in Excel files and CRM exports. Use for sales reports,\n    98→  pipeline analysis, and revenue tracking. Works with .xlsx and .csv formats.\n    99→  Use when \"analyze spreadsheet\", \"create pivot table\", \"sales report\".\n   100→```\n   101→\n   102→### Description Components\n   103→\n   104→Include these elements:\n   105→1. **WHAT it does** - Core capability in one sentence\n   106→2. **WHEN to use** - Specific triggers and use cases\n   107→3. **File types** - .xlsx, .csv, .json, .md, .py, etc.\n   108→4. **Keywords** - Search terms users might mention\n   109→5. **Output types** - Charts, reports, summaries, code, etc.\n   110→\n   111→### Description Template\n   112→\n   113→```yaml\n   114→description: |\n   115→  [ACTION VERB] [WHAT]. Use for [USE CASE 1], [USE CASE 2], and [USE CASE 3].\n   116→  Works with [FILE TYPES]. Use when [TRIGGER PHRASE 1], [TRIGGER PHRASE 2].\n   117→```\n   118→\n   119→### Real Examples\n   120→\n   121→```yaml\n   122→# Example 1: Domain-specific skill\n   123→description: |\n   124→  Build Vue 3 components using Composition API with TypeScript strict mode\n   125→  and Tailwind CSS. Use when creating .vue SFCs, building form components,\n   126→  modals with Teleport, or integrating third-party libraries. Use for\n   127→  \"create component\", \"build Vue component\", \".vue file\", \"modal\", \"form\".\n   128→\n   129→# Example 2: Tool integration\n   130→description: |\n   131→  Create and manage Appwrite database collections, authentication flows,\n   132→  and file storage with proper SSR compatibility. Use when integrating\n   133→  Appwrite SDK, setting up auth (OAuth, JWT), querying collections with\n   134→  Query patterns, or uploading files. Use for \"Appwrite\", \"database query\",\n   135→  \"auth flow\", \"file upload\", \"realtime subscription\".\n   136→\n   137→# Example 3: Meta-skill (like this one!)\n   138→description: |\n   139→  MUST BE USED for creating and designing Claude Code skills with proper\n   140→  structure, frontmatter, and progressive disclosure. Use when creating\n   141→  new skills, modifying existing skills, or asking \"how do I create a skill\",\n   142→  \"make a skill for\", \"design a skill\", \"skill best practices\".\n   143→```\n   144→\n   145→## Progressive Disclosure Pattern\n   146→\n   147→**Core Concept:** Load information only as needed to minimize context usage.\n   148→\n   149→### Context Window Usage Lifecycle\n   150→\n   151→```\n   152→├─ Initial Context ──── SKILL.md metadata only (~100 tokens)\n   153→│  - name: \"My Skill\"\n   154→│  - description: \"...\"\n   155→│\n   156→├─ Skill Triggered ──── SKILL.md full content loaded (~500-1000 tokens)\n   157→│  - Instructions section\n   158→│  - Basic examples\n   159→│\n   160→├─ Claude Chooses ───── Supporting files on demand (~1000-5000 tokens/file)\n   161→│  - reference.md for API details\n   162→│  - examples.md for specific case\n   163→│\n   164→└─ Execution ────────── Only necessary code runs\n   165→   - Scripts with specific parameters\n   166→   - Templates instantiated\n   167→```\n   168→\n   169→### Size Guidelines\n   170→\n   171→| SKILL.md Size | Action |\n   172→|---------------|--------|\n   173→| < 2KB | Ideal - always loads completely |\n   174→| 2-10KB | Good - typical for most skills |\n   175→| 10-50KB | Consider splitting into files |\n   176→| > 50KB | **Definitely split** - move reference/examples to separate files |\n   177→\n   178→### How to Split\n   179→\n   180→**SKILL.md (Keep concise):**\n   181→```markdown\n   182→## Instructions\n   183→[Core workflow - 3-5 steps]\n   184→\n   185→## Examples\n   186→[1-2 basic examples inline]\n   187→\n   188→See [examples.md](examples.md) for:\n   189→- Advanced use cases\n   190→- Edge case handling\n   191→- Integration patterns\n   192→\n   193→## API Reference\n   194→For detailed API specifications, see [api-reference.md](api-reference.md).\n   195→```\n   196→\n   197→**examples.md (Separate file):**\n   198→```markdown\n   199→# Detailed Examples\n   200→\n   201→## Example 1: Basic Workflow\n   202→[Full walkthrough]\n   203→\n   204→## Example 2: Advanced Pattern\n   205→[Complex scenario]\n   206→\n   207→## Example 3: Edge Cases\n   208→[Error handling]\n   209→```\n   210→\n   211→## Skill Templates\n   212→\n   213→### Template 1: Domain Knowledge Skill\n   214→\n   215→```markdown\n   216→---\n   217→name: [Domain] Expert\n   218→description: |\n   219→  [Action] for [domain] using [tools/frameworks]. Use when [trigger 1],\n   220→  [trigger 2], or working with [file types]. Use for \"[keyword 1]\",\n   221→  \"[keyword 2]\", \"[keyword 3]\".\n   222→version: 1.0.0\n   223→tags: [domain, use-case, tool]\n   224→---\n   225→\n   226→# [Domain] Expert\n   227→\n   228→## Quick Start\n   229→- What this skill helps with\n   230→- Primary use cases (3-5 bullet points)\n   231→\n   232→## Instructions\n   233→\n   234→### Step 1: [Phase Name]\n   235→1. [Specific action]\n   236→2. [Expected outcome]\n   237→\n   238→### Step 2: [Phase Name]\n   239→1. [Specific action]\n   240→2. [Expected outcome]\n   241→\n   242→### Step 3: [Output]\n   243→- [What gets created]\n   244→- [Format specifications]\n   245→\n   246→## Examples\n   247→\n   248→### Example 1: [Common Use Case]\n   249→User provides: [Input]\n   250→Claude: [Steps] → [Output]\n   251→\n   252→### Example 2: [Advanced Use Case]\n   253→[Walkthrough]\n   254→\n   255→## Troubleshooting\n   256→\n   257→### Issue: [Common Problem]\n   258→Solution: [How to fix]\n   259→\n   260→### Issue: [Another Problem]\n   261→Solution: [How to fix]\n   262→\n   263→## References\n   264→For detailed specifications, see [reference.md](reference.md).\n   265→```\n   266→\n   267→### Template 2: Code Generation Skill\n   268→\n   269→```markdown\n   270→---\n   271→name: [Language/Framework] Builder\n   272→description: |\n   273→  Generate [what] using [language/framework] with [patterns]. Use when\n   274→  creating [artifact types], building [features], or working with [file types].\n   275→  Use for \"[keyword 1]\", \"[keyword 2]\", \"[keyword 3]\".\n   276→version: 1.0.0\n   277→tags: [language, framework, code-generation]\n   278→---\n   279→\n   280→# [Language/Framework] Builder\n   281→\n   282→## Quick Start\n   283→- Generate production-ready [artifact] code\n   284→- Follow [framework] best practices\n   285→- Include [patterns] by default\n   286→\n   287→## Core Patterns\n   288→\n   289→### Pattern 1: [Pattern Name]\n   290→**When to use:** [Scenario]\n   291→\n   292→\\`\\`\\`[language]\n   293→// Code example\n   294→\\`\\`\\`\n   295→\n   296→### Pattern 2: [Pattern Name]\n   297→**When to use:** [Scenario]\n   298→\n   299→\\`\\`\\`[language]\n   300→// Code example\n   301→\\`\\`\\`\n   302→\n   303→## Instructions\n   304→\n   305→1. **Understand Requirements**\n   306→   - Ask clarifying questions if needed\n   307→   - Identify [specific concerns]\n   308→\n   309→2. **Generate Code**\n   310→   - Use [pattern] for [scenario]\n   311→   - Include [required elements]\n   312→   - Follow [conventions]\n   313→\n   314→3. **Validate**\n   315→   - Check [criterion 1]\n   316→   - Verify [criterion 2]\n   317→   - Test [criterion 3]\n   318→\n   319→## Examples\n   320→See [examples.md](examples.md) for complete implementations.\n   321→\n   322→## Troubleshooting\n   323→Common issues documented in [troubleshooting.md](troubleshooting.md).\n   324→```\n   325→\n   326→### Template 3: Analysis/Review Skill\n   327→\n   328→```markdown\n   329→---\n   330→name: [Domain] Analyzer\n   331→description: |\n   332→  Analyze [what] for [concerns]. Use when reviewing [artifacts],\n   333→  checking [quality aspects], or validating [requirements].\n   334→  Use for \"[keyword 1]\", \"[keyword 2]\", \"[keyword 3]\".\n   335→version: 1.0.0\n   336→tags: [analysis, review, quality]\n   337→---\n   338→\n   339→# [Domain] Analyzer\n   340→\n   341→## Quick Start\n   342→Systematic analysis of [artifacts] across [dimensions]:\n   343→1. [Dimension 1]\n   344→2. [Dimension 2]\n   345→3. [Dimension 3]\n   346→\n   347→## Analysis Framework\n   348→\n   349→### Phase 1: [Analysis Type]\n   350→**Focus:** [What to look for]\n   351→\n   352→Checklist:\n   353→- [ ] [Check 1]\n   354→- [ ] [Check 2]\n   355→- [ ] [Check 3]\n   356→\n   357→### Phase 2: [Analysis Type]\n   358→**Focus:** [What to look for]\n   359→\n   360→Checklist:\n   361→- [ ] [Check 1]\n   362→- [ ] [Check 2]\n   363→- [ ] [Check 3]\n   364→\n   365→### Phase 3: Reporting\n   366→Output structured review:\n   367→- Summary (1-2 sentences)\n   368→- Issues by priority (Critical/High/Medium/Low)\n   369→- Code snippets with suggestions\n   370→- Risk assessment\n   371→\n   372→## Examples\n   373→\n   374→### Example 1: [Scenario]\n   375→[Input] → [Analysis] → [Output]\n   376→\n   377→### Example 2: [Scenario]\n   378→[Input] → [Analysis] → [Output]\n   379→\n   380→## Severity Definitions\n   381→\n   382→**Critical:** [Definition + examples]\n   383→**High:** [Definition + examples]\n   384→**Medium:** [Definition + examples]\n   385→**Low:** [Definition + examples]\n   386→```\n   387→\n   388→### Template 4: Integration Skill\n   389→\n   390→```markdown\n   391→---\n   392→name: [Service] Integration\n   393→description: |\n   394→  Integrate [service/API] with proper [concerns]. Use when connecting\n   395→  to [service], setting up [features], or working with [endpoints].\n   396→  Use for \"[keyword 1]\", \"[keyword 2]\", \"[keyword 3]\".\n   397→version: 1.0.0\n   398→tags: [integration, api, service]\n   399→---\n   400→\n   401→# [Service] Integration\n   402→\n   403→## Quick Start\n   404→- Connect to [service] API\n   405→- Handle [authentication method]\n   406→- Implement [core features]\n   407→\n   408→## Setup Instructions\n   409→\n   410→### 1. Authentication\n   411→- Method: [OAuth/API Key/JWT]\n   412→- Environment variables: [List]\n   413→- Setup steps: [1-3 steps]\n   414→\n   415→### 2. Core Operations\n   416→\n   417→#### Operation 1: [Name]\n   418→Purpose: [What it does]\n   419→\n   420→\\`\\`\\`[language]\n   421→// Code example\n   422→\\`\\`\\`\n   423→\n   424→#### Operation 2: [Name]\n   425→Purpose: [What it does]\n   426→\n   427→\\`\\`\\`[language]\n   428→// Code example\n   429→\\`\\`\\`\n   430→\n   431→### 3. Error Handling\n   432→- Error code [X]: [Meaning + solution]\n   433→- Error code [Y]: [Meaning + solution]\n   434→\n   435→## Best Practices\n   436→1. [Practice 1]\n   437→2. [Practice 2]\n   438→3. [Practice 3]\n   439→\n   440→## Examples\n   441→See [examples.md](examples.md) for complete integration patterns.\n   442→\n   443→## Security Checklist\n   444→- [ ] Never hardcode API keys\n   445→- [ ] Use environment variables\n   446→- [ ] Validate all inputs\n   447→- [ ] Handle rate limiting\n   448→- [ ] Log errors appropriately\n   449→```\n   450→\n   451→## Advanced Patterns\n   452→\n   453→### Pattern 1: Multi-File Skills with Scripts\n   454→\n   455→**Structure:**\n   456→```\n   457→my-skill/\n   458→├── SKILL.md                 # Core instructions\n   459→├── scripts/\n   460→│   ├── preprocess.py       # Data preparation\n   461→│   └── validate.sh         # Validation logic\n   462→└── templates/\n   463→    └── config.json         # Configuration template\n   464→```\n   465→\n   466→**SKILL.md references:**\n   467→```markdown\n   468→## Processing Pipeline\n   469→\n   470→1. **Preprocess Data**\n   471→   Run: `python scripts/preprocess.py --input data.csv`\n   472→\n   473→2. **Validate**\n   474→   Run: `bash scripts/validate.sh output/`\n   475→\n   476→3. **Apply Template**\n   477→   Use: [templates/config.json](templates/config.json)\n   478→```\n   479→\n   480→**Available Tools for Script Execution:**\n   481→\n   482→When skills need to execute scripts or interact with the filesystem, Claude has access to these built-in tools:\n   483→\n   484→- **Bash** - Execute scripts (`python scripts/preprocess.py`, `bash scripts/validate.sh`)\n   485→- **Read** - Read script files, templates, config files\n   486→- **Write** - Generate files from templates\n   487→- **Edit** - Modify existing files\n   488→- **Glob** - Find files matching patterns (`scripts/**/*.py`)\n   489→- **Grep** - Search within files for content\n   490→\n   491→For comprehensive tool list, see the cc-subagent-architect skill.\n   492→\n   493→### Pattern 2: Skill Dependencies\n   494→\n   495→**Reference other skills:**\n   496→```markdown\n   497→---\n   498→name: Advanced ML Pipeline\n   499→description: |\n   500→  Build ML pipelines. Requires \"Data Preprocessor\" skill.\n   501→  Use after data is cleaned and validated.\n   502→---\n   503→\n   504→# Advanced ML Pipeline\n   505→\n   506→## Prerequisites\n   507→Complete these skills first:\n   508→1. [Data Preprocessor](../data-preprocessor/SKILL.md)\n   509→2. [Model Validator](../model-validator/SKILL.md)\n   510→\n   511→## Instructions\n   512→[Assumes prerequisite skills completed]\n   513→```\n   514→\n   515→### Pattern 3: Version Evolution\n   516→\n   517→**Document version changes:**\n   518→```markdown\n   519→---\n   520→name: My Skill\n   521→version: 2.0.0\n   522→---\n   523→\n   524→# My Skill\n   525→\n   526→## Version History\n   527→- **v2.0.0** (2025-10-29): Breaking changes to API\n   528→  - Removed: `old_method()`\n   529→  - Added: `new_method()` with validation\n   530→  - Migration: See [migration-v2.md](migration-v2.md)\n   531→- **v1.1.0** (2025-09-15): Added feature X\n   532→- **v1.0.0** (2025-09-01): Initial release\n   533→\n   534→## Migration Guides\n   535→- [v1.x → v2.x Migration](migration-v2.md)\n   536→```\n   537→\n   538→### Pattern 4: Output Organization\n   539→\n   540→**Timestamped Output Directories:**\n   541→\n   542→When skills generate outputs, use consistent timestamp format:\n   543→\n   544→```markdown\n   545→## Output Organization\n   546→\n   547→1. **Create timestamped directory:**\n   548→   ```bash\n   549→   TIMESTAMP=$(date +\"%Y-%m-%d_%H-%M-%S\")\n   550→   mkdir -p \"outputs/${TIMESTAMP}/category\"\n   551→   ```\n   552→\n   553→2. **Save outputs with clear naming:**\n   554→   - outputs/2025-10-29_19-30-45/analysis/results.md\n   555→   - outputs/2025-10-29_19-30-45/reports/summary.md\n   556→\n   557→3. **Benefits:**\n   558→   - Automatic versioning - never overwrite\n   559→   - Audit trail - track evolution\n   560→   - Easy comparison - diff between runs\n   561→```\n   562→\n   563→**Standard Timestamp Format:**\n   564→```bash\n   565→YYYY-MM-DD_HH-MM-SS  # Example: 2025-10-29_19-30-45\n   566→```\n   567→\n   568→## Skill Creation Workflow\n   569→\n   570→### Step 1: Define Purpose\n   571→- **What:** Single, clear capability\n   572→- **When:** Specific triggers and use cases\n   573→- **Who:** Target users or projects\n   574→\n   575→### Step 2: Design Description\n   576→Use the description template:\n   577→```yaml\n   578→description: |\n   579→  [ACTION] [WHAT]. Use for [USE CASE 1], [USE CASE 2], [USE CASE 3].\n   580→  Works with [FILE TYPES]. Use when \"[TRIGGER 1]\", \"[TRIGGER 2]\".\n   581→```\n   582→\n   583→### Step 3: Structure Content\n   584→- **SKILL.md:** Core instructions only (< 10KB)\n   585→- **Supporting files:** Reference docs, examples, scripts\n   586→- **Progressive disclosure:** Link to supporting files\n   587→\n   588→### Step 4: Write Instructions\n   589→- Clear, sequential steps\n   590→- Decision points documented\n   591→- Error handling included\n   592→- Examples provided\n   593→\n   594→### Step 5: Test Discovery\n   595→1. Create a task that should trigger the skill\n   596→2. Verify Claude invokes it automatically\n   597→3. If not triggered: Improve description specificity\n   598→\n   599→### Step 6: Iterate\n   600→- Add examples as you encounter new use cases\n   601→- Document edge cases in troubleshooting\n   602→- Update version and history\n   603→\n   604→## Testing Your Skill\n   605→\n   606→### Test 1: Discovery\n   607→**Verify Claude finds your skill:**\n   608→- Describe a task matching the skill's description\n   609→- Claude should invoke the skill automatically\n   610→- If not: Make description more specific with keywords\n   611→\n   612→### Test 2: Instructions Clarity\n   613→**Verify Claude follows the workflow:**\n   614→- Skill should guide Claude through steps\n   615→- Decision points should be clear\n   616→- Error handling should work\n   617→\n   618→### Test 3: Progressive Disclosure\n   619→**Verify supporting files load on demand:**\n   620→- SKILL.md should reference additional files\n   621→- Claude should load them only when needed\n   622→- Context usage should be minimal initially\n   623→\n   624→### Test 4: Edge Cases\n   625→**Verify troubleshooting section works:**\n   626→- Try scenarios documented in troubleshooting\n   627→- Verify solutions are accurate\n   628→- Add new edge cases as discovered\n   629→\n   630→## Common Pitfalls & Solutions\n   631→\n   632→### Pitfall 1: Vague Description\n   633→**Problem:** Claude doesn't invoke skill when expected\n   634→\n   635→**Solution:** Add specific keywords and trigger phrases\n   636→```yaml\n   637→# Before\n   638→description: Helps with data analysis\n   639→\n   640→# After\n   641→description: Analyze CSV/Excel sales data for quarterly reports, forecasting, and pipeline tracking. Use when \"analyze spreadsheet\", \"sales report\", \"pivot table\", working with .xlsx/.csv files.\n   642→```\n   643→\n   644→### Pitfall 2: SKILL.md Too Large\n   645→**Problem:** Context window fills up quickly\n   646→\n   647→**Solution:** Split into multiple files\n   648→```markdown\n   649→# SKILL.md (concise)\n   650→## API Reference\n   651→For detailed specifications, see [api-reference.md](api-reference.md).\n   652→\n   653→## Examples\n   654→Basic examples below. See [examples.md](examples.md) for more.\n   655→```\n   656→\n   657→### Pitfall 3: Missing File Type Keywords\n   658→**Problem:** Skill not triggered for specific file types\n   659→\n   660→**Solution:** Explicitly mention file extensions\n   661→```yaml\n   662→description: Process data files. Use with .csv, .xlsx, .json, .parquet files.\n   663→```\n   664→\n   665→### Pitfall 4: No Clear Workflow\n   666→**Problem:** Claude doesn't know what to do\n   667→\n   668→**Solution:** Provide numbered steps\n   669→```markdown\n   670→## Instructions\n   671→1. Read the input file\n   672→2. Validate data structure\n   673→3. Transform using [pattern]\n   674→4. Output to [format]\n   675→```\n   676→\n   677→### Pitfall 5: No Examples\n   678→**Problem:** Abstract instructions are hard to follow\n   679→\n   680→**Solution:** Always include at least one example\n   681→```markdown\n   682→## Examples\n   683→### Basic Usage\n   684→User provides: `data.csv`\n   685→Claude: Reads file → Validates → Transforms → Outputs `report.xlsx`\n   686→```\n   687→\n   688→## Quick Reference Checklist\n   689→\n   690→Before creating a skill, verify:\n   691→\n   692→- [ ] **Purpose is clear:** Single, focused capability\n   693→- [ ] **Description is specific:** Includes WHAT + WHEN + file types + keywords\n   694→- [ ] **YAML frontmatter valid:** name, description required; version, tags optional\n   695→- [ ] **SKILL.md concise:** < 10KB, core instructions only\n   696→- [ ] **Supporting files separate:** examples.md, reference.md, scripts/\n   697→- [ ] **Progressive disclosure:** Reference supporting files from SKILL.md\n   698→- [ ] **Instructions are sequential:** Numbered steps with decision points\n   699→- [ ] **Examples provided:** At least 1-2 basic examples inline\n   700→- [ ] **Troubleshooting included:** Common issues documented\n   701→- [ ] **Scripts are idempotent:** Safe to run multiple times\n   702→- [ ] **Relative links used:** `[link](path/to/file.md)`\n   703→- [ ] **Version tracked:** Document changes in version history\n   704→- [ ] **Scope correct:** `.claude/skills/` (project) vs `~/.claude/skills/` (user)\n   705→- [ ] **Tested:** Verify Claude invokes skill automatically\n   706→\n   707→## Related Skills\n   708→\n   709→- **cc-mastery** - When to use skills vs. subagents vs. commands\n   710→- **cc-subagent-architect** - Creating specialized AI agents\n   711→- **cc-slash-command-builder** - Creating user-invoked commands\n   712→\n   713→## References\n   714→\n   715→Official Documentation:\n   716→- [Agent Skills Guide](https://docs.claude.com/en/docs/claude-code/skills)\n   717→- [Agent Skills Architecture](https://www.anthropic.com/engineering/equipping-agents-for-the-real-world-with-agent-skills)\n   718→- [Awesome Claude Code](https://github.com/hesreallyhim/awesome-claude-code)\n   719→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"75ac82e2-b591-4da9-b996-efb04975fca3","timestamp":"2025-10-30T05:56:25.380Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/natedamstra/.claude/skills/cc-skill-builder/SKILL.md","content":"---\nname: CC Skill Builder\ndescription: MUST BE USED for creating and designing Claude Code skills with proper structure, frontmatter, and progressive disclosure. Use when creating new skills, modifying existing skills, designing skill architectures, or asking \"how do I create a skill\", \"make a skill for\", \"design a skill\", \"skill best practices\". Provides complete skill templates, frontmatter validation, description optimization, progressive disclosure patterns, and file organization strategies. Use for \"create skill\", \"new skill\", \"skill structure\", \"SKILL.md\", \"skill frontmatter\", \"skill description\", \"skill organization\".\nversion: 1.0.0\ntags: [claude-code, skills, skill-creation, skill-design, frontmatter, progressive-disclosure, templates, best-practices, skill-architecture]\n---\n\n# CC Skill Builder\n\n## Quick Start\n\nA Claude Code skill is a modular capability that Claude autonomously invokes based on your request and the skill's description. Skills consist of:\n\n1. **SKILL.md** - Required file with YAML frontmatter + core instructions\n2. **Supporting files** - Optional reference docs, examples, scripts, templates\n3. **Progressive disclosure** - Load information only as needed to minimize context\n\n**Key Principle:** Skills are model-invoked (Claude decides when to use them based on description), NOT user-invoked like slash commands.\n\n## Core Skill Architecture\n\n### File Structure\n\n```\n~/.claude/skills/my-skill/          # User-level (personal)\n├── SKILL.md                        # Required: frontmatter + core instructions\n├── reference.md                    # Optional: detailed documentation\n├── examples.md                     # Optional: usage examples\n├── scripts/\n│   ├── helper.py                   # Optional: executable scripts\n│   └── validator.sh\n└── templates/\n    ├── template-1.txt\n    └── template-2.json\n\n.claude/skills/project-skill/       # Project-level (team shared)\n└── [same structure]\n```\n\n**Scope Rules:**\n- User-level: `~/.claude/skills/` - Personal workflows, cross-project\n- Project-level: `.claude/skills/` - Team standards, version controlled\n- Priority: Project-level overrides user-level with same name\n\n### SKILL.md Format\n\n```markdown\n---\nname: Skill Display Name\ndescription: |\n  One-line summary describing WHAT this skill does and WHEN to use it.\n  Be specific: mention file types, use cases, and trigger conditions.\nversion: 1.0.0\ntags: [category, use-case, tool]\n---\n\n# Skill Display Name\n\n## Quick Start\n- 2-3 bullet points for immediate use\n- What Claude should do first\n\n## Instructions\n1. Primary workflow steps\n2. Decision points\n3. Error handling\n\n## Examples\n### Basic Example\n[Code or walkthrough]\n\n### Advanced Example\n[Complex scenario]\n\n## Reference\nFor detailed information, see [reference.md](reference.md).\n\n## Troubleshooting\n### Issue: X happens\nSolution: Y\n```\n\n## CRITICAL: Description Field Mastery\n\n**The description is your ONLY chance to tell Claude when to use this skill.**\n\n### Description Best Practices\n\n❌ **WRONG - Too Vague:**\n```yaml\ndescription: Helpful skill for analysis\n```\n\n✅ **RIGHT - Specific Triggers:**\n```yaml\ndescription: |\n  Analyze sales data in Excel files and CRM exports. Use for sales reports,\n  pipeline analysis, and revenue tracking. Works with .xlsx and .csv formats.\n  Use when \"analyze spreadsheet\", \"create pivot table\", \"sales report\".\n```\n\n### Description Components\n\nInclude these elements:\n1. **WHAT it does** - Core capability in one sentence\n2. **WHEN to use** - Specific triggers and use cases\n3. **File types** - .xlsx, .csv, .json, .md, .py, etc.\n4. **Keywords** - Search terms users might mention\n5. **Output types** - Charts, reports, summaries, code, etc.\n\n### Description Template\n\n```yaml\ndescription: |\n  [ACTION VERB] [WHAT]. Use for [USE CASE 1], [USE CASE 2], and [USE CASE 3].\n  Works with [FILE TYPES]. Use when [TRIGGER PHRASE 1], [TRIGGER PHRASE 2].\n```\n\n### Real Examples\n\n```yaml\n# Example 1: Domain-specific skill\ndescription: |\n  Build Vue 3 components using Composition API with TypeScript strict mode\n  and Tailwind CSS. Use when creating .vue SFCs, building form components,\n  modals with Teleport, or integrating third-party libraries. Use for\n  \"create component\", \"build Vue component\", \".vue file\", \"modal\", \"form\".\n\n# Example 2: Tool integration\ndescription: |\n  Create and manage Appwrite database collections, authentication flows,\n  and file storage with proper SSR compatibility. Use when integrating\n  Appwrite SDK, setting up auth (OAuth, JWT), querying collections with\n  Query patterns, or uploading files. Use for \"Appwrite\", \"database query\",\n  \"auth flow\", \"file upload\", \"realtime subscription\".\n\n# Example 3: Meta-skill (like this one!)\ndescription: |\n  MUST BE USED for creating and designing Claude Code skills with proper\n  structure, frontmatter, and progressive disclosure. Use when creating\n  new skills, modifying existing skills, or asking \"how do I create a skill\",\n  \"make a skill for\", \"design a skill\", \"skill best practices\".\n```\n\n## Progressive Disclosure Pattern\n\n**Core Concept:** Load information only as needed to minimize context usage.\n\n### Context Window Usage Lifecycle\n\n```\n├─ Initial Context ──── SKILL.md metadata only (~100 tokens)\n│  - name: \"My Skill\"\n│  - description: \"...\"\n│\n├─ Skill Triggered ──── SKILL.md full content loaded (~500-1000 tokens)\n│  - Instructions section\n│  - Basic examples\n│\n├─ Claude Chooses ───── Supporting files on demand (~1000-5000 tokens/file)\n│  - reference.md for API details\n│  - examples.md for specific case\n│\n└─ Execution ────────── Only necessary code runs\n   - Scripts with specific parameters\n   - Templates instantiated\n```\n\n### Size Guidelines\n\n| SKILL.md Size | Action |\n|---------------|--------|\n| < 2KB | Ideal - always loads completely |\n| 2-10KB | Good - typical for most skills |\n| 10-50KB | Consider splitting into files |\n| > 50KB | **Definitely split** - move reference/examples to separate files |\n\n### How to Split\n\n**SKILL.md (Keep concise):**\n```markdown\n## Instructions\n[Core workflow - 3-5 steps]\n\n## Examples\n[1-2 basic examples inline]\n\nSee [examples.md](examples.md) for:\n- Advanced use cases\n- Edge case handling\n- Integration patterns\n\n## API Reference\nFor detailed API specifications, see [api-reference.md](api-reference.md).\n```\n\n**examples.md (Separate file):**\n```markdown\n# Detailed Examples\n\n## Example 1: Basic Workflow\n[Full walkthrough]\n\n## Example 2: Advanced Pattern\n[Complex scenario]\n\n## Example 3: Edge Cases\n[Error handling]\n```\n\n## Skill Templates\n\n### Template 1: Domain Knowledge Skill\n\n```markdown\n---\nname: [Domain] Expert\ndescription: |\n  [Action] for [domain] using [tools/frameworks]. Use when [trigger 1],\n  [trigger 2], or working with [file types]. Use for \"[keyword 1]\",\n  \"[keyword 2]\", \"[keyword 3]\".\nversion: 1.0.0\ntags: [domain, use-case, tool]\n---\n\n# [Domain] Expert\n\n## Quick Start\n- What this skill helps with\n- Primary use cases (3-5 bullet points)\n\n## Instructions\n\n### Step 1: [Phase Name]\n1. [Specific action]\n2. [Expected outcome]\n\n### Step 2: [Phase Name]\n1. [Specific action]\n2. [Expected outcome]\n\n### Step 3: [Output]\n- [What gets created]\n- [Format specifications]\n\n## Examples\n\n### Example 1: [Common Use Case]\nUser provides: [Input]\nClaude: [Steps] → [Output]\n\n### Example 2: [Advanced Use Case]\n[Walkthrough]\n\n## Troubleshooting\n\n### Issue: [Common Problem]\nSolution: [How to fix]\n\n### Issue: [Another Problem]\nSolution: [How to fix]\n\n## References\nFor detailed specifications, see [reference.md](reference.md).\n```\n\n### Template 2: Code Generation Skill\n\n```markdown\n---\nname: [Language/Framework] Builder\ndescription: |\n  Generate [what] using [language/framework] with [patterns]. Use when\n  creating [artifact types], building [features], or working with [file types].\n  Use for \"[keyword 1]\", \"[keyword 2]\", \"[keyword 3]\".\nversion: 1.0.0\ntags: [language, framework, code-generation]\n---\n\n# [Language/Framework] Builder\n\n## Quick Start\n- Generate production-ready [artifact] code\n- Follow [framework] best practices\n- Include [patterns] by default\n\n## Core Patterns\n\n### Pattern 1: [Pattern Name]\n**When to use:** [Scenario]\n\n\\`\\`\\`[language]\n// Code example\n\\`\\`\\`\n\n### Pattern 2: [Pattern Name]\n**When to use:** [Scenario]\n\n\\`\\`\\`[language]\n// Code example\n\\`\\`\\`\n\n## Instructions\n\n1. **Understand Requirements**\n   - Ask clarifying questions if needed\n   - Identify [specific concerns]\n\n2. **Generate Code**\n   - Use [pattern] for [scenario]\n   - Include [required elements]\n   - Follow [conventions]\n\n3. **Validate**\n   - Check [criterion 1]\n   - Verify [criterion 2]\n   - Test [criterion 3]\n\n## Examples\nSee [examples.md](examples.md) for complete implementations.\n\n## Troubleshooting\nCommon issues documented in [troubleshooting.md](troubleshooting.md).\n```\n\n### Template 3: Analysis/Review Skill\n\n```markdown\n---\nname: [Domain] Analyzer\ndescription: |\n  Analyze [what] for [concerns]. Use when reviewing [artifacts],\n  checking [quality aspects], or validating [requirements].\n  Use for \"[keyword 1]\", \"[keyword 2]\", \"[keyword 3]\".\nversion: 1.0.0\ntags: [analysis, review, quality]\n---\n\n# [Domain] Analyzer\n\n## Quick Start\nSystematic analysis of [artifacts] across [dimensions]:\n1. [Dimension 1]\n2. [Dimension 2]\n3. [Dimension 3]\n\n## Analysis Framework\n\n### Phase 1: [Analysis Type]\n**Focus:** [What to look for]\n\nChecklist:\n- [ ] [Check 1]\n- [ ] [Check 2]\n- [ ] [Check 3]\n\n### Phase 2: [Analysis Type]\n**Focus:** [What to look for]\n\nChecklist:\n- [ ] [Check 1]\n- [ ] [Check 2]\n- [ ] [Check 3]\n\n### Phase 3: Reporting\nOutput structured review:\n- Summary (1-2 sentences)\n- Issues by priority (Critical/High/Medium/Low)\n- Code snippets with suggestions\n- Risk assessment\n\n## Examples\n\n### Example 1: [Scenario]\n[Input] → [Analysis] → [Output]\n\n### Example 2: [Scenario]\n[Input] → [Analysis] → [Output]\n\n## Severity Definitions\n\n**Critical:** [Definition + examples]\n**High:** [Definition + examples]\n**Medium:** [Definition + examples]\n**Low:** [Definition + examples]\n```\n\n### Template 4: Integration Skill\n\n```markdown\n---\nname: [Service] Integration\ndescription: |\n  Integrate [service/API] with proper [concerns]. Use when connecting\n  to [service], setting up [features], or working with [endpoints].\n  Use for \"[keyword 1]\", \"[keyword 2]\", \"[keyword 3]\".\nversion: 1.0.0\ntags: [integration, api, service]\n---\n\n# [Service] Integration\n\n## Quick Start\n- Connect to [service] API\n- Handle [authentication method]\n- Implement [core features]\n\n## Setup Instructions\n\n### 1. Authentication\n- Method: [OAuth/API Key/JWT]\n- Environment variables: [List]\n- Setup steps: [1-3 steps]\n\n### 2. Core Operations\n\n#### Operation 1: [Name]\nPurpose: [What it does]\n\n\\`\\`\\`[language]\n// Code example\n\\`\\`\\`\n\n#### Operation 2: [Name]\nPurpose: [What it does]\n\n\\`\\`\\`[language]\n// Code example\n\\`\\`\\`\n\n### 3. Error Handling\n- Error code [X]: [Meaning + solution]\n- Error code [Y]: [Meaning + solution]\n\n## Best Practices\n1. [Practice 1]\n2. [Practice 2]\n3. [Practice 3]\n\n## Examples\nSee [examples.md](examples.md) for complete integration patterns.\n\n## Security Checklist\n- [ ] Never hardcode API keys\n- [ ] Use environment variables\n- [ ] Validate all inputs\n- [ ] Handle rate limiting\n- [ ] Log errors appropriately\n```\n\n## Advanced Patterns\n\n### Pattern 1: Multi-File Skills with Scripts\n\n**Structure:**\n```\nmy-skill/\n├── SKILL.md                 # Core instructions\n├── scripts/\n│   ├── preprocess.py       # Data preparation\n│   └── validate.sh         # Validation logic\n└── templates/\n    └── config.json         # Configuration template\n```\n\n**SKILL.md references:**\n```markdown\n## Processing Pipeline\n\n1. **Preprocess Data**\n   Run: `python scripts/preprocess.py --input data.csv`\n\n2. **Validate**\n   Run: `bash scripts/validate.sh output/`\n\n3. **Apply Template**\n   Use: [templates/config.json](templates/config.json)\n```\n\n**Available Tools for Script Execution:**\n\nWhen skills need to execute scripts or interact with the filesystem, Claude has access to these built-in tools:\n\n- **Bash** - Execute scripts (`python scripts/preprocess.py`, `bash scripts/validate.sh`)\n- **Read** - Read script files, templates, config files\n- **Write** - Generate files from templates\n- **Edit** - Modify existing files\n- **Glob** - Find files matching patterns (`scripts/**/*.py`)\n- **Grep** - Search within files for content\n\nFor comprehensive tool list, see the cc-subagent-architect skill.\n\n### Pattern 2: Skill Dependencies\n\n**Reference other skills:**\n```markdown\n---\nname: Advanced ML Pipeline\ndescription: |\n  Build ML pipelines. Requires \"Data Preprocessor\" skill.\n  Use after data is cleaned and validated.\n---\n\n# Advanced ML Pipeline\n\n## Prerequisites\nComplete these skills first:\n1. [Data Preprocessor](../data-preprocessor/SKILL.md)\n2. [Model Validator](../model-validator/SKILL.md)\n\n## Instructions\n[Assumes prerequisite skills completed]\n```\n\n### Pattern 3: Version Evolution\n\n**Document version changes:**\n```markdown\n---\nname: My Skill\nversion: 2.0.0\n---\n\n# My Skill\n\n## Version History\n- **v2.0.0** (2025-10-29): Breaking changes to API\n  - Removed: `old_method()`\n  - Added: `new_method()` with validation\n  - Migration: See [migration-v2.md](migration-v2.md)\n- **v1.1.0** (2025-09-15): Added feature X\n- **v1.0.0** (2025-09-01): Initial release\n\n## Migration Guides\n- [v1.x → v2.x Migration](migration-v2.md)\n```\n\n### Pattern 4: Output Organization\n\n**Timestamped Output Directories:**\n\nWhen skills generate outputs, use consistent timestamp format:\n\n```markdown\n## Output Organization\n\n1. **Create timestamped directory:**\n   ```bash\n   TIMESTAMP=$(date +\"%Y-%m-%d_%H-%M-%S\")\n   mkdir -p \"outputs/${TIMESTAMP}/category\"\n   ```\n\n2. **Save outputs with clear naming:**\n   - outputs/2025-10-29_19-30-45/analysis/results.md\n   - outputs/2025-10-29_19-30-45/reports/summary.md\n\n3. **Benefits:**\n   - Automatic versioning - never overwrite\n   - Audit trail - track evolution\n   - Easy comparison - diff between runs\n```\n\n**Standard Timestamp Format:**\n```bash\nYYYY-MM-DD_HH-MM-SS  # Example: 2025-10-29_19-30-45\n```\n\n## Skill Creation Workflow\n\n### Step 1: Define Purpose\n- **What:** Single, clear capability\n- **When:** Specific triggers and use cases\n- **Who:** Target users or projects\n\n### Step 2: Design Description\nUse the description template:\n```yaml\ndescription: |\n  [ACTION] [WHAT]. Use for [USE CASE 1], [USE CASE 2], [USE CASE 3].\n  Works with [FILE TYPES]. Use when \"[TRIGGER 1]\", \"[TRIGGER 2]\".\n```\n\n### Step 3: Structure Content\n- **SKILL.md:** Core instructions only (< 10KB)\n- **Supporting files:** Reference docs, examples, scripts\n- **Progressive disclosure:** Link to supporting files\n\n### Step 4: Write Instructions\n- Clear, sequential steps\n- Decision points documented\n- Error handling included\n- Examples provided\n\n### Step 5: Test Discovery\n1. Create a task that should trigger the skill\n2. Verify Claude invokes it automatically\n3. If not triggered: Improve description specificity\n\n### Step 6: Iterate\n- Add examples as you encounter new use cases\n- Document edge cases in troubleshooting\n- Update version and history\n\n## Testing Your Skill\n\n### Test 1: Discovery\n**Verify Claude finds your skill:**\n- Describe a task matching the skill's description\n- Claude should invoke the skill automatically\n- If not: Make description more specific with keywords\n\n### Test 2: Instructions Clarity\n**Verify Claude follows the workflow:**\n- Skill should guide Claude through steps\n- Decision points should be clear\n- Error handling should work\n\n### Test 3: Progressive Disclosure\n**Verify supporting files load on demand:**\n- SKILL.md should reference additional files\n- Claude should load them only when needed\n- Context usage should be minimal initially\n\n### Test 4: Edge Cases\n**Verify troubleshooting section works:**\n- Try scenarios documented in troubleshooting\n- Verify solutions are accurate\n- Add new edge cases as discovered\n\n## Common Pitfalls & Solutions\n\n### Pitfall 1: Vague Description\n**Problem:** Claude doesn't invoke skill when expected\n\n**Solution:** Add specific keywords and trigger phrases\n```yaml\n# Before\ndescription: Helps with data analysis\n\n# After\ndescription: Analyze CSV/Excel sales data for quarterly reports, forecasting, and pipeline tracking. Use when \"analyze spreadsheet\", \"sales report\", \"pivot table\", working with .xlsx/.csv files.\n```\n\n### Pitfall 2: SKILL.md Too Large\n**Problem:** Context window fills up quickly\n\n**Solution:** Split into multiple files\n```markdown\n# SKILL.md (concise)\n## API Reference\nFor detailed specifications, see [api-reference.md](api-reference.md).\n\n## Examples\nBasic examples below. See [examples.md](examples.md) for more.\n```\n\n### Pitfall 3: Missing File Type Keywords\n**Problem:** Skill not triggered for specific file types\n\n**Solution:** Explicitly mention file extensions\n```yaml\ndescription: Process data files. Use with .csv, .xlsx, .json, .parquet files.\n```\n\n### Pitfall 4: No Clear Workflow\n**Problem:** Claude doesn't know what to do\n\n**Solution:** Provide numbered steps\n```markdown\n## Instructions\n1. Read the input file\n2. Validate data structure\n3. Transform using [pattern]\n4. Output to [format]\n```\n\n### Pitfall 5: No Examples\n**Problem:** Abstract instructions are hard to follow\n\n**Solution:** Always include at least one example\n```markdown\n## Examples\n### Basic Usage\nUser provides: `data.csv`\nClaude: Reads file → Validates → Transforms → Outputs `report.xlsx`\n```\n\n## Quick Reference Checklist\n\nBefore creating a skill, verify:\n\n- [ ] **Purpose is clear:** Single, focused capability\n- [ ] **Description is specific:** Includes WHAT + WHEN + file types + keywords\n- [ ] **YAML frontmatter valid:** name, description required; version, tags optional\n- [ ] **SKILL.md concise:** < 10KB, core instructions only\n- [ ] **Supporting files separate:** examples.md, reference.md, scripts/\n- [ ] **Progressive disclosure:** Reference supporting files from SKILL.md\n- [ ] **Instructions are sequential:** Numbered steps with decision points\n- [ ] **Examples provided:** At least 1-2 basic examples inline\n- [ ] **Troubleshooting included:** Common issues documented\n- [ ] **Scripts are idempotent:** Safe to run multiple times\n- [ ] **Relative links used:** `[link](path/to/file.md)`\n- [ ] **Version tracked:** Document changes in version history\n- [ ] **Scope correct:** `.claude/skills/` (project) vs `~/.claude/skills/` (user)\n- [ ] **Tested:** Verify Claude invokes skill automatically\n\n## Related Skills\n\n- **cc-mastery** - When to use skills vs. subagents vs. commands\n- **cc-subagent-architect** - Creating specialized AI agents\n- **cc-slash-command-builder** - Creating user-invoked commands\n\n## References\n\nOfficial Documentation:\n- [Agent Skills Guide](https://docs.claude.com/en/docs/claude-code/skills)\n- [Agent Skills Architecture](https://www.anthropic.com/engineering/equipping-agents-for-the-real-world-with-agent-skills)\n- [Awesome Claude Code](https://github.com/hesreallyhim/awesome-claude-code)\n","numLines":719,"startLine":1,"totalLines":719}}}
{"parentUuid":"75ac82e2-b591-4da9-b996-efb04975fca3","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01NAvSxSre6rAwMJPZtFjgzj","type":"tool_result","content":"     1→---\n     2→name: TypeScript Fixer\n     3→description: Fix TypeScript errors by tracing root cause, never using 'any' or assertions as shortcuts. Use when encountering type errors in .ts/.tsx files, component props validation, Zod schema mismatches, Appwrite type inference failures. CRITICAL PHILOSOPHY: Type errors indicate architectural issues, not just syntax problems. Fix source types (Zod schemas, API responses, component interfaces). Handles common patterns: Zod type inference, Vue component props, Appwrite response types, API client typing. Use for \"type error\", \"TS error\", \"not assignable\", \"@ts-ignore\", \"inference\".\n     4→version: 2.0.0\n     5→tags: [typescript, type-safety, errors, debugging, zod, type-inference, no-any, architecture, root-cause]\n     6→---\n     7→\n     8→# TypeScript Fixer\n     9→\n    10→## Philosophy\n    11→\n    12→**Type errors are symptoms, not the disease.**\n    13→\n    14→When you see a type error, it's usually telling you about a deeper issue:\n    15→- Wrong abstraction level\n    16→- Missing validation\n    17→- Incorrect data flow\n    18→- Lost type information\n    19→\n    20→Fix the root cause, not the symptom.\n    21→\n    22→## NEVER DO\n    23→\n    24→❌ **Never use `any`**\n    25→```typescript\n    26→// ❌ WRONG - Hiding the problem\n    27→const data: any = await fetchUser()\n    28→\n    29→// ✅ RIGHT - Fix the actual type\n    30→const data: User = await fetchUser()\n    31→```\n    32→\n    33→❌ **Never use type assertions without understanding**\n    34→```typescript\n    35→// ❌ WRONG - Forcing incorrect type\n    36→const user = data as User  // Why isn't it already User?\n    37→\n    38→// ✅ RIGHT - Validate and parse\n    39→const user = UserSchema.parse(data)  // Zod validates\n    40→```\n    41→\n    42→❌ **Never use @ts-ignore or @ts-expect-error**\n    43→```typescript\n    44→// ❌ WRONG - Ignoring the error\n    45→// @ts-ignore\n    46→const value = user.name\n    47→\n    48→// ✅ RIGHT - Fix the actual issue\n    49→const value = user?.name ?? 'Guest'\n    50→```\n    51→\n    52→❌ **Never disable strict checks**\n    53→```typescript\n    54→// ❌ WRONG in tsconfig.json\n    55→{\n    56→  \"strict\": false,\n    57→  \"strictNullChecks\": false\n    58→}\n    59→\n    60→// ✅ RIGHT - Keep strict mode\n    61→{\n    62→  \"strict\": true\n    63→}\n    64→```\n    65→\n    66→## Systematic Approach\n    67→\n    68→### Step 1: Read Error Completely\n    69→\n    70→```\n    71→Example error:\n    72→Type 'string | undefined' is not assignable to type 'string'.\n    73→  Type 'undefined' is not assignable to type 'string'.\n    74→```\n    75→\n    76→**Understand what it's saying:**\n    77→- Expected: `string` (always has a value)\n    78→- Received: `string | undefined` (might not have a value)\n    79→- Problem: Code doesn't handle the `undefined` case\n    80→\n    81→### Step 2: Find Type Definition\n    82→\n    83→Trace back to where the type is defined:\n    84→\n    85→```typescript\n    86→// Where does this type come from?\n    87→const name: string = user.name\n    88→//                   ^^^^^^^^^\n    89→//                   What is user.name's type?\n    90→\n    91→// Find the definition\n    92→interface User {\n    93→  name?: string  // ← Optional! Can be undefined\n    94→}\n    95→```\n    96→\n    97→### Step 3: Trace Call Chain\n    98→\n    99→Follow the data flow:\n   100→\n   101→```typescript\n   102→// 1. Source\n   103→const response = await fetch('/api/user')\n   104→\n   105→// 2. Parse\n   106→const data = await response.json()  // Type: any\n   107→\n   108→// 3. Use\n   109→const user: User = data  // ← Type lost here\n   110→const name: string = user.name  // ← Error here\n   111→```\n   112→\n   113→### Step 4: Fix at Source\n   114→\n   115→Fix where the type is wrong, not where the error appears:\n   116→\n   117→```typescript\n   118→// ❌ WRONG - Fix at error location\n   119→const name: string = user.name ?? 'Guest'\n   120→// Still have User with optional name everywhere\n   121→\n   122→// ✅ RIGHT - Fix at source\n   123→const UserSchema = z.object({\n   124→  name: z.string()  // Required, not optional\n   125→})\n   126→\n   127→const response = await fetch('/api/user')\n   128→const data = await response.json()\n   129→const user = UserSchema.parse(data)  // ← Type guaranteed here\n   130→const name: string = user.name  // ← No error\n   131→```\n   132→\n   133→## Common Patterns (Your Stack)\n   134→\n   135→### Zod Schema → TypeScript Type\n   136→\n   137→```typescript\n   138→// ✅ CORRECT - Zod is source of truth\n   139→const UserSchema = z.object({\n   140→  name: z.string(),\n   141→  email: z.string().email(),\n   142→  age: z.number().optional()\n   143→})\n   144→\n   145→type User = z.infer<typeof UserSchema>\n   146→//          ^^^^^ Inferred from schema\n   147→\n   148→// ❌ WRONG - Separate type and schema\n   149→type User = {\n   150→  name: string\n   151→  email: string\n   152→  age?: number\n   153→}\n   154→const UserSchema = z.object({...})  // Can get out of sync\n   155→```\n   156→\n   157→### Appwrite Response Types\n   158→\n   159→```typescript\n   160→import { Models } from 'appwrite'\n   161→\n   162→// ✅ CORRECT - Use SDK types + validate\n   163→const doc: Models.Document = await databases.getDocument(...)\n   164→const user = UserSchema.parse(doc)  // Validate + get typed\n   165→//           ^^^^^ Now type-safe User\n   166→\n   167→// ❌ WRONG - Trust Appwrite response directly\n   168→const user = await databases.getDocument(...)  // Type: any\n   169→```\n   170→\n   171→### Vue Component Props\n   172→\n   173→```typescript\n   174→// ✅ CORRECT - Zod schema for props\n   175→const propsSchema = z.object({\n   176→  user: UserSchema,\n   177→  optional: z.string().optional(),\n   178→  withDefault: z.string().default('default')\n   179→})\n   180→\n   181→const props = defineProps<z.infer<typeof propsSchema>>()\n   182→\n   183→// ❌ WRONG - Just TypeScript interface\n   184→interface Props {\n   185→  user: User\n   186→  optional?: string\n   187→  withDefault?: string\n   188→}\n   189→const props = defineProps<Props>()  // No runtime validation\n   190→```\n   191→\n   192→### Handling Optional/Nullable\n   193→\n   194→```typescript\n   195→// When value might be undefined/null:\n   196→\n   197→// ✅ CORRECT - Optional chaining + nullish coalescing\n   198→const name = user?.name ?? 'Guest'\n   199→const email = user?.email ?? 'no-email@example.com'\n   200→\n   201→// ✅ CORRECT - Type guard\n   202→if (user && user.name) {\n   203→  // TypeScript knows user.name is string here\n   204→  console.log(user.name.toUpperCase())\n   205→}\n   206→\n   207→// ✅ CORRECT - Early return\n   208→if (!user || !user.name) {\n   209→  return 'Guest'\n   210→}\n   211→// TypeScript knows user.name is string here\n   212→return user.name\n   213→\n   214→// ❌ WRONG - Force with !\n   215→const name = user.name!  // Might crash at runtime\n   216→\n   217→// ❌ WRONG - Type assertion\n   218→const name = user.name as string  // Lying to TypeScript\n   219→```\n   220→\n   221→## Error Categories & Fixes\n   222→\n   223→### Category 1: Missing Property\n   224→\n   225→```\n   226→Error: Property 'name' does not exist on type 'User'\n   227→```\n   228→\n   229→**Cause:** Type definition doesn't have property\n   230→**Fix:** Add property to type/schema\n   231→\n   232→```typescript\n   233→// ✅ FIX\n   234→const UserSchema = z.object({\n   235→  name: z.string(),  // ← Add missing property\n   236→  email: z.string()\n   237→})\n   238→```\n   239→\n   240→### Category 2: Undefined/Null Not Handled\n   241→\n   242→```\n   243→Error: Object is possibly 'undefined'\n   244→Error: Object is possibly 'null'\n   245→```\n   246→\n   247→**Cause:** Value might not exist\n   248→**Fix:** Handle undefined/null case\n   249→\n   250→```typescript\n   251→// ✅ FIX - Optional chaining\n   252→const name = user?.name\n   253→\n   254→// ✅ FIX - Nullish coalescing\n   255→const name = user?.name ?? 'Guest'\n   256→\n   257→// ✅ FIX - Type guard\n   258→if (user && user.name) {\n   259→  // use user.name\n   260→}\n   261→```\n   262→\n   263→### Category 3: Wrong Type Inferred\n   264→\n   265→```\n   266→Error: Type 'string' is not assignable to type 'number'\n   267→```\n   268→\n   269→**Cause:** TypeScript inferred wrong type\n   270→**Fix:** Provide correct type annotation\n   271→\n   272→```typescript\n   273→// ❌ WRONG - TypeScript infers string\n   274→const age = \"25\"  // Type: string\n   275→\n   276→// ✅ FIX - Parse to number\n   277→const age = parseInt(\"25\")  // Type: number\n   278→\n   279→// ✅ FIX - Type annotation\n   280→const age: number = parseInt(\"25\")\n   281→```\n   282→\n   283→### Category 4: Union Type Not Narrowed\n   284→\n   285→```\n   286→Error: Property 'x' does not exist on type 'A | B'\n   287→```\n   288→\n   289→**Cause:** TypeScript doesn't know which type\n   290→**Fix:** Narrow the type\n   291→\n   292→```typescript\n   293→type Response = SuccessResponse | ErrorResponse\n   294→\n   295→// ❌ WRONG - Doesn't narrow\n   296→if (response.success) {  // Error: Property 'success' doesn't exist\n   297→  ...\n   298→}\n   299→\n   300→// ✅ FIX - Type guard\n   301→function isSuccess(r: Response): r is SuccessResponse {\n   302→  return 'data' in r\n   303→}\n   304→\n   305→if (isSuccess(response)) {\n   306→  // TypeScript knows it's SuccessResponse\n   307→  console.log(response.data)\n   308→}\n   309→\n   310→// ✅ FIX - Discriminated union\n   311→type Response =\n   312→  | { type: 'success', data: string }\n   313→  | { type: 'error', message: string }\n   314→\n   315→if (response.type === 'success') {\n   316→  // TypeScript knows it has 'data'\n   317→  console.log(response.data)\n   318→}\n   319→```\n   320→\n   321→### Category 5: Generic Type Lost\n   322→\n   323→```\n   324→Error: Argument of type 'unknown' is not assignable to parameter of type 'User'\n   325→```\n   326→\n   327→**Cause:** Generic type information lost\n   328→**Fix:** Preserve generic through chain\n   329→\n   330→```typescript\n   331→// ❌ WRONG - Type lost\n   332→async function fetchData(url: string) {\n   333→  const response = await fetch(url)\n   334→  return response.json()  // Type: any\n   335→}\n   336→\n   337→// ✅ FIX - Generic type preserved\n   338→async function fetchData<T>(url: string, schema: z.ZodType<T>): Promise<T> {\n   339→  const response = await fetch(url)\n   340→  const data = await response.json()\n   341→  return schema.parse(data)  // Type: T\n   342→}\n   343→\n   344→const user = await fetchData('/api/user', UserSchema)\n   345→// user is type User\n   346→```\n   347→\n   348→## Debugging Workflow\n   349→\n   350→### 1. Reproduce Error\n   351→- Open file with error\n   352→- Read full error message\n   353→- Note line number and exact error\n   354→\n   355→### 2. Understand Current State\n   356→```typescript\n   357→// Add type checks\n   358→console.log('Type of user:', typeof user)\n   359→console.log('User value:', user)\n   360→\n   361→// Check what TypeScript thinks\n   362→type UserType = typeof user\n   363→//   ^? Hover to see inferred type\n   364→```\n   365→\n   366→### 3. Trace to Source\n   367→- Where is this value created?\n   368→- What's its type at source?\n   369→- Where does type information get lost?\n   370→\n   371→### 4. Identify Root Cause\n   372→- Is type wrong at source?\n   373→- Is validation missing?\n   374→- Is optional/null not handled?\n   375→- Is generic type lost?\n   376→\n   377→### 5. Apply Fix at Source\n   378→- Don't fix at error location\n   379→- Fix where type is wrong\n   380→- Ensure type flows correctly\n   381→\n   382→### 6. Verify Fix\n   383→```bash\n   384→# Run type check\n   385→npm run typecheck\n   386→\n   387→# Should show no errors\n   388→```\n   389→\n   390→## TypeScript Configuration\n   391→\n   392→Your `tsconfig.json` should have:\n   393→\n   394→```json\n   395→{\n   396→  \"compilerOptions\": {\n   397→    \"strict\": true,                    // ✅ Enable all strict checks\n   398→    \"strictNullChecks\": true,          // ✅ Catch null/undefined\n   399→    \"strictFunctionTypes\": true,       // ✅ Function type safety\n   400→    \"strictBindCallApply\": true,       // ✅ Bind/call/apply safety\n   401→    \"strictPropertyInitialization\": true, // ✅ Class property init\n   402→    \"noImplicitAny\": true,             // ✅ No implicit any\n   403→    \"noImplicitThis\": true,            // ✅ No implicit this\n   404→    \"alwaysStrict\": true,              // ✅ Use strict mode\n   405→\n   406→    \"noUnusedLocals\": true,            // ✅ Catch unused variables\n   407→    \"noUnusedParameters\": true,        // ✅ Catch unused parameters\n   408→    \"noImplicitReturns\": true,         // ✅ All code paths return\n   409→    \"noFallthroughCasesInSwitch\": true // ✅ No fallthrough cases\n   410→  }\n   411→}\n   412→```\n   413→\n   414→## Checklist When Fixing Types\n   415→\n   416→- [ ] Read full error message\n   417→- [ ] Trace type to its source\n   418→- [ ] Understand why type is wrong\n   419→- [ ] Fix at source, not at error location\n   420→- [ ] Never use `any`, `as`, or `@ts-ignore`\n   421→- [ ] Validate data with Zod when parsing\n   422→- [ ] Handle optional/null cases properly\n   423→- [ ] Run typecheck to verify fix\n   424→- [ ] Check related code for same issue\n   425→\n   426→## Further Reading\n   427→\n   428→See supporting files:\n   429→- [zod-patterns.md] - Zod validation patterns\n   430→- [common-fixes.md] - Common error solutions\n   431→- [appwrite-types.md] - Appwrite-specific types\n   432→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"c2757771-48b7-406d-9485-a27f916b0d7e","timestamp":"2025-10-30T05:56:25.470Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/natedamstra/.claude/skills/typescript-fixer/SKILL.md","content":"---\nname: TypeScript Fixer\ndescription: Fix TypeScript errors by tracing root cause, never using 'any' or assertions as shortcuts. Use when encountering type errors in .ts/.tsx files, component props validation, Zod schema mismatches, Appwrite type inference failures. CRITICAL PHILOSOPHY: Type errors indicate architectural issues, not just syntax problems. Fix source types (Zod schemas, API responses, component interfaces). Handles common patterns: Zod type inference, Vue component props, Appwrite response types, API client typing. Use for \"type error\", \"TS error\", \"not assignable\", \"@ts-ignore\", \"inference\".\nversion: 2.0.0\ntags: [typescript, type-safety, errors, debugging, zod, type-inference, no-any, architecture, root-cause]\n---\n\n# TypeScript Fixer\n\n## Philosophy\n\n**Type errors are symptoms, not the disease.**\n\nWhen you see a type error, it's usually telling you about a deeper issue:\n- Wrong abstraction level\n- Missing validation\n- Incorrect data flow\n- Lost type information\n\nFix the root cause, not the symptom.\n\n## NEVER DO\n\n❌ **Never use `any`**\n```typescript\n// ❌ WRONG - Hiding the problem\nconst data: any = await fetchUser()\n\n// ✅ RIGHT - Fix the actual type\nconst data: User = await fetchUser()\n```\n\n❌ **Never use type assertions without understanding**\n```typescript\n// ❌ WRONG - Forcing incorrect type\nconst user = data as User  // Why isn't it already User?\n\n// ✅ RIGHT - Validate and parse\nconst user = UserSchema.parse(data)  // Zod validates\n```\n\n❌ **Never use @ts-ignore or @ts-expect-error**\n```typescript\n// ❌ WRONG - Ignoring the error\n// @ts-ignore\nconst value = user.name\n\n// ✅ RIGHT - Fix the actual issue\nconst value = user?.name ?? 'Guest'\n```\n\n❌ **Never disable strict checks**\n```typescript\n// ❌ WRONG in tsconfig.json\n{\n  \"strict\": false,\n  \"strictNullChecks\": false\n}\n\n// ✅ RIGHT - Keep strict mode\n{\n  \"strict\": true\n}\n```\n\n## Systematic Approach\n\n### Step 1: Read Error Completely\n\n```\nExample error:\nType 'string | undefined' is not assignable to type 'string'.\n  Type 'undefined' is not assignable to type 'string'.\n```\n\n**Understand what it's saying:**\n- Expected: `string` (always has a value)\n- Received: `string | undefined` (might not have a value)\n- Problem: Code doesn't handle the `undefined` case\n\n### Step 2: Find Type Definition\n\nTrace back to where the type is defined:\n\n```typescript\n// Where does this type come from?\nconst name: string = user.name\n//                   ^^^^^^^^^\n//                   What is user.name's type?\n\n// Find the definition\ninterface User {\n  name?: string  // ← Optional! Can be undefined\n}\n```\n\n### Step 3: Trace Call Chain\n\nFollow the data flow:\n\n```typescript\n// 1. Source\nconst response = await fetch('/api/user')\n\n// 2. Parse\nconst data = await response.json()  // Type: any\n\n// 3. Use\nconst user: User = data  // ← Type lost here\nconst name: string = user.name  // ← Error here\n```\n\n### Step 4: Fix at Source\n\nFix where the type is wrong, not where the error appears:\n\n```typescript\n// ❌ WRONG - Fix at error location\nconst name: string = user.name ?? 'Guest'\n// Still have User with optional name everywhere\n\n// ✅ RIGHT - Fix at source\nconst UserSchema = z.object({\n  name: z.string()  // Required, not optional\n})\n\nconst response = await fetch('/api/user')\nconst data = await response.json()\nconst user = UserSchema.parse(data)  // ← Type guaranteed here\nconst name: string = user.name  // ← No error\n```\n\n## Common Patterns (Your Stack)\n\n### Zod Schema → TypeScript Type\n\n```typescript\n// ✅ CORRECT - Zod is source of truth\nconst UserSchema = z.object({\n  name: z.string(),\n  email: z.string().email(),\n  age: z.number().optional()\n})\n\ntype User = z.infer<typeof UserSchema>\n//          ^^^^^ Inferred from schema\n\n// ❌ WRONG - Separate type and schema\ntype User = {\n  name: string\n  email: string\n  age?: number\n}\nconst UserSchema = z.object({...})  // Can get out of sync\n```\n\n### Appwrite Response Types\n\n```typescript\nimport { Models } from 'appwrite'\n\n// ✅ CORRECT - Use SDK types + validate\nconst doc: Models.Document = await databases.getDocument(...)\nconst user = UserSchema.parse(doc)  // Validate + get typed\n//           ^^^^^ Now type-safe User\n\n// ❌ WRONG - Trust Appwrite response directly\nconst user = await databases.getDocument(...)  // Type: any\n```\n\n### Vue Component Props\n\n```typescript\n// ✅ CORRECT - Zod schema for props\nconst propsSchema = z.object({\n  user: UserSchema,\n  optional: z.string().optional(),\n  withDefault: z.string().default('default')\n})\n\nconst props = defineProps<z.infer<typeof propsSchema>>()\n\n// ❌ WRONG - Just TypeScript interface\ninterface Props {\n  user: User\n  optional?: string\n  withDefault?: string\n}\nconst props = defineProps<Props>()  // No runtime validation\n```\n\n### Handling Optional/Nullable\n\n```typescript\n// When value might be undefined/null:\n\n// ✅ CORRECT - Optional chaining + nullish coalescing\nconst name = user?.name ?? 'Guest'\nconst email = user?.email ?? 'no-email@example.com'\n\n// ✅ CORRECT - Type guard\nif (user && user.name) {\n  // TypeScript knows user.name is string here\n  console.log(user.name.toUpperCase())\n}\n\n// ✅ CORRECT - Early return\nif (!user || !user.name) {\n  return 'Guest'\n}\n// TypeScript knows user.name is string here\nreturn user.name\n\n// ❌ WRONG - Force with !\nconst name = user.name!  // Might crash at runtime\n\n// ❌ WRONG - Type assertion\nconst name = user.name as string  // Lying to TypeScript\n```\n\n## Error Categories & Fixes\n\n### Category 1: Missing Property\n\n```\nError: Property 'name' does not exist on type 'User'\n```\n\n**Cause:** Type definition doesn't have property\n**Fix:** Add property to type/schema\n\n```typescript\n// ✅ FIX\nconst UserSchema = z.object({\n  name: z.string(),  // ← Add missing property\n  email: z.string()\n})\n```\n\n### Category 2: Undefined/Null Not Handled\n\n```\nError: Object is possibly 'undefined'\nError: Object is possibly 'null'\n```\n\n**Cause:** Value might not exist\n**Fix:** Handle undefined/null case\n\n```typescript\n// ✅ FIX - Optional chaining\nconst name = user?.name\n\n// ✅ FIX - Nullish coalescing\nconst name = user?.name ?? 'Guest'\n\n// ✅ FIX - Type guard\nif (user && user.name) {\n  // use user.name\n}\n```\n\n### Category 3: Wrong Type Inferred\n\n```\nError: Type 'string' is not assignable to type 'number'\n```\n\n**Cause:** TypeScript inferred wrong type\n**Fix:** Provide correct type annotation\n\n```typescript\n// ❌ WRONG - TypeScript infers string\nconst age = \"25\"  // Type: string\n\n// ✅ FIX - Parse to number\nconst age = parseInt(\"25\")  // Type: number\n\n// ✅ FIX - Type annotation\nconst age: number = parseInt(\"25\")\n```\n\n### Category 4: Union Type Not Narrowed\n\n```\nError: Property 'x' does not exist on type 'A | B'\n```\n\n**Cause:** TypeScript doesn't know which type\n**Fix:** Narrow the type\n\n```typescript\ntype Response = SuccessResponse | ErrorResponse\n\n// ❌ WRONG - Doesn't narrow\nif (response.success) {  // Error: Property 'success' doesn't exist\n  ...\n}\n\n// ✅ FIX - Type guard\nfunction isSuccess(r: Response): r is SuccessResponse {\n  return 'data' in r\n}\n\nif (isSuccess(response)) {\n  // TypeScript knows it's SuccessResponse\n  console.log(response.data)\n}\n\n// ✅ FIX - Discriminated union\ntype Response =\n  | { type: 'success', data: string }\n  | { type: 'error', message: string }\n\nif (response.type === 'success') {\n  // TypeScript knows it has 'data'\n  console.log(response.data)\n}\n```\n\n### Category 5: Generic Type Lost\n\n```\nError: Argument of type 'unknown' is not assignable to parameter of type 'User'\n```\n\n**Cause:** Generic type information lost\n**Fix:** Preserve generic through chain\n\n```typescript\n// ❌ WRONG - Type lost\nasync function fetchData(url: string) {\n  const response = await fetch(url)\n  return response.json()  // Type: any\n}\n\n// ✅ FIX - Generic type preserved\nasync function fetchData<T>(url: string, schema: z.ZodType<T>): Promise<T> {\n  const response = await fetch(url)\n  const data = await response.json()\n  return schema.parse(data)  // Type: T\n}\n\nconst user = await fetchData('/api/user', UserSchema)\n// user is type User\n```\n\n## Debugging Workflow\n\n### 1. Reproduce Error\n- Open file with error\n- Read full error message\n- Note line number and exact error\n\n### 2. Understand Current State\n```typescript\n// Add type checks\nconsole.log('Type of user:', typeof user)\nconsole.log('User value:', user)\n\n// Check what TypeScript thinks\ntype UserType = typeof user\n//   ^? Hover to see inferred type\n```\n\n### 3. Trace to Source\n- Where is this value created?\n- What's its type at source?\n- Where does type information get lost?\n\n### 4. Identify Root Cause\n- Is type wrong at source?\n- Is validation missing?\n- Is optional/null not handled?\n- Is generic type lost?\n\n### 5. Apply Fix at Source\n- Don't fix at error location\n- Fix where type is wrong\n- Ensure type flows correctly\n\n### 6. Verify Fix\n```bash\n# Run type check\nnpm run typecheck\n\n# Should show no errors\n```\n\n## TypeScript Configuration\n\nYour `tsconfig.json` should have:\n\n```json\n{\n  \"compilerOptions\": {\n    \"strict\": true,                    // ✅ Enable all strict checks\n    \"strictNullChecks\": true,          // ✅ Catch null/undefined\n    \"strictFunctionTypes\": true,       // ✅ Function type safety\n    \"strictBindCallApply\": true,       // ✅ Bind/call/apply safety\n    \"strictPropertyInitialization\": true, // ✅ Class property init\n    \"noImplicitAny\": true,             // ✅ No implicit any\n    \"noImplicitThis\": true,            // ✅ No implicit this\n    \"alwaysStrict\": true,              // ✅ Use strict mode\n\n    \"noUnusedLocals\": true,            // ✅ Catch unused variables\n    \"noUnusedParameters\": true,        // ✅ Catch unused parameters\n    \"noImplicitReturns\": true,         // ✅ All code paths return\n    \"noFallthroughCasesInSwitch\": true // ✅ No fallthrough cases\n  }\n}\n```\n\n## Checklist When Fixing Types\n\n- [ ] Read full error message\n- [ ] Trace type to its source\n- [ ] Understand why type is wrong\n- [ ] Fix at source, not at error location\n- [ ] Never use `any`, `as`, or `@ts-ignore`\n- [ ] Validate data with Zod when parsing\n- [ ] Handle optional/null cases properly\n- [ ] Run typecheck to verify fix\n- [ ] Check related code for same issue\n\n## Further Reading\n\nSee supporting files:\n- [zod-patterns.md] - Zod validation patterns\n- [common-fixes.md] - Common error solutions\n- [appwrite-types.md] - Appwrite-specific types\n","numLines":432,"startLine":1,"totalLines":432}}}
{"parentUuid":"c2757771-48b7-406d-9485-a27f916b0d7e","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01HJeTS72gFan2ndCBdrfEcb","type":"tool_result","content":"     1→---\n     2→name: Vue 3 Component Builder\n     3→description: Build Vue 3 components using Composition API, script setup syntax, TypeScript strict mode, and Tailwind CSS. Use when creating/modifying .vue SFCs, building form components, modals with Teleport, or integrating third-party libraries (HeadlessUI, Iconify, ECharts). CRITICAL RULES enforced: Tailwind preferred, always dark: mode classes, useMounted for SSR safety, TypeScript prop validation with withDefaults, ARIA labels for accessibility. Prevents common mistakes (missing dark mode, SSR hydration errors, inaccessible components). Use for \".vue\", \"component\", \"modal\", \"form\", \"icon\", \"chart\".\n     4→version: 3.0.0\n     5→tags: [vue3, script-setup, composition-api, typescript, tailwind, dark-mode, ssr, accessibility, modals, forms, defineModel, headlessui, iconify]\n     6→---\n     7→\n     8→# Vue 3 Component Builder\n     9→\n    10→## Core Patterns (User's Projects)\n    11→\n    12→### CRITICAL RULES (NEVER BREAK)\n    13→1. ⚠️ **PREFER** Tailwind CSS classes (scoped styles ONLY for transitions/animations)\n    14→2. ❌ **NEVER** use inline styles\n    15→3. ✅ **ALWAYS** include `dark:` prefix for all color classes\n    16→4. ✅ **ALWAYS** use `useMounted()` for client-only code (SSR safety)\n    17→5. ✅ **ALWAYS** use TypeScript with `withDefaults()` for props\n    18→6. ✅ **ALWAYS** use `defineModel()` for v-model bindings (Vue 3.4+)\n    19→7. ✅ **ALWAYS** add ARIA labels to interactive elements\n    20→8. ✅ **ALWAYS** check for existing components before creating new ones\n    21→\n    22→### Tech Stack\n    23→- **Vue 3.4+** Composition API with `<script setup lang=\"ts\">`\n    24→- **TypeScript** Strict mode with interface-based props\n    25→- **Tailwind CSS** Primary styling method (utilities only)\n    26→- **VueUse** For common utilities (useMounted, onClickOutside, etc.)\n    27→- **HeadlessUI** For accessible components (Dialog, Popover, etc.)\n    28→- **Iconify** For all icons (`@iconify/vue`)\n    29→- **Floating UI** For popovers/tooltips (`@floating-ui/vue`)\n    30→- **ECharts** For charts (`vue-echarts`)\n    31→\n    32→## Base Component Template\n    33→\n    34→```vue\n    35→<script setup lang=\"ts\">\n    36→import { ref, computed } from 'vue'\n    37→import { useMounted } from '@vueuse/core'\n    38→\n    39→// Props with TypeScript interface (STANDARD PATTERN)\n    40→const props = withDefaults(\n    41→  defineProps<{\n    42→    title: string\n    43→    variant?: 'primary' | 'secondary'\n    44→    disabled?: boolean\n    45→  }>(),\n    46→  {\n    47→    variant: 'primary',\n    48→    disabled: false\n    49→  }\n    50→)\n    51→\n    52→// Emits (typed)\n    53→const emit = defineEmits<{\n    54→  (e: 'click'): void\n    55→  (e: 'change', value: string): void\n    56→}>()\n    57→\n    58→// SSR-safe mounting\n    59→const mounted = useMounted()\n    60→\n    61→// Reactive state\n    62→const isActive = ref(false)\n    63→\n    64→// Computed properties\n    65→const buttonClasses = computed(() => {\n    66→  const base = 'px-4 py-2 rounded-lg transition-colors font-medium'\n    67→  const variants = {\n    68→    primary: 'bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600',\n    69→    secondary: 'bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600'\n    70→  }\n    71→  const disabled = props.disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'\n    72→  return `${base} ${variants[props.variant]} ${disabled}`\n    73→})\n    74→\n    75→// Methods\n    76→function handleClick() {\n    77→  if (!props.disabled) {\n    78→    emit('click')\n    79→  }\n    80→}\n    81→</script>\n    82→\n    83→<template>\n    84→  <div v-if=\"mounted\">\n    85→    <button\n    86→      :class=\"buttonClasses\"\n    87→      class=\"text-white dark:text-gray-100\"\n    88→      @click=\"handleClick\"\n    89→      :disabled=\"props.disabled\"\n    90→      role=\"button\"\n    91→      :aria-label=\"props.title\"\n    92→      :aria-disabled=\"props.disabled\"\n    93→    >\n    94→      {{ props.title }}\n    95→    </button>\n    96→  </div>\n    97→</template>\n    98→```\n    99→\n   100→### Modern v-model Pattern (Vue 3.4+)\n   101→\n   102→Use `defineModel()` for reactive two-way binding:\n   103→\n   104→```vue\n   105→<script setup lang=\"ts\">\n   106→import { computed } from 'vue'\n   107→\n   108→// Simple v-model\n   109→const modelValue = defineModel<string>({ default: '' })\n   110→\n   111→// Named v-model with required\n   112→const open = defineModel<boolean>('open', { required: true })\n   113→\n   114→// Multiple v-models\n   115→const search = defineModel<string>('search', { default: '' })\n   116→const selected = defineModel<string[]>('selected', { default: () => [] })\n   117→\n   118→// Computed wrapper for transformation\n   119→const lowercaseValue = computed({\n   120→  get: () => modelValue.value.toLowerCase(),\n   121→  set: (val) => { modelValue.value = val }\n   122→})\n   123→</script>\n   124→\n   125→<template>\n   126→  <!-- Direct usage (no .value needed in templates) -->\n   127→  <input v-model=\"modelValue\" />\n   128→\n   129→  <!-- Or use computed wrapper -->\n   130→  <input v-model=\"lowercaseValue\" />\n   131→</template>\n   132→```\n   133→\n   134→**Why defineModel():**\n   135→- Simpler than `props + emit('update:modelValue')`\n   136→- Auto-generates proper TypeScript types\n   137→- Standard in Vue 3.4+ (modern pattern)\n   138→- Used in 100+ components in this codebase\n   139→\n   140→## Common Patterns\n   141→\n   142→### SSR-Safe Patterns\n   143→\n   144→**Pattern 1: useMounted for Conditional Rendering**\n   145→```vue\n   146→<script setup lang=\"ts\">\n   147→import { useMounted } from '@vueuse/core'\n   148→import { ref, watch } from 'vue'\n   149→\n   150→const mounted = useMounted()\n   151→const theme = ref('light')\n   152→\n   153→// CORRECT: Access browser APIs after mount\n   154→watch(mounted, (isMounted) => {\n   155→  if (isMounted) {\n   156→    // Safe to access localStorage\n   157→    theme.value = localStorage.getItem('theme') ?? 'light'\n   158→  }\n   159→})\n   160→\n   161→// INCORRECT: ❌ Direct access\n   162→// const theme = localStorage.getItem('theme') // Crashes on SSR\n   163→</script>\n   164→\n   165→<template>\n   166→  <!-- Pattern A: Conditional content -->\n   167→  <div v-if=\"mounted\">\n   168→    <Icon icon=\"mdi:home\" /> <!-- Safe: Icon only renders client-side -->\n   169→  </div>\n   170→\n   171→  <!-- Pattern B: Wrap entire component -->\n   172→  <template v-if=\"mounted\">\n   173→    <!-- All client-only content -->\n   174→  </template>\n   175→</template>\n   176→```\n   177→\n   178→**Pattern 2: useSupported for Feature Detection**\n   179→```vue\n   180→<script setup lang=\"ts\">\n   181→import { useSupported } from '@vueuse/core'\n   182→\n   183→// Returns false on server, true/false on client\n   184→const isGeolocationSupported = useSupported(() => 'geolocation' in navigator)\n   185→const isWebGLSupported = useSupported(() => 'WebGLRenderingContext' in window)\n   186→</script>\n   187→\n   188→<template>\n   189→  <div v-if=\"isGeolocationSupported\">\n   190→    <!-- Show map component -->\n   191→  </div>\n   192→  <div v-else>\n   193→    Geolocation not supported\n   194→  </div>\n   195→</template>\n   196→```\n   197→\n   198→**Pattern 3: SSR-Safe Initialization**\n   199→```vue\n   200→<script setup lang=\"ts\">\n   201→import { ref, onMounted } from 'vue'\n   202→\n   203→const data = ref<string | null>(null)\n   204→\n   205→// CORRECT: Initialize in onMounted\n   206→onMounted(() => {\n   207→  data.value = localStorage.getItem('key')\n   208→})\n   209→\n   210→// INCORRECT: ❌ Direct initialization\n   211→// const data = ref(localStorage.getItem('key')) // Crashes on SSR\n   212→</script>\n   213→```\n   214→\n   215→### Form Validation Pattern\n   216→\n   217→For form validation, use Zod schemas in API routes and composables (not in component props). Components handle UI validation:\n   218→\n   219→```vue\n   220→<script setup lang=\"ts\">\n   221→import { ref, computed } from 'vue'\n   222→\n   223→// Form state\n   224→const email = defineModel<string>('email', { default: '' })\n   225→const password = defineModel<string>('password', { default: '' })\n   226→\n   227→// Validation errors\n   228→const emailError = ref<string | null>(null)\n   229→const passwordError = ref<string | null>(null)\n   230→\n   231→// Custom validation functions\n   232→function validateEmail(): boolean {\n   233→  if (!email.value) {\n   234→    emailError.value = 'Email is required'\n   235→    return false\n   236→  }\n   237→  if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email.value)) {\n   238→    emailError.value = 'Invalid email address'\n   239→    return false\n   240→  }\n   241→  emailError.value = null\n   242→  return true\n   243→}\n   244→\n   245→function validatePassword(): boolean {\n   246→  if (!password.value) {\n   247→    passwordError.value = 'Password is required'\n   248→    return false\n   249→  }\n   250→  if (password.value.length < 8) {\n   251→    passwordError.value = 'Password must be at least 8 characters'\n   252→    return false\n   253→  }\n   254→  passwordError.value = null\n   255→  return true\n   256→}\n   257→\n   258→const isValid = computed(() => {\n   259→  return email.value && password.value && !emailError.value && !passwordError.value\n   260→})\n   261→\n   262→async function handleSubmit() {\n   263→  const emailValid = validateEmail()\n   264→  const passwordValid = validatePassword()\n   265→\n   266→  if (emailValid && passwordValid) {\n   267→    // Submit to API (Zod validation happens on server)\n   268→    await submitForm({ email: email.value, password: password.value })\n   269→  }\n   270→}\n   271→</script>\n   272→\n   273→<template>\n   274→  <form @submit.prevent=\"handleSubmit\" class=\"space-y-4\">\n   275→    <div>\n   276→      <label\n   277→        for=\"email\"\n   278→        class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n   279→      >\n   280→        Email\n   281→      </label>\n   282→      <input\n   283→        id=\"email\"\n   284→        v-model=\"email\"\n   285→        type=\"email\"\n   286→        @blur=\"validateEmail\"\n   287→        class=\"w-full px-4 py-2 border rounded-lg dark:bg-gray-800 dark:border-gray-600 dark:text-white\"\n   288→        :class=\"{\n   289→          'border-red-500 dark:border-red-400': emailError,\n   290→          'border-gray-300 dark:border-gray-600': !emailError\n   291→        }\"\n   292→        aria-required=\"true\"\n   293→        :aria-invalid=\"!!emailError\"\n   294→        :aria-describedby=\"emailError ? 'email-error' : undefined\"\n   295→      />\n   296→      <p\n   297→        v-if=\"emailError\"\n   298→        id=\"email-error\"\n   299→        class=\"text-red-500 dark:text-red-400 text-sm mt-1\"\n   300→        role=\"alert\"\n   301→      >\n   302→        {{ emailError }}\n   303→      </p>\n   304→    </div>\n   305→\n   306→    <button\n   307→      type=\"submit\"\n   308→      :disabled=\"!isValid\"\n   309→      class=\"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n   310→      aria-label=\"Submit form\"\n   311→    >\n   312→      Submit\n   313→    </button>\n   314→  </form>\n   315→</template>\n   316→```\n   317→\n   318→**Note:** Zod validation belongs in API routes and composables for runtime data validation, not component props.\n   319→\n   320→### Modal Pattern\n   321→```vue\n   322→<script setup lang=\"ts\">\n   323→import { onClickOutside, onKeyStroke } from '@vueuse/core'\n   324→import { ref } from 'vue'\n   325→\n   326→const props = defineProps<{\n   327→  modelValue: boolean\n   328→  title?: string\n   329→}>()\n   330→\n   331→const emit = defineEmits<{\n   332→  'update:modelValue': [value: boolean]\n   333→}>()\n   334→\n   335→const modalRef = ref<HTMLElement>()\n   336→\n   337→// Close on click outside\n   338→onClickOutside(modalRef, () => {\n   339→  emit('update:modelValue', false)\n   340→})\n   341→\n   342→// Close on escape key\n   343→onKeyStroke('Escape', () => {\n   344→  emit('update:modelValue', false)\n   345→})\n   346→\n   347→function close() {\n   348→  emit('update:modelValue', false)\n   349→}\n   350→</script>\n   351→\n   352→<template>\n   353→  <Teleport to=\"#teleport-layer\" :disabled=\"!mounted\">\n   354→    <Transition\n   355→      enter-active-class=\"transition-opacity duration-200\"\n   356→      enter-from-class=\"opacity-0\"\n   357→      enter-to-class=\"opacity-100\"\n   358→      leave-active-class=\"transition-opacity duration-200\"\n   359→      leave-from-class=\"opacity-100\"\n   360→      leave-to-class=\"opacity-0\"\n   361→    >\n   362→      <div\n   363→        v-if=\"modelValue\"\n   364→        class=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 p-4\"\n   365→        @click.self=\"close\"\n   366→        role=\"dialog\"\n   367→        aria-modal=\"true\"\n   368→        :aria-labelledby=\"title ? 'modal-title' : undefined\"\n   369→      >\n   370→        <div\n   371→          ref=\"modalRef\"\n   372→          class=\"bg-white dark:bg-gray-800 rounded-lg shadow-2xl max-w-md w-full p-6\"\n   373→        >\n   374→          <!-- Header -->\n   375→          <div v-if=\"title\" class=\"flex items-center justify-between mb-4\">\n   376→            <h2\n   377→              id=\"modal-title\"\n   378→              class=\"text-xl font-bold text-gray-900 dark:text-gray-100\"\n   379→            >\n   380→              {{ title }}\n   381→            </h2>\n   382→            <button\n   383→              @click=\"close\"\n   384→              class=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n   385→              aria-label=\"Close modal\"\n   386→            >\n   387→              ✕\n   388→            </button>\n   389→          </div>\n   390→\n   391→          <!-- Content slot -->\n   392→          <div class=\"text-gray-700 dark:text-gray-300\">\n   393→            <slot />\n   394→          </div>\n   395→\n   396→          <!-- Footer slot -->\n   397→          <div v-if=\"$slots.footer\" class=\"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700\">\n   398→            <slot name=\"footer\" :close=\"close\" />\n   399→          </div>\n   400→        </div>\n   401→      </div>\n   402→    </Transition>\n   403→  </Teleport>\n   404→</template>\n   405→```\n   406→\n   407→### Nanostores Integration\n   408→```vue\n   409→<script setup lang=\"ts\">\n   410→import { useStore } from '@nanostores/vue'\n   411→import { $user, userStore } from '@/stores/user'\n   412→import { computed } from 'vue'\n   413→\n   414→// Use store (reactive)\n   415→const user = useStore($user)\n   416→\n   417→// Computed based on store\n   418→const displayName = computed(() => {\n   419→  return user.value?.name ?? 'Guest'\n   420→})\n   421→\n   422→// Store methods\n   423→async function updateProfile(name: string) {\n   424→  if (user.value?.$id) {\n   425→    await userStore.updateProfile(user.value.$id, { name })\n   426→  }\n   427→}\n   428→</script>\n   429→\n   430→<template>\n   431→  <div v-if=\"user\" class=\"p-4 bg-white dark:bg-gray-800 rounded-lg\">\n   432→    <p class=\"text-gray-900 dark:text-gray-100\">\n   433→      Welcome, {{ displayName }}\n   434→    </p>\n   435→    <button\n   436→      @click=\"updateProfile('New Name')\"\n   437→      class=\"mt-2 px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-lg\"\n   438→    >\n   439→      Update Profile\n   440→    </button>\n   441→  </div>\n   442→</template>\n   443→```\n   444→\n   445→## Third-Party Library Integration\n   446→\n   447→This codebase heavily relies on several third-party libraries. **ALWAYS use these patterns** when integrating them.\n   448→\n   449→### Iconify (@iconify/vue) - 256+ Components Use This\n   450→\n   451→**Standard Icon Pattern:**\n   452→```vue\n   453→<script setup lang=\"ts\">\n   454→import { Icon } from '@iconify/vue'\n   455→import { useMounted } from '@vueuse/core'\n   456→\n   457→const mounted = useMounted()\n   458→</script>\n   459→\n   460→<template>\n   461→  <!-- ALWAYS wrap icons in useMounted for SSR safety -->\n   462→  <template v-if=\"mounted\">\n   463→    <Icon icon=\"mdi:home\" class=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\n   464→    <Icon icon=\"mdi:close\" class=\"w-4 h-4\" />\n   465→    <Icon icon=\"heroicons:user-circle-20-solid\" />\n   466→  </template>\n   467→</template>\n   468→```\n   469→\n   470→**Icon Collections Used:**\n   471→- `mdi:*` - Material Design Icons (most common)\n   472→- `heroicons:*` - Heroicons\n   473→- `lucide:*` - Lucide icons\n   474→- `ri:*` - Remix Icon\n   475→\n   476→**Why useMounted Required:** Icon component uses browser APIs that crash during SSR.\n   477→\n   478→---\n   479→\n   480→### HeadlessUI (@headlessui/vue) - 11+ Components\n   481→\n   482→**Accessible Modal Pattern:**\n   483→```vue\n   484→<script setup lang=\"ts\">\n   485→import { Dialog, DialogPanel, DialogTitle, TransitionRoot, TransitionChild } from '@headlessui/vue'\n   486→\n   487→const open = defineModel<boolean>('open', { required: true })\n   488→</script>\n   489→\n   490→<template>\n   491→  <TransitionRoot :show=\"open\" as=\"template\">\n   492→    <Dialog @close=\"open = false\" class=\"relative z-50\">\n   493→      <!-- Backdrop -->\n   494→      <TransitionChild\n   495→        as=\"template\"\n   496→        enter=\"duration-300 ease-out\"\n   497→        enter-from=\"opacity-0\"\n   498→        enter-to=\"opacity-100\"\n   499→        leave=\"duration-200 ease-in\"\n   500→        leave-from=\"opacity-100\"\n   501→        leave-to=\"opacity-0\"\n   502→      >\n   503→        <div class=\"fixed inset-0 bg-black/50 dark:bg-black/70\" />\n   504→      </TransitionChild>\n   505→\n   506→      <!-- Modal Panel -->\n   507→      <div class=\"fixed inset-0 flex items-center justify-center p-4\">\n   508→        <TransitionChild\n   509→          as=\"template\"\n   510→          enter=\"duration-300 ease-out\"\n   511→          enter-from=\"opacity-0 scale-95\"\n   512→          enter-to=\"opacity-100 scale-100\"\n   513→          leave=\"duration-200 ease-in\"\n   514→          leave-from=\"opacity-100 scale-100\"\n   515→          leave-to=\"opacity-0 scale-95\"\n   516→        >\n   517→          <DialogPanel class=\"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg p-6 shadow-xl\">\n   518→            <DialogTitle class=\"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4\">\n   519→              Modal Title\n   520→            </DialogTitle>\n   521→\n   522→            <div class=\"text-gray-700 dark:text-gray-300\">\n   523→              <!-- Modal content -->\n   524→            </div>\n   525→\n   526→            <div class=\"mt-6 flex justify-end space-x-3\">\n   527→              <button\n   528→                @click=\"open = false\"\n   529→                class=\"px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded-lg\"\n   530→              >\n   531→                Cancel\n   532→              </button>\n   533→              <button\n   534→                class=\"px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-lg\"\n   535→              >\n   536→                Confirm\n   537→              </button>\n   538→            </div>\n   539→          </DialogPanel>\n   540→        </TransitionChild>\n   541→      </div>\n   542→    </Dialog>\n   543→  </TransitionRoot>\n   544→</template>\n   545→```\n   546→\n   547→**Why HeadlessUI:**\n   548→- Accessible by default (ARIA attributes built-in)\n   549→- Keyboard navigation handled automatically\n   550→- Focus management included\n   551→- Screen reader compatible\n   552→- Unstyled (use Tailwind for styling)\n   553→\n   554→---\n   555→\n   556→### Floating UI (@floating-ui/vue) - 14+ Components\n   557→\n   558→**Dropdown/Popover Positioning:**\n   559→```vue\n   560→<script setup lang=\"ts\">\n   561→import { useFloating, offset, flip, shift } from '@floating-ui/vue'\n   562→import { ref } from 'vue'\n   563→\n   564→const referenceRef = ref<HTMLElement>()\n   565→const floatingRef = ref<HTMLElement>()\n   566→\n   567→const { floatingStyles } = useFloating(referenceRef, floatingRef, {\n   568→  placement: 'bottom-start',\n   569→  middleware: [\n   570→    offset(8), // 8px offset from trigger\n   571→    flip(), // Flip if not enough space\n   572→    shift({ padding: 8 }) // Shift to stay in viewport\n   573→  ]\n   574→})\n   575→\n   576→const isOpen = ref(false)\n   577→</script>\n   578→\n   579→<template>\n   580→  <div>\n   581→    <!-- Trigger -->\n   582→    <button\n   583→      ref=\"referenceRef\"\n   584→      @click=\"isOpen = !isOpen\"\n   585→      class=\"px-4 py-2 bg-blue-600 text-white rounded-lg\"\n   586→    >\n   587→      Toggle Dropdown\n   588→    </button>\n   589→\n   590→    <!-- Floating Content -->\n   591→    <div\n   592→      v-if=\"isOpen\"\n   593→      ref=\"floatingRef\"\n   594→      :style=\"floatingStyles\"\n   595→      class=\"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-2 z-50\"\n   596→    >\n   597→      <!-- Dropdown items -->\n   598→      <button class=\"w-full text-left px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded\">\n   599→        Option 1\n   600→      </button>\n   601→      <button class=\"w-full text-left px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded\">\n   602→        Option 2\n   603→      </button>\n   604→    </div>\n   605→  </div>\n   606→</template>\n   607→```\n   608→\n   609→**Common Middleware:**\n   610→- `offset(px)` - Space between trigger and floating element\n   611→- `flip()` - Flip to opposite side if no space\n   612→- `shift()` - Move horizontally to stay in viewport\n   613→- `arrow()` - Position arrow element\n   614→- `autoUpdate()` - Update position on scroll/resize\n   615→\n   616→---\n   617→\n   618→### ECharts (vue-echarts) - 15+ Chart Components\n   619→\n   620→**Base Chart Pattern:**\n   621→```vue\n   622→<script setup lang=\"ts\">\n   623→import { ref, computed, onMounted, watch } from 'vue'\n   624→import { useMounted, useWindowSize } from '@vueuse/core'\n   625→import VChart from 'vue-echarts'\n   626→import { use } from 'echarts/core'\n   627→import { CanvasRenderer } from 'echarts/renderers'\n   628→import { LineChart, BarChart } from 'echarts/charts'\n   629→import {\n   630→  TitleComponent,\n   631→  TooltipComponent,\n   632→  LegendComponent,\n   633→  GridComponent\n   634→} from 'echarts/components'\n   635→\n   636→// Register ECharts components (tree-shakeable)\n   637→use([\n   638→  CanvasRenderer,\n   639→  LineChart,\n   640→  BarChart,\n   641→  TitleComponent,\n   642→  TooltipComponent,\n   643→  LegendComponent,\n   644→  GridComponent\n   645→])\n   646→\n   647→const props = defineProps<{\n   648→  data: { x: string; y: number }[]\n   649→  title?: string\n   650→}>()\n   651→\n   652→const mounted = useMounted()\n   653→const { width } = useWindowSize()\n   654→const chartRef = ref<InstanceType<typeof VChart>>()\n   655→\n   656→// ECharts option object\n   657→const option = computed(() => ({\n   658→  title: {\n   659→    text: props.title,\n   660→    textStyle: {\n   661→      color: '#374151', // Update based on theme\n   662→    }\n   663→  },\n   664→  tooltip: {\n   665→    trigger: 'axis'\n   666→  },\n   667→  xAxis: {\n   668→    type: 'category',\n   669→    data: props.data.map(d => d.x)\n   670→  },\n   671→  yAxis: {\n   672→    type: 'value'\n   673→  },\n   674→  series: [{\n   675→    type: 'line',\n   676→    data: props.data.map(d => d.y),\n   677→    smooth: true\n   678→  }]\n   679→}))\n   680→\n   681→// Resize chart on window resize\n   682→watch(width, () => {\n   683→  chartRef.value?.resize()\n   684→})\n   685→\n   686→onMounted(() => {\n   687→  // Initial resize after mount\n   688→  setTimeout(() => chartRef.value?.resize(), 100)\n   689→})\n   690→</script>\n   691→\n   692→<template>\n   693→  <div v-if=\"mounted\" class=\"w-full h-full\">\n   694→    <VChart\n   695→      ref=\"chartRef\"\n   696→      :option=\"option\"\n   697→      :autoresize=\"true\"\n   698→      class=\"w-full h-full\"\n   699→    />\n   700→  </div>\n   701→</template>\n   702→```\n   703→\n   704→**Why ECharts:**\n   705→- Tree-shakeable (import only what you use)\n   706→- Responsive with `useWindowSize()` hook\n   707→- Dark mode support via theme configuration\n   708→- 15+ chart types (Line, Bar, Pie, etc.)\n   709→\n   710→---\n   711→\n   712→### When to Use Each Library\n   713→\n   714→| Library | Use Case | SSR Safety |\n   715→|---------|----------|------------|\n   716→| **Iconify** | All icons in UI | ⚠️ Requires `useMounted()` |\n   717→| **HeadlessUI** | Modals, popovers, dropdowns, tabs | ✅ SSR-safe |\n   718→| **Floating UI** | Advanced positioning (tooltips, dropdowns) | ⚠️ Requires `useMounted()` |\n   719→| **ECharts** | Data visualization and charts | ⚠️ Requires `useMounted()` |\n   720→| **VueUse** | Composable utilities | ✅ Most are SSR-safe |\n   721→\n   722→**Critical Rule:** Always check if a library needs `useMounted()` for SSR safety. If it accesses `window`, `document`, or `navigator`, wrap it.\n   723→\n   724→## File Naming & Organization\n   725→\n   726→### File Names\n   727→- **PascalCase** for component files: `UserProfile.vue`, `LoginForm.vue`\n   728→- **Descriptive names**: Component name should indicate purpose\n   729→\n   730→### Directory Structure\n   731→```\n   732→src/components/vue/\n   733→├── ui/                  # Reusable UI primitives (buttons, inputs, cards)\n   734→│   ├── Button.vue\n   735→│   ├── Input.vue\n   736→│   ├── Card.vue\n   737→│   └── Modal.vue\n   738→├── forms/               # Form-specific components\n   739→│   ├── LoginForm.vue\n   740→│   ├── SignupForm.vue\n   741→│   └── FormInput.vue\n   742→├── layout/              # Layout components\n   743→│   ├── Header.vue\n   744→│   ├── Footer.vue\n   745→│   └── Sidebar.vue\n   746→└── [domain]/            # Domain-specific components\n   747→    ├── auth/            # Auth-related\n   748→    ├── profile/         # Profile-related\n   749→    └── messaging/       # Messaging-related\n   750→```\n   751→\n   752→## Dark Mode Best Practices\n   753→\n   754→### Color Patterns\n   755→```\n   756→Background colors:\n   757→- Light: bg-white, bg-gray-50, bg-gray-100\n   758→- Dark:  dark:bg-gray-800, dark:bg-gray-900, dark:bg-black\n   759→\n   760→Text colors:\n   761→- Light: text-gray-900, text-gray-800, text-gray-700\n   762→- Dark:  dark:text-gray-100, dark:text-gray-200, dark:text-gray-300\n   763→\n   764→Border colors:\n   765→- Light: border-gray-200, border-gray-300\n   766→- Dark:  dark:border-gray-700, dark:border-gray-600\n   767→\n   768→Hover states:\n   769→- Light: hover:bg-gray-100\n   770→- Dark:  dark:hover:bg-gray-700\n   771→```\n   772→\n   773→### Always Pair Light + Dark\n   774→```vue\n   775→<!-- CORRECT: Both light and dark -->\n   776→<div class=\"bg-white dark:bg-gray-800\">\n   777→  <p class=\"text-gray-900 dark:text-gray-100\">Text</p>\n   778→</div>\n   779→\n   780→<!-- INCORRECT: Only light ❌ -->\n   781→<div class=\"bg-white\">\n   782→  <p class=\"text-gray-900\">Text</p>\n   783→</div>\n   784→```\n   785→\n   786→## Accessibility Checklist\n   787→\n   788→- [ ] All interactive elements have ARIA labels\n   789→- [ ] Form inputs have associated labels\n   790→- [ ] Errors have role=\"alert\"\n   791→- [ ] Modals have role=\"dialog\" and aria-modal=\"true\"\n   792→- [ ] Buttons have descriptive aria-label\n   793→- [ ] Keyboard navigation works (Tab, Enter, Escape)\n   794→- [ ] Focus visible on interactive elements\n   795→- [ ] Color contrast meets WCAG AA standards\n   796→\n   797→## Before Creating Component\n   798→\n   799→1. **Search for existing components** (use codebase-researcher skill)\n   800→2. **Check for similar patterns** in other components\n   801→3. **Identify reusable parts** (can you compose existing components?)\n   802→4. **Plan component API** (props, emits, slots)\n   803→5. **Consider SSR** (will this render on server?)\n   804→\n   805→## Component Checklist\n   806→\n   807→- [ ] TypeScript `<script setup lang=\"ts\">`\n   808→- [ ] Props with `withDefaults(defineProps<{}>(), {})` pattern\n   809→- [ ] v-model with `defineModel()` (if applicable)\n   810→- [ ] `useMounted()` for client-only code (icons, browser APIs)\n   811→- [ ] Tailwind classes preferred (scoped styles only for transitions)\n   812→- [ ] Dark mode classes (`dark:`) on ALL colors\n   813→- [ ] Proper TypeScript types with no `any`\n   814→- [ ] ARIA labels on interactive elements\n   815→- [ ] `defineEmits<{}>()` properly typed\n   816→- [ ] Error handling present\n   817→- [ ] Responsive design (mobile-first with Tailwind breakpoints)\n   818→- [ ] Third-party libraries integrated correctly (HeadlessUI, Iconify, etc.)\n   819→- [ ] Existing components checked for reuse potential\n   820→\n   821→## Cross-References\n   822→\n   823→For related patterns, see these skills:\n   824→- **astro-vue-architect** - Astro + Vue integration architecture, when to use .astro vs Vue, client directive optimization, data flow patterns, appEntrypoint setup, View Transitions\n   825→- **vue-composable-builder** - Vue composable patterns and VueUse integration\n   826→- **nanostore-builder** - State management with Nanostores\n   827→- **soc-appwrite-integration** - Appwrite SDK usage for data operations\n   828→\n   829→## Further Reading\n   830→\n   831→See supporting files for detailed patterns:\n   832→- [ssr-patterns.md] - Complete SSR safety guide\n   833→- [form-patterns.md] - Advanced form handling\n   834→- [modal-patterns.md] - Modal best practices\n   835→- [tailwind-dark-mode.md] - Dark mode patterns\n   836→- [third-party-libraries.md] - HeadlessUI, Iconify, Floating UI, ECharts\n   837→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"c21a20d2-e719-4a93-a0a8-91053e46c12d","timestamp":"2025-10-30T05:56:25.555Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/natedamstra/.claude/skills/vue-component-builder/SKILL.md","content":"---\nname: Vue 3 Component Builder\ndescription: Build Vue 3 components using Composition API, script setup syntax, TypeScript strict mode, and Tailwind CSS. Use when creating/modifying .vue SFCs, building form components, modals with Teleport, or integrating third-party libraries (HeadlessUI, Iconify, ECharts). CRITICAL RULES enforced: Tailwind preferred, always dark: mode classes, useMounted for SSR safety, TypeScript prop validation with withDefaults, ARIA labels for accessibility. Prevents common mistakes (missing dark mode, SSR hydration errors, inaccessible components). Use for \".vue\", \"component\", \"modal\", \"form\", \"icon\", \"chart\".\nversion: 3.0.0\ntags: [vue3, script-setup, composition-api, typescript, tailwind, dark-mode, ssr, accessibility, modals, forms, defineModel, headlessui, iconify]\n---\n\n# Vue 3 Component Builder\n\n## Core Patterns (User's Projects)\n\n### CRITICAL RULES (NEVER BREAK)\n1. ⚠️ **PREFER** Tailwind CSS classes (scoped styles ONLY for transitions/animations)\n2. ❌ **NEVER** use inline styles\n3. ✅ **ALWAYS** include `dark:` prefix for all color classes\n4. ✅ **ALWAYS** use `useMounted()` for client-only code (SSR safety)\n5. ✅ **ALWAYS** use TypeScript with `withDefaults()` for props\n6. ✅ **ALWAYS** use `defineModel()` for v-model bindings (Vue 3.4+)\n7. ✅ **ALWAYS** add ARIA labels to interactive elements\n8. ✅ **ALWAYS** check for existing components before creating new ones\n\n### Tech Stack\n- **Vue 3.4+** Composition API with `<script setup lang=\"ts\">`\n- **TypeScript** Strict mode with interface-based props\n- **Tailwind CSS** Primary styling method (utilities only)\n- **VueUse** For common utilities (useMounted, onClickOutside, etc.)\n- **HeadlessUI** For accessible components (Dialog, Popover, etc.)\n- **Iconify** For all icons (`@iconify/vue`)\n- **Floating UI** For popovers/tooltips (`@floating-ui/vue`)\n- **ECharts** For charts (`vue-echarts`)\n\n## Base Component Template\n\n```vue\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\nimport { useMounted } from '@vueuse/core'\n\n// Props with TypeScript interface (STANDARD PATTERN)\nconst props = withDefaults(\n  defineProps<{\n    title: string\n    variant?: 'primary' | 'secondary'\n    disabled?: boolean\n  }>(),\n  {\n    variant: 'primary',\n    disabled: false\n  }\n)\n\n// Emits (typed)\nconst emit = defineEmits<{\n  (e: 'click'): void\n  (e: 'change', value: string): void\n}>()\n\n// SSR-safe mounting\nconst mounted = useMounted()\n\n// Reactive state\nconst isActive = ref(false)\n\n// Computed properties\nconst buttonClasses = computed(() => {\n  const base = 'px-4 py-2 rounded-lg transition-colors font-medium'\n  const variants = {\n    primary: 'bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600',\n    secondary: 'bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600'\n  }\n  const disabled = props.disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'\n  return `${base} ${variants[props.variant]} ${disabled}`\n})\n\n// Methods\nfunction handleClick() {\n  if (!props.disabled) {\n    emit('click')\n  }\n}\n</script>\n\n<template>\n  <div v-if=\"mounted\">\n    <button\n      :class=\"buttonClasses\"\n      class=\"text-white dark:text-gray-100\"\n      @click=\"handleClick\"\n      :disabled=\"props.disabled\"\n      role=\"button\"\n      :aria-label=\"props.title\"\n      :aria-disabled=\"props.disabled\"\n    >\n      {{ props.title }}\n    </button>\n  </div>\n</template>\n```\n\n### Modern v-model Pattern (Vue 3.4+)\n\nUse `defineModel()` for reactive two-way binding:\n\n```vue\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\n\n// Simple v-model\nconst modelValue = defineModel<string>({ default: '' })\n\n// Named v-model with required\nconst open = defineModel<boolean>('open', { required: true })\n\n// Multiple v-models\nconst search = defineModel<string>('search', { default: '' })\nconst selected = defineModel<string[]>('selected', { default: () => [] })\n\n// Computed wrapper for transformation\nconst lowercaseValue = computed({\n  get: () => modelValue.value.toLowerCase(),\n  set: (val) => { modelValue.value = val }\n})\n</script>\n\n<template>\n  <!-- Direct usage (no .value needed in templates) -->\n  <input v-model=\"modelValue\" />\n\n  <!-- Or use computed wrapper -->\n  <input v-model=\"lowercaseValue\" />\n</template>\n```\n\n**Why defineModel():**\n- Simpler than `props + emit('update:modelValue')`\n- Auto-generates proper TypeScript types\n- Standard in Vue 3.4+ (modern pattern)\n- Used in 100+ components in this codebase\n\n## Common Patterns\n\n### SSR-Safe Patterns\n\n**Pattern 1: useMounted for Conditional Rendering**\n```vue\n<script setup lang=\"ts\">\nimport { useMounted } from '@vueuse/core'\nimport { ref, watch } from 'vue'\n\nconst mounted = useMounted()\nconst theme = ref('light')\n\n// CORRECT: Access browser APIs after mount\nwatch(mounted, (isMounted) => {\n  if (isMounted) {\n    // Safe to access localStorage\n    theme.value = localStorage.getItem('theme') ?? 'light'\n  }\n})\n\n// INCORRECT: ❌ Direct access\n// const theme = localStorage.getItem('theme') // Crashes on SSR\n</script>\n\n<template>\n  <!-- Pattern A: Conditional content -->\n  <div v-if=\"mounted\">\n    <Icon icon=\"mdi:home\" /> <!-- Safe: Icon only renders client-side -->\n  </div>\n\n  <!-- Pattern B: Wrap entire component -->\n  <template v-if=\"mounted\">\n    <!-- All client-only content -->\n  </template>\n</template>\n```\n\n**Pattern 2: useSupported for Feature Detection**\n```vue\n<script setup lang=\"ts\">\nimport { useSupported } from '@vueuse/core'\n\n// Returns false on server, true/false on client\nconst isGeolocationSupported = useSupported(() => 'geolocation' in navigator)\nconst isWebGLSupported = useSupported(() => 'WebGLRenderingContext' in window)\n</script>\n\n<template>\n  <div v-if=\"isGeolocationSupported\">\n    <!-- Show map component -->\n  </div>\n  <div v-else>\n    Geolocation not supported\n  </div>\n</template>\n```\n\n**Pattern 3: SSR-Safe Initialization**\n```vue\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue'\n\nconst data = ref<string | null>(null)\n\n// CORRECT: Initialize in onMounted\nonMounted(() => {\n  data.value = localStorage.getItem('key')\n})\n\n// INCORRECT: ❌ Direct initialization\n// const data = ref(localStorage.getItem('key')) // Crashes on SSR\n</script>\n```\n\n### Form Validation Pattern\n\nFor form validation, use Zod schemas in API routes and composables (not in component props). Components handle UI validation:\n\n```vue\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\n\n// Form state\nconst email = defineModel<string>('email', { default: '' })\nconst password = defineModel<string>('password', { default: '' })\n\n// Validation errors\nconst emailError = ref<string | null>(null)\nconst passwordError = ref<string | null>(null)\n\n// Custom validation functions\nfunction validateEmail(): boolean {\n  if (!email.value) {\n    emailError.value = 'Email is required'\n    return false\n  }\n  if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email.value)) {\n    emailError.value = 'Invalid email address'\n    return false\n  }\n  emailError.value = null\n  return true\n}\n\nfunction validatePassword(): boolean {\n  if (!password.value) {\n    passwordError.value = 'Password is required'\n    return false\n  }\n  if (password.value.length < 8) {\n    passwordError.value = 'Password must be at least 8 characters'\n    return false\n  }\n  passwordError.value = null\n  return true\n}\n\nconst isValid = computed(() => {\n  return email.value && password.value && !emailError.value && !passwordError.value\n})\n\nasync function handleSubmit() {\n  const emailValid = validateEmail()\n  const passwordValid = validatePassword()\n\n  if (emailValid && passwordValid) {\n    // Submit to API (Zod validation happens on server)\n    await submitForm({ email: email.value, password: password.value })\n  }\n}\n</script>\n\n<template>\n  <form @submit.prevent=\"handleSubmit\" class=\"space-y-4\">\n    <div>\n      <label\n        for=\"email\"\n        class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n      >\n        Email\n      </label>\n      <input\n        id=\"email\"\n        v-model=\"email\"\n        type=\"email\"\n        @blur=\"validateEmail\"\n        class=\"w-full px-4 py-2 border rounded-lg dark:bg-gray-800 dark:border-gray-600 dark:text-white\"\n        :class=\"{\n          'border-red-500 dark:border-red-400': emailError,\n          'border-gray-300 dark:border-gray-600': !emailError\n        }\"\n        aria-required=\"true\"\n        :aria-invalid=\"!!emailError\"\n        :aria-describedby=\"emailError ? 'email-error' : undefined\"\n      />\n      <p\n        v-if=\"emailError\"\n        id=\"email-error\"\n        class=\"text-red-500 dark:text-red-400 text-sm mt-1\"\n        role=\"alert\"\n      >\n        {{ emailError }}\n      </p>\n    </div>\n\n    <button\n      type=\"submit\"\n      :disabled=\"!isValid\"\n      class=\"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n      aria-label=\"Submit form\"\n    >\n      Submit\n    </button>\n  </form>\n</template>\n```\n\n**Note:** Zod validation belongs in API routes and composables for runtime data validation, not component props.\n\n### Modal Pattern\n```vue\n<script setup lang=\"ts\">\nimport { onClickOutside, onKeyStroke } from '@vueuse/core'\nimport { ref } from 'vue'\n\nconst props = defineProps<{\n  modelValue: boolean\n  title?: string\n}>()\n\nconst emit = defineEmits<{\n  'update:modelValue': [value: boolean]\n}>()\n\nconst modalRef = ref<HTMLElement>()\n\n// Close on click outside\nonClickOutside(modalRef, () => {\n  emit('update:modelValue', false)\n})\n\n// Close on escape key\nonKeyStroke('Escape', () => {\n  emit('update:modelValue', false)\n})\n\nfunction close() {\n  emit('update:modelValue', false)\n}\n</script>\n\n<template>\n  <Teleport to=\"#teleport-layer\" :disabled=\"!mounted\">\n    <Transition\n      enter-active-class=\"transition-opacity duration-200\"\n      enter-from-class=\"opacity-0\"\n      enter-to-class=\"opacity-100\"\n      leave-active-class=\"transition-opacity duration-200\"\n      leave-from-class=\"opacity-100\"\n      leave-to-class=\"opacity-0\"\n    >\n      <div\n        v-if=\"modelValue\"\n        class=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 p-4\"\n        @click.self=\"close\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        :aria-labelledby=\"title ? 'modal-title' : undefined\"\n      >\n        <div\n          ref=\"modalRef\"\n          class=\"bg-white dark:bg-gray-800 rounded-lg shadow-2xl max-w-md w-full p-6\"\n        >\n          <!-- Header -->\n          <div v-if=\"title\" class=\"flex items-center justify-between mb-4\">\n            <h2\n              id=\"modal-title\"\n              class=\"text-xl font-bold text-gray-900 dark:text-gray-100\"\n            >\n              {{ title }}\n            </h2>\n            <button\n              @click=\"close\"\n              class=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n              aria-label=\"Close modal\"\n            >\n              ✕\n            </button>\n          </div>\n\n          <!-- Content slot -->\n          <div class=\"text-gray-700 dark:text-gray-300\">\n            <slot />\n          </div>\n\n          <!-- Footer slot -->\n          <div v-if=\"$slots.footer\" class=\"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700\">\n            <slot name=\"footer\" :close=\"close\" />\n          </div>\n        </div>\n      </div>\n    </Transition>\n  </Teleport>\n</template>\n```\n\n### Nanostores Integration\n```vue\n<script setup lang=\"ts\">\nimport { useStore } from '@nanostores/vue'\nimport { $user, userStore } from '@/stores/user'\nimport { computed } from 'vue'\n\n// Use store (reactive)\nconst user = useStore($user)\n\n// Computed based on store\nconst displayName = computed(() => {\n  return user.value?.name ?? 'Guest'\n})\n\n// Store methods\nasync function updateProfile(name: string) {\n  if (user.value?.$id) {\n    await userStore.updateProfile(user.value.$id, { name })\n  }\n}\n</script>\n\n<template>\n  <div v-if=\"user\" class=\"p-4 bg-white dark:bg-gray-800 rounded-lg\">\n    <p class=\"text-gray-900 dark:text-gray-100\">\n      Welcome, {{ displayName }}\n    </p>\n    <button\n      @click=\"updateProfile('New Name')\"\n      class=\"mt-2 px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-lg\"\n    >\n      Update Profile\n    </button>\n  </div>\n</template>\n```\n\n## Third-Party Library Integration\n\nThis codebase heavily relies on several third-party libraries. **ALWAYS use these patterns** when integrating them.\n\n### Iconify (@iconify/vue) - 256+ Components Use This\n\n**Standard Icon Pattern:**\n```vue\n<script setup lang=\"ts\">\nimport { Icon } from '@iconify/vue'\nimport { useMounted } from '@vueuse/core'\n\nconst mounted = useMounted()\n</script>\n\n<template>\n  <!-- ALWAYS wrap icons in useMounted for SSR safety -->\n  <template v-if=\"mounted\">\n    <Icon icon=\"mdi:home\" class=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\n    <Icon icon=\"mdi:close\" class=\"w-4 h-4\" />\n    <Icon icon=\"heroicons:user-circle-20-solid\" />\n  </template>\n</template>\n```\n\n**Icon Collections Used:**\n- `mdi:*` - Material Design Icons (most common)\n- `heroicons:*` - Heroicons\n- `lucide:*` - Lucide icons\n- `ri:*` - Remix Icon\n\n**Why useMounted Required:** Icon component uses browser APIs that crash during SSR.\n\n---\n\n### HeadlessUI (@headlessui/vue) - 11+ Components\n\n**Accessible Modal Pattern:**\n```vue\n<script setup lang=\"ts\">\nimport { Dialog, DialogPanel, DialogTitle, TransitionRoot, TransitionChild } from '@headlessui/vue'\n\nconst open = defineModel<boolean>('open', { required: true })\n</script>\n\n<template>\n  <TransitionRoot :show=\"open\" as=\"template\">\n    <Dialog @close=\"open = false\" class=\"relative z-50\">\n      <!-- Backdrop -->\n      <TransitionChild\n        as=\"template\"\n        enter=\"duration-300 ease-out\"\n        enter-from=\"opacity-0\"\n        enter-to=\"opacity-100\"\n        leave=\"duration-200 ease-in\"\n        leave-from=\"opacity-100\"\n        leave-to=\"opacity-0\"\n      >\n        <div class=\"fixed inset-0 bg-black/50 dark:bg-black/70\" />\n      </TransitionChild>\n\n      <!-- Modal Panel -->\n      <div class=\"fixed inset-0 flex items-center justify-center p-4\">\n        <TransitionChild\n          as=\"template\"\n          enter=\"duration-300 ease-out\"\n          enter-from=\"opacity-0 scale-95\"\n          enter-to=\"opacity-100 scale-100\"\n          leave=\"duration-200 ease-in\"\n          leave-from=\"opacity-100 scale-100\"\n          leave-to=\"opacity-0 scale-95\"\n        >\n          <DialogPanel class=\"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg p-6 shadow-xl\">\n            <DialogTitle class=\"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4\">\n              Modal Title\n            </DialogTitle>\n\n            <div class=\"text-gray-700 dark:text-gray-300\">\n              <!-- Modal content -->\n            </div>\n\n            <div class=\"mt-6 flex justify-end space-x-3\">\n              <button\n                @click=\"open = false\"\n                class=\"px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded-lg\"\n              >\n                Cancel\n              </button>\n              <button\n                class=\"px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-lg\"\n              >\n                Confirm\n              </button>\n            </div>\n          </DialogPanel>\n        </TransitionChild>\n      </div>\n    </Dialog>\n  </TransitionRoot>\n</template>\n```\n\n**Why HeadlessUI:**\n- Accessible by default (ARIA attributes built-in)\n- Keyboard navigation handled automatically\n- Focus management included\n- Screen reader compatible\n- Unstyled (use Tailwind for styling)\n\n---\n\n### Floating UI (@floating-ui/vue) - 14+ Components\n\n**Dropdown/Popover Positioning:**\n```vue\n<script setup lang=\"ts\">\nimport { useFloating, offset, flip, shift } from '@floating-ui/vue'\nimport { ref } from 'vue'\n\nconst referenceRef = ref<HTMLElement>()\nconst floatingRef = ref<HTMLElement>()\n\nconst { floatingStyles } = useFloating(referenceRef, floatingRef, {\n  placement: 'bottom-start',\n  middleware: [\n    offset(8), // 8px offset from trigger\n    flip(), // Flip if not enough space\n    shift({ padding: 8 }) // Shift to stay in viewport\n  ]\n})\n\nconst isOpen = ref(false)\n</script>\n\n<template>\n  <div>\n    <!-- Trigger -->\n    <button\n      ref=\"referenceRef\"\n      @click=\"isOpen = !isOpen\"\n      class=\"px-4 py-2 bg-blue-600 text-white rounded-lg\"\n    >\n      Toggle Dropdown\n    </button>\n\n    <!-- Floating Content -->\n    <div\n      v-if=\"isOpen\"\n      ref=\"floatingRef\"\n      :style=\"floatingStyles\"\n      class=\"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-2 z-50\"\n    >\n      <!-- Dropdown items -->\n      <button class=\"w-full text-left px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded\">\n        Option 1\n      </button>\n      <button class=\"w-full text-left px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded\">\n        Option 2\n      </button>\n    </div>\n  </div>\n</template>\n```\n\n**Common Middleware:**\n- `offset(px)` - Space between trigger and floating element\n- `flip()` - Flip to opposite side if no space\n- `shift()` - Move horizontally to stay in viewport\n- `arrow()` - Position arrow element\n- `autoUpdate()` - Update position on scroll/resize\n\n---\n\n### ECharts (vue-echarts) - 15+ Chart Components\n\n**Base Chart Pattern:**\n```vue\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { useMounted, useWindowSize } from '@vueuse/core'\nimport VChart from 'vue-echarts'\nimport { use } from 'echarts/core'\nimport { CanvasRenderer } from 'echarts/renderers'\nimport { LineChart, BarChart } from 'echarts/charts'\nimport {\n  TitleComponent,\n  TooltipComponent,\n  LegendComponent,\n  GridComponent\n} from 'echarts/components'\n\n// Register ECharts components (tree-shakeable)\nuse([\n  CanvasRenderer,\n  LineChart,\n  BarChart,\n  TitleComponent,\n  TooltipComponent,\n  LegendComponent,\n  GridComponent\n])\n\nconst props = defineProps<{\n  data: { x: string; y: number }[]\n  title?: string\n}>()\n\nconst mounted = useMounted()\nconst { width } = useWindowSize()\nconst chartRef = ref<InstanceType<typeof VChart>>()\n\n// ECharts option object\nconst option = computed(() => ({\n  title: {\n    text: props.title,\n    textStyle: {\n      color: '#374151', // Update based on theme\n    }\n  },\n  tooltip: {\n    trigger: 'axis'\n  },\n  xAxis: {\n    type: 'category',\n    data: props.data.map(d => d.x)\n  },\n  yAxis: {\n    type: 'value'\n  },\n  series: [{\n    type: 'line',\n    data: props.data.map(d => d.y),\n    smooth: true\n  }]\n}))\n\n// Resize chart on window resize\nwatch(width, () => {\n  chartRef.value?.resize()\n})\n\nonMounted(() => {\n  // Initial resize after mount\n  setTimeout(() => chartRef.value?.resize(), 100)\n})\n</script>\n\n<template>\n  <div v-if=\"mounted\" class=\"w-full h-full\">\n    <VChart\n      ref=\"chartRef\"\n      :option=\"option\"\n      :autoresize=\"true\"\n      class=\"w-full h-full\"\n    />\n  </div>\n</template>\n```\n\n**Why ECharts:**\n- Tree-shakeable (import only what you use)\n- Responsive with `useWindowSize()` hook\n- Dark mode support via theme configuration\n- 15+ chart types (Line, Bar, Pie, etc.)\n\n---\n\n### When to Use Each Library\n\n| Library | Use Case | SSR Safety |\n|---------|----------|------------|\n| **Iconify** | All icons in UI | ⚠️ Requires `useMounted()` |\n| **HeadlessUI** | Modals, popovers, dropdowns, tabs | ✅ SSR-safe |\n| **Floating UI** | Advanced positioning (tooltips, dropdowns) | ⚠️ Requires `useMounted()` |\n| **ECharts** | Data visualization and charts | ⚠️ Requires `useMounted()` |\n| **VueUse** | Composable utilities | ✅ Most are SSR-safe |\n\n**Critical Rule:** Always check if a library needs `useMounted()` for SSR safety. If it accesses `window`, `document`, or `navigator`, wrap it.\n\n## File Naming & Organization\n\n### File Names\n- **PascalCase** for component files: `UserProfile.vue`, `LoginForm.vue`\n- **Descriptive names**: Component name should indicate purpose\n\n### Directory Structure\n```\nsrc/components/vue/\n├── ui/                  # Reusable UI primitives (buttons, inputs, cards)\n│   ├── Button.vue\n│   ├── Input.vue\n│   ├── Card.vue\n│   └── Modal.vue\n├── forms/               # Form-specific components\n│   ├── LoginForm.vue\n│   ├── SignupForm.vue\n│   └── FormInput.vue\n├── layout/              # Layout components\n│   ├── Header.vue\n│   ├── Footer.vue\n│   └── Sidebar.vue\n└── [domain]/            # Domain-specific components\n    ├── auth/            # Auth-related\n    ├── profile/         # Profile-related\n    └── messaging/       # Messaging-related\n```\n\n## Dark Mode Best Practices\n\n### Color Patterns\n```\nBackground colors:\n- Light: bg-white, bg-gray-50, bg-gray-100\n- Dark:  dark:bg-gray-800, dark:bg-gray-900, dark:bg-black\n\nText colors:\n- Light: text-gray-900, text-gray-800, text-gray-700\n- Dark:  dark:text-gray-100, dark:text-gray-200, dark:text-gray-300\n\nBorder colors:\n- Light: border-gray-200, border-gray-300\n- Dark:  dark:border-gray-700, dark:border-gray-600\n\nHover states:\n- Light: hover:bg-gray-100\n- Dark:  dark:hover:bg-gray-700\n```\n\n### Always Pair Light + Dark\n```vue\n<!-- CORRECT: Both light and dark -->\n<div class=\"bg-white dark:bg-gray-800\">\n  <p class=\"text-gray-900 dark:text-gray-100\">Text</p>\n</div>\n\n<!-- INCORRECT: Only light ❌ -->\n<div class=\"bg-white\">\n  <p class=\"text-gray-900\">Text</p>\n</div>\n```\n\n## Accessibility Checklist\n\n- [ ] All interactive elements have ARIA labels\n- [ ] Form inputs have associated labels\n- [ ] Errors have role=\"alert\"\n- [ ] Modals have role=\"dialog\" and aria-modal=\"true\"\n- [ ] Buttons have descriptive aria-label\n- [ ] Keyboard navigation works (Tab, Enter, Escape)\n- [ ] Focus visible on interactive elements\n- [ ] Color contrast meets WCAG AA standards\n\n## Before Creating Component\n\n1. **Search for existing components** (use codebase-researcher skill)\n2. **Check for similar patterns** in other components\n3. **Identify reusable parts** (can you compose existing components?)\n4. **Plan component API** (props, emits, slots)\n5. **Consider SSR** (will this render on server?)\n\n## Component Checklist\n\n- [ ] TypeScript `<script setup lang=\"ts\">`\n- [ ] Props with `withDefaults(defineProps<{}>(), {})` pattern\n- [ ] v-model with `defineModel()` (if applicable)\n- [ ] `useMounted()` for client-only code (icons, browser APIs)\n- [ ] Tailwind classes preferred (scoped styles only for transitions)\n- [ ] Dark mode classes (`dark:`) on ALL colors\n- [ ] Proper TypeScript types with no `any`\n- [ ] ARIA labels on interactive elements\n- [ ] `defineEmits<{}>()` properly typed\n- [ ] Error handling present\n- [ ] Responsive design (mobile-first with Tailwind breakpoints)\n- [ ] Third-party libraries integrated correctly (HeadlessUI, Iconify, etc.)\n- [ ] Existing components checked for reuse potential\n\n## Cross-References\n\nFor related patterns, see these skills:\n- **astro-vue-architect** - Astro + Vue integration architecture, when to use .astro vs Vue, client directive optimization, data flow patterns, appEntrypoint setup, View Transitions\n- **vue-composable-builder** - Vue composable patterns and VueUse integration\n- **nanostore-builder** - State management with Nanostores\n- **soc-appwrite-integration** - Appwrite SDK usage for data operations\n\n## Further Reading\n\nSee supporting files for detailed patterns:\n- [ssr-patterns.md] - Complete SSR safety guide\n- [form-patterns.md] - Advanced form handling\n- [modal-patterns.md] - Modal best practices\n- [tailwind-dark-mode.md] - Dark mode patterns\n- [third-party-libraries.md] - HeadlessUI, Iconify, Floating UI, ECharts\n","numLines":837,"startLine":1,"totalLines":837}}}
{"parentUuid":"c21a20d2-e719-4a93-a0a8-91053e46c12d","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01WWUesubUc6cr3qTaA5cfux","type":"tool_result","content":"     1→---\n     2→name: Nanostore Builder\n     3→description: Comprehensive Nanostores guide covering BaseStore (Appwrite CRUD), persistentAtom/Map (client state), computed (derived state), and hybrid patterns. CRITICAL decision framework - BaseStore for collections, persistentAtom for UI state, atom for runtime, computed for derived. Includes SSR safety, factory patterns, multi-atom orchestration, performance optimization. Always search existing stores first. Use for \"store\", \"state\", \"persistence\", \"reactive\", \"database\", \"CRUD\", \"UI state\".\n     4→version: 3.0.0\n     5→tags: [nanostores, state-management, appwrite, basestore, zod, crud, persistence, reactivity, ssr, computed, factory-pattern]\n     6→---\n     7→\n     8→# Nanostore Builder\n     9→\n    10→## 🎯 Store Type Decision Framework\n    11→\n    12→**CRITICAL: Choose the right store type FIRST, then implement**\n    13→\n    14→```\n    15→What are you storing?\n    16→├─ Appwrite Collection Data (CRUD operations)?\n    17→│  └─ ✅ Use: BaseStore<T>\n    18→│     └─ Examples: chatStore, postContainerStore, teamStore\n    19→│\n    20→├─ Persistent Client State (survives page reload)?\n    21→│  ├─ Single Value?\n    22→│  │  └─ ✅ Use: persistentAtom<T>\n    23→│  │     └─ Examples: curUser, selectedTeam, jwtCache\n    24→│  └─ Multiple Key-Value Pairs?\n    25→│     └─ ✅ Use: persistentMap<T>\n    26→│        └─ Example: floatingPanelStore (panel configs by ID)\n    27→│\n    28→├─ Derived/Computed State (calculated from other stores)?\n    29→│  └─ ✅ Use: computed()\n    30→│     └─ Examples: visiblePanels, workflowProgress, canProceed\n    31→│\n    32→├─ Ephemeral Runtime State (reset on page reload)?\n    33→│  └─ ✅ Use: atom<T>\n    34→│     └─ Examples: navigationState, runtimePanelState, isDragging\n    35→│\n    36→└─ Complex Multi-State Orchestration?\n    37→   └─ ✅ Use: Hybrid Approach (combine multiple types)\n    38→      └─ Examples: workflowStore, floatingPanelStore, authStore\n    39→\n    40→💡 **Cleanup Pattern:** When resetting multiple stores (logout, user switch), use the **Coordinated Cleanup Pattern** from useAuth - clears stores in dependency order with race condition prevention.\n    41→```\n    42→\n    43→### When NOT to Use BaseStore ❌\n    44→\n    45→**Don't use BaseStore for:**\n    46→- UI state (modal open/closed, active tab)\n    47→- Client-only data (drag positions, scroll state)\n    48→- Computed values (derived from other stores)\n    49→- Non-Appwrite data sources\n    50→- Session-only state (reset on logout)\n    51→\n    52→**Use raw nanostores instead!**\n    53→\n    54→## BaseStore Pattern (Appwrite Collections)\n    55→\n    56→### BEFORE Creating Store\n    57→\n    58→**CRITICAL CHECKS:**\n    59→1. ❗ Search for existing store: `grep -r \"BaseStore\" src/stores/`\n    60→2. ❗ Check if collection already has store\n    61→3. ❗ Verify Appwrite collection exists and schema matches\n    62→4. ❗ Look for similar state management patterns\n    63→\n    64→### When to Create Store\n    65→\n    66→✅ Create new store when:\n    67→- Managing Appwrite collection data\n    68→- Need persistence with local state\n    69→- Require CRUD operations with validation\n    70→- State needs to be shared across components\n    71→\n    72→❌ Don't create store when:\n    73→- Simple local component state (use ref/reactive)\n    74→- One-time data fetch (use composable)\n    75→- Store already exists for this collection\n    76→\n    77→## BaseStore Extension Template\n    78→\n    79→```typescript\n    80→import { BaseStore } from './baseStore'\n    81→import { z } from 'zod'\n    82→import type { Models } from 'appwrite'\n    83→\n    84→// 1. Zod Schema (matches Appwrite collection attributes)\n    85→export const UserSchema = z.object({\n    86→  $id: z.string().optional(),\n    87→  $createdAt: z.string().datetime().optional(),\n    88→  $updatedAt: z.string().datetime().optional(),\n    89→  name: z.string().min(1, 'Name is required'),\n    90→  email: z.string().email('Invalid email'),\n    91→  avatar: z.string().url().optional(),\n    92→  bio: z.string().max(500).optional(),\n    93→  role: z.enum(['user', 'admin']).default('user')\n    94→})\n    95→\n    96→// 2. Type inference from schema\n    97→export type User = z.infer<typeof UserSchema>\n    98→\n    99→// 3. Store class extending BaseStore\n   100→export class UserStore extends BaseStore<typeof UserSchema> {\n   101→  constructor() {\n   102→    super(\n   103→      import.meta.env.PUBLIC_APPWRITE_USERS_COLLECTION_ID, // Collection ID from env\n   104→      UserSchema,                                           // Zod schema\n   105→      'user',                                               // Atom key (for persistence)\n   106→      import.meta.env.PUBLIC_APPWRITE_DATABASE_ID          // Database ID from env\n   107→    )\n   108→  }\n   109→\n   110→  // Custom methods beyond CRUD\n   111→\n   112→  /**\n   113→   * Get currently authenticated user\n   114→   */\n   115→  async getCurrentUser(): Promise<User | null> {\n   116→    try {\n   117→      const account = await this.account.get()\n   118→      return await this.get(account.$id)\n   119→    } catch {\n   120→      return null\n   121→    }\n   122→  }\n   123→\n   124→  /**\n   125→   * Update user profile with validation\n   126→   */\n   127→  async updateProfile(userId: string, data: Partial<User>): Promise<User> {\n   128→    // Validate partial data\n   129→    const validated = UserSchema.partial().parse(data)\n   130→\n   131→    // Update using BaseStore method\n   132→    return await this.update(userId, validated)\n   133→  }\n   134→\n   135→  /**\n   136→   * Search users by name\n   137→   */\n   138→  async searchByName(query: string): Promise<User[]> {\n   139→    const users = await this.list([\n   140→      Query.search('name', query),\n   141→      Query.limit(10)\n   142→    ])\n   143→    return users\n   144→  }\n   145→\n   146→  /**\n   147→   * Get users by role\n   148→   */\n   149→  async getUsersByRole(role: 'user' | 'admin'): Promise<User[]> {\n   150→    return await this.list([\n   151→      Query.equal('role', role)\n   152→    ])\n   153→  }\n   154→}\n   155→\n   156→// 4. Export singleton instance\n   157→export const userStore = new UserStore()\n   158→\n   159→// 5. Export atom for Vue reactivity\n   160→export const $user = userStore.atom\n   161→```\n   162→\n   163→## BaseStore Methods (Inherited)\n   164→\n   165→Your stores automatically have these methods from BaseStore:\n   166→\n   167→```typescript\n   168→// Create\n   169→await store.create(data, documentId?)\n   170→\n   171→// Read\n   172→await store.get(documentId)\n   173→await store.list(queries?)\n   174→\n   175→// Update\n   176→await store.update(documentId, data)\n   177→\n   178→// Delete\n   179→await store.delete(documentId)\n   180→\n   181→// Upsert (create or update)\n   182→await store.upsert(documentId, data)\n   183→\n   184→// Count\n   185→await store.count(queries?)\n   186→\n   187→// Realtime subscription\n   188→store.subscribe((document) => {\n   189→  // Handle realtime updates\n   190→})\n   191→```\n   192→\n   193→## Vue Integration\n   194→\n   195→```vue\n   196→<script setup lang=\"ts\">\n   197→import { useStore } from '@nanostores/vue'\n   198→import { $user, userStore, type User } from '@/stores/user'\n   199→import { ref } from 'vue'\n   200→\n   201→// Reactive store value\n   202→const user = useStore($user)\n   203→\n   204→// Loading state\n   205→const loading = ref(false)\n   206→const error = ref<string | null>(null)\n   207→\n   208→// Load current user\n   209→async function loadUser() {\n   210→  loading.value = true\n   211→  error.value = null\n   212→\n   213→  try {\n   214→    const currentUser = await userStore.getCurrentUser()\n   215→    // Store automatically updates $user atom\n   216→  } catch (e) {\n   217→    error.value = e.message\n   218→  } finally {\n   219→    loading.value = false\n   220→  }\n   221→}\n   222→\n   223→// Update profile\n   224→async function updateName(newName: string) {\n   225→  if (!user.value?.$id) return\n   226→\n   227→  loading.value = true\n   228→  try {\n   229→    await userStore.updateProfile(user.value.$id, { name: newName })\n   230→    // $user atom automatically updates\n   231→  } catch (e) {\n   232→    error.value = e.message\n   233→  } finally {\n   234→    loading.value = false\n   235→  }\n   236→}\n   237→\n   238→// Search users\n   239→const searchResults = ref<User[]>([])\n   240→\n   241→async function searchUsers(query: string) {\n   242→  if (!query) {\n   243→    searchResults.value = []\n   244→    return\n   245→  }\n   246→\n   247→  loading.value = true\n   248→  try {\n   249→    searchResults.value = await userStore.searchByName(query)\n   250→  } catch (e) {\n   251→    error.value = e.message\n   252→  } finally {\n   253→    loading.value = false\n   254→  }\n   255→}\n   256→</script>\n   257→\n   258→<template>\n   259→  <div>\n   260→    <!-- Display user -->\n   261→    <div v-if=\"user\">\n   262→      <h2>{{ user.name }}</h2>\n   263→      <p>{{ user.email }}</p>\n   264→    </div>\n   265→\n   266→    <!-- Update form -->\n   267→    <input\n   268→      v-model=\"newName\"\n   269→      @blur=\"updateName(newName)\"\n   270→      class=\"px-4 py-2 border rounded dark:bg-gray-800\"\n   271→    />\n   272→\n   273→    <!-- Search -->\n   274→    <input\n   275→      v-model=\"searchQuery\"\n   276→      @input=\"searchUsers(searchQuery)\"\n   277→      placeholder=\"Search users...\"\n   278→      class=\"px-4 py-2 border rounded dark:bg-gray-800\"\n   279→    />\n   280→\n   281→    <div v-if=\"loading\">Loading...</div>\n   282→    <div v-if=\"error\" class=\"text-red-500\">{{ error }}</div>\n   283→  </div>\n   284→</template>\n   285→```\n   286→\n   287→## Zod Schema Best Practices\n   288→\n   289→### Match Appwrite Attributes Exactly\n   290→\n   291→```typescript\n   292→// Appwrite Collection Schema:\n   293→// - name (string, required)\n   294→// - email (string, required)\n   295→// - age (integer, optional)\n   296→// - verified (boolean, default: false)\n   297→\n   298→// Matching Zod Schema:\n   299→const UserSchema = z.object({\n   300→  $id: z.string().optional(),           // Appwrite document ID\n   301→  $createdAt: z.string().optional(),    // Appwrite timestamp\n   302→  $updatedAt: z.string().optional(),    // Appwrite timestamp\n   303→  name: z.string(),                     // Required string\n   304→  email: z.string().email(),            // Required email\n   305→  age: z.number().int().optional(),     // Optional integer\n   306→  verified: z.boolean().default(false)  // Boolean with default\n   307→})\n   308→```\n   309→\n   310→### Common Zod Patterns\n   311→\n   312→```typescript\n   313→// Strings\n   314→z.string()                          // Required string\n   315→z.string().optional()               // Optional string\n   316→z.string().min(3)                   // Min length\n   317→z.string().max(100)                 // Max length\n   318→z.string().email()                  // Email validation\n   319→z.string().url()                    // URL validation\n   320→z.string().uuid()                   // UUID format\n   321→\n   322→// Numbers\n   323→z.number()                          // Required number\n   324→z.number().int()                    // Integer only\n   325→z.number().positive()               // Must be positive\n   326→z.number().min(0).max(100)          // Range\n   327→\n   328→// Booleans\n   329→z.boolean()                         // Boolean\n   330→z.boolean().default(false)          // With default\n   331→\n   332→// Enums\n   333→z.enum(['active', 'pending', 'inactive'])\n   334→\n   335→// Arrays\n   336→z.array(z.string())                 // String array\n   337→z.array(UserSchema)                 // Array of objects\n   338→\n   339→// Dates\n   340→z.string().datetime()               // ISO datetime string\n   341→z.date()                            // Date object\n   342→\n   343→// Optional fields\n   344→z.string().optional()               // May be undefined\n   345→z.string().nullable()               // May be null\n   346→z.string().nullish()                // May be null or undefined\n   347→```\n   348→\n   349→## Environment Variables\n   350→\n   351→Always use environment variables for IDs:\n   352→\n   353→```typescript\n   354→// .env\n   355→PUBLIC_APPWRITE_DATABASE_ID=main_db\n   356→PUBLIC_APPWRITE_USERS_COLLECTION_ID=users\n   357→PUBLIC_APPWRITE_POSTS_COLLECTION_ID=posts\n   358→\n   359→// In store\n   360→constructor() {\n   361→  super(\n   362→    import.meta.env.PUBLIC_APPWRITE_USERS_COLLECTION_ID,\n   363→    UserSchema,\n   364→    'user',\n   365→    import.meta.env.PUBLIC_APPWRITE_DATABASE_ID\n   366→  )\n   367→}\n   368→```\n   369→\n   370→## Error Handling\n   371→\n   372→```typescript\n   373→// In custom store methods\n   374→async updateProfile(userId: string, data: Partial<User>): Promise<User> {\n   375→  try {\n   376→    // Validate before sending to Appwrite\n   377→    const validated = UserSchema.partial().parse(data)\n   378→\n   379→    // Call BaseStore method (has built-in error handling)\n   380→    return await this.update(userId, validated)\n   381→  } catch (error) {\n   382→    if (error instanceof z.ZodError) {\n   383→      // Zod validation errors\n   384→      throw new Error(`Validation error: ${error.errors[0].message}`)\n   385→    }\n   386→\n   387→    if (error instanceof AppwriteException) {\n   388→      // Appwrite errors\n   389→      if (error.code === 404) {\n   390→        throw new Error('User not found')\n   391→      } else if (error.code === 401) {\n   392→        throw new Error('Unauthorized')\n   393→      }\n   394→    }\n   395→\n   396→    throw error\n   397→  }\n   398→}\n   399→```\n   400→\n   401→## Store Checklist\n   402→\n   403→Before creating a store:\n   404→- [ ] Searched for existing store with same purpose\n   405→- [ ] Verified Appwrite collection exists\n   406→- [ ] Ensured collection schema matches Zod schema\n   407→- [ ] Named store clearly (e.g., userStore, postStore)\n   408→- [ ] Used proper environment variables\n   409→- [ ] Extended BaseStore correctly\n   410→- [ ] Exported singleton instance\n   411→- [ ] Exported atom for reactivity\n   412→- [ ] Added custom methods if needed\n   413→- [ ] Included error handling\n   414→\n   415→## Cross-References\n   416→\n   417→For related patterns, see these skills:\n   418→- **zod-schema-architect** - Creating and organizing Zod schemas, Appwrite schema alignment, validation patterns\n   419→- **vue-composable-builder** - How to integrate stores in composables (use `useStore()`, never create stores in composables)\n   420→- **soc-appwrite-integration** - BaseStore pattern and Appwrite SDK integration\n   421→- **vue-component-builder** - How to use stores in Vue components\n   422→\n   423→## Further Reading\n   424→\n   425→See supporting files:\n   426→- **[store-types.md]** - Comprehensive guide to all nanostore types with examples\n   427→- **[advanced-patterns.md]** - Factory pattern, hybrid stores, multi-atom orchestration\n   428→- **[ssr-safety.md]** - SSR compatibility patterns and client-side guards\n   429→- **[performance.md]** - Auto-save, debouncing, and optimization strategies\n   430→- [basestore-patterns.md] - Deep dive into BaseStore\n   431→- [appwrite-sync.md] - Keeping Zod + Appwrite aligned\n   432→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"ff2dd65e-b4a7-42c1-8e3e-1813a624dbf8","timestamp":"2025-10-30T05:56:25.641Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/natedamstra/.claude/skills/nanostore-builder/SKILL.md","content":"---\nname: Nanostore Builder\ndescription: Comprehensive Nanostores guide covering BaseStore (Appwrite CRUD), persistentAtom/Map (client state), computed (derived state), and hybrid patterns. CRITICAL decision framework - BaseStore for collections, persistentAtom for UI state, atom for runtime, computed for derived. Includes SSR safety, factory patterns, multi-atom orchestration, performance optimization. Always search existing stores first. Use for \"store\", \"state\", \"persistence\", \"reactive\", \"database\", \"CRUD\", \"UI state\".\nversion: 3.0.0\ntags: [nanostores, state-management, appwrite, basestore, zod, crud, persistence, reactivity, ssr, computed, factory-pattern]\n---\n\n# Nanostore Builder\n\n## 🎯 Store Type Decision Framework\n\n**CRITICAL: Choose the right store type FIRST, then implement**\n\n```\nWhat are you storing?\n├─ Appwrite Collection Data (CRUD operations)?\n│  └─ ✅ Use: BaseStore<T>\n│     └─ Examples: chatStore, postContainerStore, teamStore\n│\n├─ Persistent Client State (survives page reload)?\n│  ├─ Single Value?\n│  │  └─ ✅ Use: persistentAtom<T>\n│  │     └─ Examples: curUser, selectedTeam, jwtCache\n│  └─ Multiple Key-Value Pairs?\n│     └─ ✅ Use: persistentMap<T>\n│        └─ Example: floatingPanelStore (panel configs by ID)\n│\n├─ Derived/Computed State (calculated from other stores)?\n│  └─ ✅ Use: computed()\n│     └─ Examples: visiblePanels, workflowProgress, canProceed\n│\n├─ Ephemeral Runtime State (reset on page reload)?\n│  └─ ✅ Use: atom<T>\n│     └─ Examples: navigationState, runtimePanelState, isDragging\n│\n└─ Complex Multi-State Orchestration?\n   └─ ✅ Use: Hybrid Approach (combine multiple types)\n      └─ Examples: workflowStore, floatingPanelStore, authStore\n\n💡 **Cleanup Pattern:** When resetting multiple stores (logout, user switch), use the **Coordinated Cleanup Pattern** from useAuth - clears stores in dependency order with race condition prevention.\n```\n\n### When NOT to Use BaseStore ❌\n\n**Don't use BaseStore for:**\n- UI state (modal open/closed, active tab)\n- Client-only data (drag positions, scroll state)\n- Computed values (derived from other stores)\n- Non-Appwrite data sources\n- Session-only state (reset on logout)\n\n**Use raw nanostores instead!**\n\n## BaseStore Pattern (Appwrite Collections)\n\n### BEFORE Creating Store\n\n**CRITICAL CHECKS:**\n1. ❗ Search for existing store: `grep -r \"BaseStore\" src/stores/`\n2. ❗ Check if collection already has store\n3. ❗ Verify Appwrite collection exists and schema matches\n4. ❗ Look for similar state management patterns\n\n### When to Create Store\n\n✅ Create new store when:\n- Managing Appwrite collection data\n- Need persistence with local state\n- Require CRUD operations with validation\n- State needs to be shared across components\n\n❌ Don't create store when:\n- Simple local component state (use ref/reactive)\n- One-time data fetch (use composable)\n- Store already exists for this collection\n\n## BaseStore Extension Template\n\n```typescript\nimport { BaseStore } from './baseStore'\nimport { z } from 'zod'\nimport type { Models } from 'appwrite'\n\n// 1. Zod Schema (matches Appwrite collection attributes)\nexport const UserSchema = z.object({\n  $id: z.string().optional(),\n  $createdAt: z.string().datetime().optional(),\n  $updatedAt: z.string().datetime().optional(),\n  name: z.string().min(1, 'Name is required'),\n  email: z.string().email('Invalid email'),\n  avatar: z.string().url().optional(),\n  bio: z.string().max(500).optional(),\n  role: z.enum(['user', 'admin']).default('user')\n})\n\n// 2. Type inference from schema\nexport type User = z.infer<typeof UserSchema>\n\n// 3. Store class extending BaseStore\nexport class UserStore extends BaseStore<typeof UserSchema> {\n  constructor() {\n    super(\n      import.meta.env.PUBLIC_APPWRITE_USERS_COLLECTION_ID, // Collection ID from env\n      UserSchema,                                           // Zod schema\n      'user',                                               // Atom key (for persistence)\n      import.meta.env.PUBLIC_APPWRITE_DATABASE_ID          // Database ID from env\n    )\n  }\n\n  // Custom methods beyond CRUD\n\n  /**\n   * Get currently authenticated user\n   */\n  async getCurrentUser(): Promise<User | null> {\n    try {\n      const account = await this.account.get()\n      return await this.get(account.$id)\n    } catch {\n      return null\n    }\n  }\n\n  /**\n   * Update user profile with validation\n   */\n  async updateProfile(userId: string, data: Partial<User>): Promise<User> {\n    // Validate partial data\n    const validated = UserSchema.partial().parse(data)\n\n    // Update using BaseStore method\n    return await this.update(userId, validated)\n  }\n\n  /**\n   * Search users by name\n   */\n  async searchByName(query: string): Promise<User[]> {\n    const users = await this.list([\n      Query.search('name', query),\n      Query.limit(10)\n    ])\n    return users\n  }\n\n  /**\n   * Get users by role\n   */\n  async getUsersByRole(role: 'user' | 'admin'): Promise<User[]> {\n    return await this.list([\n      Query.equal('role', role)\n    ])\n  }\n}\n\n// 4. Export singleton instance\nexport const userStore = new UserStore()\n\n// 5. Export atom for Vue reactivity\nexport const $user = userStore.atom\n```\n\n## BaseStore Methods (Inherited)\n\nYour stores automatically have these methods from BaseStore:\n\n```typescript\n// Create\nawait store.create(data, documentId?)\n\n// Read\nawait store.get(documentId)\nawait store.list(queries?)\n\n// Update\nawait store.update(documentId, data)\n\n// Delete\nawait store.delete(documentId)\n\n// Upsert (create or update)\nawait store.upsert(documentId, data)\n\n// Count\nawait store.count(queries?)\n\n// Realtime subscription\nstore.subscribe((document) => {\n  // Handle realtime updates\n})\n```\n\n## Vue Integration\n\n```vue\n<script setup lang=\"ts\">\nimport { useStore } from '@nanostores/vue'\nimport { $user, userStore, type User } from '@/stores/user'\nimport { ref } from 'vue'\n\n// Reactive store value\nconst user = useStore($user)\n\n// Loading state\nconst loading = ref(false)\nconst error = ref<string | null>(null)\n\n// Load current user\nasync function loadUser() {\n  loading.value = true\n  error.value = null\n\n  try {\n    const currentUser = await userStore.getCurrentUser()\n    // Store automatically updates $user atom\n  } catch (e) {\n    error.value = e.message\n  } finally {\n    loading.value = false\n  }\n}\n\n// Update profile\nasync function updateName(newName: string) {\n  if (!user.value?.$id) return\n\n  loading.value = true\n  try {\n    await userStore.updateProfile(user.value.$id, { name: newName })\n    // $user atom automatically updates\n  } catch (e) {\n    error.value = e.message\n  } finally {\n    loading.value = false\n  }\n}\n\n// Search users\nconst searchResults = ref<User[]>([])\n\nasync function searchUsers(query: string) {\n  if (!query) {\n    searchResults.value = []\n    return\n  }\n\n  loading.value = true\n  try {\n    searchResults.value = await userStore.searchByName(query)\n  } catch (e) {\n    error.value = e.message\n  } finally {\n    loading.value = false\n  }\n}\n</script>\n\n<template>\n  <div>\n    <!-- Display user -->\n    <div v-if=\"user\">\n      <h2>{{ user.name }}</h2>\n      <p>{{ user.email }}</p>\n    </div>\n\n    <!-- Update form -->\n    <input\n      v-model=\"newName\"\n      @blur=\"updateName(newName)\"\n      class=\"px-4 py-2 border rounded dark:bg-gray-800\"\n    />\n\n    <!-- Search -->\n    <input\n      v-model=\"searchQuery\"\n      @input=\"searchUsers(searchQuery)\"\n      placeholder=\"Search users...\"\n      class=\"px-4 py-2 border rounded dark:bg-gray-800\"\n    />\n\n    <div v-if=\"loading\">Loading...</div>\n    <div v-if=\"error\" class=\"text-red-500\">{{ error }}</div>\n  </div>\n</template>\n```\n\n## Zod Schema Best Practices\n\n### Match Appwrite Attributes Exactly\n\n```typescript\n// Appwrite Collection Schema:\n// - name (string, required)\n// - email (string, required)\n// - age (integer, optional)\n// - verified (boolean, default: false)\n\n// Matching Zod Schema:\nconst UserSchema = z.object({\n  $id: z.string().optional(),           // Appwrite document ID\n  $createdAt: z.string().optional(),    // Appwrite timestamp\n  $updatedAt: z.string().optional(),    // Appwrite timestamp\n  name: z.string(),                     // Required string\n  email: z.string().email(),            // Required email\n  age: z.number().int().optional(),     // Optional integer\n  verified: z.boolean().default(false)  // Boolean with default\n})\n```\n\n### Common Zod Patterns\n\n```typescript\n// Strings\nz.string()                          // Required string\nz.string().optional()               // Optional string\nz.string().min(3)                   // Min length\nz.string().max(100)                 // Max length\nz.string().email()                  // Email validation\nz.string().url()                    // URL validation\nz.string().uuid()                   // UUID format\n\n// Numbers\nz.number()                          // Required number\nz.number().int()                    // Integer only\nz.number().positive()               // Must be positive\nz.number().min(0).max(100)          // Range\n\n// Booleans\nz.boolean()                         // Boolean\nz.boolean().default(false)          // With default\n\n// Enums\nz.enum(['active', 'pending', 'inactive'])\n\n// Arrays\nz.array(z.string())                 // String array\nz.array(UserSchema)                 // Array of objects\n\n// Dates\nz.string().datetime()               // ISO datetime string\nz.date()                            // Date object\n\n// Optional fields\nz.string().optional()               // May be undefined\nz.string().nullable()               // May be null\nz.string().nullish()                // May be null or undefined\n```\n\n## Environment Variables\n\nAlways use environment variables for IDs:\n\n```typescript\n// .env\nPUBLIC_APPWRITE_DATABASE_ID=main_db\nPUBLIC_APPWRITE_USERS_COLLECTION_ID=users\nPUBLIC_APPWRITE_POSTS_COLLECTION_ID=posts\n\n// In store\nconstructor() {\n  super(\n    import.meta.env.PUBLIC_APPWRITE_USERS_COLLECTION_ID,\n    UserSchema,\n    'user',\n    import.meta.env.PUBLIC_APPWRITE_DATABASE_ID\n  )\n}\n```\n\n## Error Handling\n\n```typescript\n// In custom store methods\nasync updateProfile(userId: string, data: Partial<User>): Promise<User> {\n  try {\n    // Validate before sending to Appwrite\n    const validated = UserSchema.partial().parse(data)\n\n    // Call BaseStore method (has built-in error handling)\n    return await this.update(userId, validated)\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      // Zod validation errors\n      throw new Error(`Validation error: ${error.errors[0].message}`)\n    }\n\n    if (error instanceof AppwriteException) {\n      // Appwrite errors\n      if (error.code === 404) {\n        throw new Error('User not found')\n      } else if (error.code === 401) {\n        throw new Error('Unauthorized')\n      }\n    }\n\n    throw error\n  }\n}\n```\n\n## Store Checklist\n\nBefore creating a store:\n- [ ] Searched for existing store with same purpose\n- [ ] Verified Appwrite collection exists\n- [ ] Ensured collection schema matches Zod schema\n- [ ] Named store clearly (e.g., userStore, postStore)\n- [ ] Used proper environment variables\n- [ ] Extended BaseStore correctly\n- [ ] Exported singleton instance\n- [ ] Exported atom for reactivity\n- [ ] Added custom methods if needed\n- [ ] Included error handling\n\n## Cross-References\n\nFor related patterns, see these skills:\n- **zod-schema-architect** - Creating and organizing Zod schemas, Appwrite schema alignment, validation patterns\n- **vue-composable-builder** - How to integrate stores in composables (use `useStore()`, never create stores in composables)\n- **soc-appwrite-integration** - BaseStore pattern and Appwrite SDK integration\n- **vue-component-builder** - How to use stores in Vue components\n\n## Further Reading\n\nSee supporting files:\n- **[store-types.md]** - Comprehensive guide to all nanostore types with examples\n- **[advanced-patterns.md]** - Factory pattern, hybrid stores, multi-atom orchestration\n- **[ssr-safety.md]** - SSR compatibility patterns and client-side guards\n- **[performance.md]** - Auto-save, debouncing, and optimization strategies\n- [basestore-patterns.md] - Deep dive into BaseStore\n- [appwrite-sync.md] - Keeping Zod + Appwrite aligned\n","numLines":432,"startLine":1,"totalLines":432}}}
{"parentUuid":"ff2dd65e-b4a7-42c1-8e3e-1813a624dbf8","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01TGs51YnQu6PwjYMhvuhW7B","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me examine one more skill to get a comprehensive view:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12434,"cache_creation_input_tokens":15429,"cache_read_input_tokens":26364,"cache_creation":{"ephemeral_5m_input_tokens":15429,"ephemeral_1h_input_tokens":0},"output_tokens":87,"service_tier":"standard"}},"requestId":"req_011CUcsGv2hxasL1Q8EePMK6","type":"assistant","uuid":"ee672389-79f4-49fd-9ee0-6ab3070404a3","timestamp":"2025-10-30T05:56:29.513Z"}
{"parentUuid":"ee672389-79f4-49fd-9ee0-6ab3070404a3","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01TGs51YnQu6PwjYMhvuhW7B","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_014om5oC24n8Jb74wH7aFjvj","name":"Read","input":{"file_path":"/Users/natedamstra/.claude/skills/astro-routing/SKILL.md"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12434,"cache_creation_input_tokens":15429,"cache_read_input_tokens":26364,"cache_creation":{"ephemeral_5m_input_tokens":15429,"ephemeral_1h_input_tokens":0},"output_tokens":87,"service_tier":"standard"}},"requestId":"req_011CUcsGv2hxasL1Q8EePMK6","type":"assistant","uuid":"9c39d0fe-9201-4bb5-bc9c-8481a7f788a0","timestamp":"2025-10-30T05:56:30.676Z"}
{"parentUuid":"9c39d0fe-9201-4bb5-bc9c-8481a7f788a0","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_014om5oC24n8Jb74wH7aFjvj","type":"tool_result","content":"     1→---\n     2→name: Astro Routing\n     3→description: Create Astro pages and API routes with proper SSR patterns. Use when building SSR pages (src/pages/[slug].astro), API endpoints (.json.ts pattern), or implementing client directives (client:load, client:visible, client:idle). Handles server-side data fetching, prop passing to Vue components, Zod validation in API routes. Prevents hydration mismatches by properly scoping server vs client code. Use for \"Astro page\", \"API route\", \".json.ts\", \"SSR\", \"client directive\", \"[dynamic]\", \"server component\". Ensures client-only code doesn't run during build.\n     4→version: 2.0.0\n     5→tags: [astro, ssr, routing, pages, api-routes, dynamic-routes, json-api, client-directives, hydration, server-side-rendering]\n     6→---\n     7→\n     8→# Astro Routing\n     9→\n    10→## Page Creation\n    11→\n    12→### Basic Page\n    13→\n    14→```astro\n    15→---\n    16→// src/pages/index.astro\n    17→import Layout from '@/layouts/Layout.astro'\n    18→import Hero from '@/components/vue/Hero.vue'\n    19→\n    20→// Server-side code (runs during build/SSR)\n    21→const title = 'Home Page'\n    22→const description = 'Welcome to our site'\n    23→---\n    24→\n    25→<Layout title={title} description={description}>\n    26→  <Hero client:load />\n    27→\n    28→  <main class=\"container mx-auto px-4 py-8\">\n    29→    <h1 class=\"text-4xl font-bold text-gray-900 dark:text-gray-100\">\n    30→      {title}\n    31→    </h1>\n    32→  </main>\n    33→</Layout>\n    34→```\n    35→\n    36→### Dynamic Page\n    37→\n    38→```astro\n    39→---\n    40→// src/pages/users/[id].astro\n    41→import Layout from '@/layouts/Layout.astro'\n    42→import UserProfile from '@/components/vue/UserProfile.vue'\n    43→import { userStore } from '@/stores/user'\n    44→\n    45→// Get params from URL\n    46→const { id } = Astro.params\n    47→\n    48→// Fetch data on server\n    49→const user = await userStore.get(id)\n    50→\n    51→if (!user) {\n    52→  return Astro.redirect('/404')\n    53→}\n    54→---\n    55→\n    56→<Layout title={`${user.name}'s Profile`}>\n    57→  <UserProfile\n    58→    client:load\n    59→    user={user}\n    60→  />\n    61→</Layout>\n    62→```\n    63→\n    64→### Page with Data Fetching\n    65→\n    66→```astro\n    67→---\n    68→// src/pages/blog/index.astro\n    69→import Layout from '@/layouts/Layout.astro'\n    70→import PostCard from '@/components/vue/PostCard.vue'\n    71→import { postStore } from '@/stores/post'\n    72→import { Query } from 'appwrite'\n    73→\n    74→// Server-side data fetching\n    75→const posts = await postStore.list([\n    76→  Query.orderDesc('$createdAt'),\n    77→  Query.limit(10)\n    78→])\n    79→---\n    80→\n    81→<Layout title=\"Blog\">\n    82→  <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n    83→    {posts.map((post) => (\n    84→      <PostCard\n    85→        client:visible\n    86→        post={post}\n    87→      />\n    88→    ))}\n    89→  </div>\n    90→</Layout>\n    91→```\n    92→\n    93→## Client Directives\n    94→\n    95→```astro\n    96→<!-- Load component immediately -->\n    97→<Component client:load />\n    98→\n    99→<!-- Load when component becomes visible -->\n   100→<Component client:visible />\n   101→\n   102→<!-- Load when page is idle -->\n   103→<Component client:idle />\n   104→\n   105→<!-- Load based on media query -->\n   106→<Component client:media=\"(max-width: 768px)\" />\n   107→\n   108→<!-- Only render on client, never on server -->\n   109→<Component client:only=\"vue\" />\n   110→```\n   111→\n   112→**When to use which:**\n   113→- `client:load` - Interactive immediately (navigation, auth)\n   114→- `client:visible` - Below fold (cards, images)\n   115→- `client:idle` - Nice to have (comments, related content)\n   116→- `client:media` - Responsive components\n   117→- `client:only` - Breaks SSR (charts, maps)\n   118→\n   119→## API Routes\n   120→\n   121→### Basic API Route\n   122→\n   123→```typescript\n   124→// src/pages/api/hello.json.ts\n   125→import type { APIRoute } from 'astro'\n   126→\n   127→export const GET: APIRoute = async ({ request }) => {\n   128→  return new Response(\n   129→    JSON.stringify({\n   130→      message: 'Hello World'\n   131→    }),\n   132→    {\n   133→      status: 200,\n   134→      headers: {\n   135→        'Content-Type': 'application/json'\n   136→      }\n   137→    }\n   138→  )\n   139→}\n   140→```\n   141→\n   142→### API Route with Validation\n   143→\n   144→```typescript\n   145→// src/pages/api/users.json.ts\n   146→import type { APIRoute } from 'astro'\n   147→import { z } from 'zod'\n   148→import { userStore } from '@/stores/user'\n   149→\n   150→// Request schema\n   151→const CreateUserSchema = z.object({\n   152→  name: z.string().min(1),\n   153→  email: z.string().email(),\n   154→  age: z.number().int().min(18).optional()\n   155→})\n   156→\n   157→export const POST: APIRoute = async ({ request }) => {\n   158→  try {\n   159→    // Parse request body\n   160→    const body = await request.json()\n   161→\n   162→    // Validate with Zod\n   163→    const validated = CreateUserSchema.parse(body)\n   164→\n   165→    // Create user\n   166→    const user = await userStore.create(validated)\n   167→\n   168→    // Return success\n   169→    return new Response(\n   170→      JSON.stringify({\n   171→        success: true,\n   172→        user\n   173→      }),\n   174→      {\n   175→        status: 201,\n   176→        headers: {\n   177→          'Content-Type': 'application/json'\n   178→        }\n   179→      }\n   180→    )\n   181→\n   182→  } catch (error) {\n   183→    // Handle Zod validation errors\n   184→    if (error instanceof z.ZodError) {\n   185→      return new Response(\n   186→        JSON.stringify({\n   187→          success: false,\n   188→          errors: error.errors\n   189→        }),\n   190→        {\n   191→          status: 400,\n   192→          headers: {\n   193→            'Content-Type': 'application/json'\n   194→          }\n   195→        }\n   196→      )\n   197→    }\n   198→\n   199→    // Handle other errors\n   200→    return new Response(\n   201→      JSON.stringify({\n   202→        success: false,\n   203→        message: 'Internal server error'\n   204→      }),\n   205→      {\n   206→        status: 500,\n   207→        headers: {\n   208→          'Content-Type': 'application/json'\n   209→        }\n   210→      }\n   211→    )\n   212→  }\n   213→}\n   214→```\n   215→\n   216→### Dynamic API Route\n   217→\n   218→```typescript\n   219→// src/pages/api/users/[id].json.ts\n   220→import type { APIRoute } from 'astro'\n   221→import { userStore } from '@/stores/user'\n   222→\n   223→export const GET: APIRoute = async ({ params }) => {\n   224→  const { id } = params\n   225→\n   226→  if (!id) {\n   227→    return new Response(\n   228→      JSON.stringify({ error: 'ID required' }),\n   229→      { status: 400 }\n   230→    )\n   231→  }\n   232→\n   233→  const user = await userStore.get(id)\n   234→\n   235→  if (!user) {\n   236→    return new Response(\n   237→      JSON.stringify({ error: 'User not found' }),\n   238→      { status: 404 }\n   239→    )\n   240→  }\n   241→\n   242→  return new Response(\n   243→    JSON.stringify({ user }),\n   244→    { status: 200 }\n   245→  )\n   246→}\n   247→\n   248→export const DELETE: APIRoute = async ({ params }) => {\n   249→  const { id } = params\n   250→\n   251→  if (!id) {\n   252→    return new Response(\n   253→      JSON.stringify({ error: 'ID required' }),\n   254→      { status: 400 }\n   255→    )\n   256→  }\n   257→\n   258→  await userStore.delete(id)\n   259→\n   260→  return new Response(\n   261→    JSON.stringify({ success: true }),\n   262→    { status: 200 }\n   263→  )\n   264→}\n   265→```\n   266→\n   267→### Complete CRUD API\n   268→\n   269→```typescript\n   270→// src/pages/api/posts.json.ts\n   271→import type { APIRoute } from 'astro'\n   272→import { z } from 'zod'\n   273→import { postStore, PostSchema } from '@/stores/post'\n   274→import { Query } from 'appwrite'\n   275→\n   276→// CREATE\n   277→export const POST: APIRoute = async ({ request }) => {\n   278→  try {\n   279→    const body = await request.json()\n   280→    const validated = PostSchema.parse(body)\n   281→    const post = await postStore.create(validated)\n   282→\n   283→    return new Response(JSON.stringify({ post }), { status: 201 })\n   284→  } catch (error) {\n   285→    if (error instanceof z.ZodError) {\n   286→      return new Response(\n   287→        JSON.stringify({ errors: error.errors }),\n   288→        { status: 400 }\n   289→      )\n   290→    }\n   291→    return new Response(\n   292→      JSON.stringify({ error: 'Internal error' }),\n   293→      { status: 500 }\n   294→    )\n   295→  }\n   296→}\n   297→\n   298→// LIST\n   299→export const GET: APIRoute = async ({ url }) => {\n   300→  try {\n   301→    // Get query params\n   302→    const page = parseInt(url.searchParams.get('page') ?? '1')\n   303→    const limit = parseInt(url.searchParams.get('limit') ?? '10')\n   304→    const offset = (page - 1) * limit\n   305→\n   306→    // Query posts\n   307→    const posts = await postStore.list([\n   308→      Query.orderDesc('$createdAt'),\n   309→      Query.limit(limit),\n   310→      Query.offset(offset)\n   311→    ])\n   312→\n   313→    const total = await postStore.count()\n   314→\n   315→    return new Response(\n   316→      JSON.stringify({\n   317→        posts,\n   318→        pagination: {\n   319→          page,\n   320→          limit,\n   321→          total,\n   322→          pages: Math.ceil(total / limit)\n   323→        }\n   324→      }),\n   325→      { status: 200 }\n   326→    )\n   327→  } catch (error) {\n   328→    return new Response(\n   329→      JSON.stringify({ error: 'Internal error' }),\n   330→      { status: 500 }\n   331→    )\n   332→  }\n   333→}\n   334→```\n   335→\n   336→## Passing Props to Components\n   337→\n   338→```astro\n   339→---\n   340→// Fetch data on server\n   341→const user = await userStore.getCurrentUser()\n   342→const posts = await postStore.list()\n   343→\n   344→// Complex data\n   345→const stats = {\n   346→  totalPosts: posts.length,\n   347→  totalViews: posts.reduce((sum, p) => sum + p.views, 0)\n   348→}\n   349→---\n   350→\n   351→<!-- Pass as props -->\n   352→<UserProfile client:load user={user} />\n   353→\n   354→<!-- Pass multiple props -->\n   355→<Dashboard\n   356→  client:load\n   357→  user={user}\n   358→  posts={posts}\n   359→  stats={stats}\n   360→/>\n   361→\n   362→<!-- Serialize complex data -->\n   363→<DataVisualization\n   364→  client:load\n   365→  data={JSON.stringify(stats)}\n   366→/>\n   367→```\n   368→\n   369→## Layouts\n   370→\n   371→```astro\n   372→---\n   373→// src/layouts/Layout.astro\n   374→interface Props {\n   375→  title: string\n   376→  description?: string\n   377→}\n   378→\n   379→const { title, description = 'Default description' } = Astro.props\n   380→---\n   381→\n   382→<!DOCTYPE html>\n   383→<html lang=\"en\" class=\"dark:bg-gray-900\">\n   384→  <head>\n   385→    <meta charset=\"UTF-8\" />\n   386→    <meta name=\"viewport\" content=\"width=device-width\" />\n   387→    <meta name=\"description\" content={description} />\n   388→    <title>{title}</title>\n   389→  </head>\n   390→  <body class=\"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100\">\n   391→    <!-- Teleport target for modals -->\n   392→    <div id=\"teleport-layer\"></div>\n   393→\n   394→    <slot />\n   395→  </body>\n   396→</html>\n   397→```\n   398→\n   399→## Error Pages\n   400→\n   401→```astro\n   402→---\n   403→// src/pages/404.astro\n   404→import Layout from '@/layouts/Layout.astro'\n   405→---\n   406→\n   407→<Layout title=\"404 - Page Not Found\">\n   408→  <div class=\"min-h-screen flex items-center justify-center\">\n   409→    <div class=\"text-center\">\n   410→      <h1 class=\"text-6xl font-bold text-gray-900 dark:text-gray-100\">\n   411→        404\n   412→      </h1>\n   413→      <p class=\"text-xl text-gray-600 dark:text-gray-400 mt-4\">\n   414→        Page not found\n   415→      </p>\n   416→      <a\n   417→        href=\"/\"\n   418→        class=\"mt-8 inline-block px-6 py-3 bg-blue-600 dark:bg-blue-500 text-white rounded-lg\"\n   419→      >\n   420→        Go Home\n   421→      </a>\n   422→    </div>\n   423→  </div>\n   424→</Layout>\n   425→```\n   426→\n   427→## Best Practices\n   428→\n   429→### 1. Server vs Client Code\n   430→\n   431→```astro\n   432→---\n   433→// This runs on SERVER only (during build/SSR)\n   434→const data = await fetchData()\n   435→const computed = heavyComputation()\n   436→\n   437→// Client-side code must be in <script> tag\n   438→---\n   439→\n   440→<script>\n   441→  // This runs in BROWSER\n   442→  console.log('Client-side code')\n   443→\n   444→  document.addEventListener('click', () => {\n   445→    // Handle clicks\n   446→  })\n   447→</script>\n   448→\n   449→<template>\n   450→  <!-- This renders on SERVER, hydrates on CLIENT -->\n   451→  <Component client:load data={data} />\n   452→</template>\n   453→```\n   454→\n   455→### 2. SEO-Friendly Pages\n   456→\n   457→```astro\n   458→---\n   459→const page = {\n   460→  title: 'My Page',\n   461→  description: 'Description for SEO',\n   462→  image: '/og-image.jpg',\n   463→  url: Astro.url.href\n   464→}\n   465→---\n   466→\n   467→<Layout title={page.title}>\n   468→  <Fragment slot=\"head\">\n   469→    <!-- Open Graph -->\n   470→    <meta property=\"og:title\" content={page.title} />\n   471→    <meta property=\"og:description\" content={page.description} />\n   472→    <meta property=\"og:image\" content={page.image} />\n   473→    <meta property=\"og:url\" content={page.url} />\n   474→\n   475→    <!-- Twitter Card -->\n   476→    <meta name=\"twitter:card\" content=\"summary_large_image\" />\n   477→    <meta name=\"twitter:title\" content={page.title} />\n   478→    <meta name=\"twitter:description\" content={page.description} />\n   479→    <meta name=\"twitter:image\" content={page.image} />\n   480→  </Fragment>\n   481→\n   482→  <!-- Page content -->\n   483→</Layout>\n   484→```\n   485→\n   486→### 3. API Error Responses\n   487→\n   488→Always include:\n   489→- Appropriate status code\n   490→- JSON response with error details\n   491→- Content-Type header\n   492→\n   493→```typescript\n   494→// Error helper\n   495→function errorResponse(message: string, status: number = 400) {\n   496→  return new Response(\n   497→    JSON.stringify({\n   498→      success: false,\n   499→      error: message\n   500→    }),\n   501→    {\n   502→      status,\n   503→      headers: {\n   504→        'Content-Type': 'application/json'\n   505→      }\n   506→    }\n   507→  )\n   508→}\n   509→\n   510→// Usage\n   511→if (!id) {\n   512→  return errorResponse('ID required', 400)\n   513→}\n   514→```\n   515→\n   516→## Cross-References\n   517→\n   518→For advanced patterns, see:\n   519→- **astro-vue-architect** - Astro + Vue integration architecture, component decisions (.astro vs Vue), appEntrypoint configuration, client directive optimization, View Transitions with Vue islands, hybrid layouts, performance strategies\n   520→- **zod-schema-architect** - API request/response validation with Zod, error handling patterns, schema organization\n   521→\n   522→## Further Reading\n   523→\n   524→See supporting files:\n   525→- [api-patterns.md] - REST API best practices\n   526→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"dffd9a31-9238-4f8c-b5ff-a918996cb8e8","timestamp":"2025-10-30T05:56:30.851Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/natedamstra/.claude/skills/astro-routing/SKILL.md","content":"---\nname: Astro Routing\ndescription: Create Astro pages and API routes with proper SSR patterns. Use when building SSR pages (src/pages/[slug].astro), API endpoints (.json.ts pattern), or implementing client directives (client:load, client:visible, client:idle). Handles server-side data fetching, prop passing to Vue components, Zod validation in API routes. Prevents hydration mismatches by properly scoping server vs client code. Use for \"Astro page\", \"API route\", \".json.ts\", \"SSR\", \"client directive\", \"[dynamic]\", \"server component\". Ensures client-only code doesn't run during build.\nversion: 2.0.0\ntags: [astro, ssr, routing, pages, api-routes, dynamic-routes, json-api, client-directives, hydration, server-side-rendering]\n---\n\n# Astro Routing\n\n## Page Creation\n\n### Basic Page\n\n```astro\n---\n// src/pages/index.astro\nimport Layout from '@/layouts/Layout.astro'\nimport Hero from '@/components/vue/Hero.vue'\n\n// Server-side code (runs during build/SSR)\nconst title = 'Home Page'\nconst description = 'Welcome to our site'\n---\n\n<Layout title={title} description={description}>\n  <Hero client:load />\n\n  <main class=\"container mx-auto px-4 py-8\">\n    <h1 class=\"text-4xl font-bold text-gray-900 dark:text-gray-100\">\n      {title}\n    </h1>\n  </main>\n</Layout>\n```\n\n### Dynamic Page\n\n```astro\n---\n// src/pages/users/[id].astro\nimport Layout from '@/layouts/Layout.astro'\nimport UserProfile from '@/components/vue/UserProfile.vue'\nimport { userStore } from '@/stores/user'\n\n// Get params from URL\nconst { id } = Astro.params\n\n// Fetch data on server\nconst user = await userStore.get(id)\n\nif (!user) {\n  return Astro.redirect('/404')\n}\n---\n\n<Layout title={`${user.name}'s Profile`}>\n  <UserProfile\n    client:load\n    user={user}\n  />\n</Layout>\n```\n\n### Page with Data Fetching\n\n```astro\n---\n// src/pages/blog/index.astro\nimport Layout from '@/layouts/Layout.astro'\nimport PostCard from '@/components/vue/PostCard.vue'\nimport { postStore } from '@/stores/post'\nimport { Query } from 'appwrite'\n\n// Server-side data fetching\nconst posts = await postStore.list([\n  Query.orderDesc('$createdAt'),\n  Query.limit(10)\n])\n---\n\n<Layout title=\"Blog\">\n  <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n    {posts.map((post) => (\n      <PostCard\n        client:visible\n        post={post}\n      />\n    ))}\n  </div>\n</Layout>\n```\n\n## Client Directives\n\n```astro\n<!-- Load component immediately -->\n<Component client:load />\n\n<!-- Load when component becomes visible -->\n<Component client:visible />\n\n<!-- Load when page is idle -->\n<Component client:idle />\n\n<!-- Load based on media query -->\n<Component client:media=\"(max-width: 768px)\" />\n\n<!-- Only render on client, never on server -->\n<Component client:only=\"vue\" />\n```\n\n**When to use which:**\n- `client:load` - Interactive immediately (navigation, auth)\n- `client:visible` - Below fold (cards, images)\n- `client:idle` - Nice to have (comments, related content)\n- `client:media` - Responsive components\n- `client:only` - Breaks SSR (charts, maps)\n\n## API Routes\n\n### Basic API Route\n\n```typescript\n// src/pages/api/hello.json.ts\nimport type { APIRoute } from 'astro'\n\nexport const GET: APIRoute = async ({ request }) => {\n  return new Response(\n    JSON.stringify({\n      message: 'Hello World'\n    }),\n    {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }\n  )\n}\n```\n\n### API Route with Validation\n\n```typescript\n// src/pages/api/users.json.ts\nimport type { APIRoute } from 'astro'\nimport { z } from 'zod'\nimport { userStore } from '@/stores/user'\n\n// Request schema\nconst CreateUserSchema = z.object({\n  name: z.string().min(1),\n  email: z.string().email(),\n  age: z.number().int().min(18).optional()\n})\n\nexport const POST: APIRoute = async ({ request }) => {\n  try {\n    // Parse request body\n    const body = await request.json()\n\n    // Validate with Zod\n    const validated = CreateUserSchema.parse(body)\n\n    // Create user\n    const user = await userStore.create(validated)\n\n    // Return success\n    return new Response(\n      JSON.stringify({\n        success: true,\n        user\n      }),\n      {\n        status: 201,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }\n    )\n\n  } catch (error) {\n    // Handle Zod validation errors\n    if (error instanceof z.ZodError) {\n      return new Response(\n        JSON.stringify({\n          success: false,\n          errors: error.errors\n        }),\n        {\n          status: 400,\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }\n      )\n    }\n\n    // Handle other errors\n    return new Response(\n      JSON.stringify({\n        success: false,\n        message: 'Internal server error'\n      }),\n      {\n        status: 500,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }\n    )\n  }\n}\n```\n\n### Dynamic API Route\n\n```typescript\n// src/pages/api/users/[id].json.ts\nimport type { APIRoute } from 'astro'\nimport { userStore } from '@/stores/user'\n\nexport const GET: APIRoute = async ({ params }) => {\n  const { id } = params\n\n  if (!id) {\n    return new Response(\n      JSON.stringify({ error: 'ID required' }),\n      { status: 400 }\n    )\n  }\n\n  const user = await userStore.get(id)\n\n  if (!user) {\n    return new Response(\n      JSON.stringify({ error: 'User not found' }),\n      { status: 404 }\n    )\n  }\n\n  return new Response(\n    JSON.stringify({ user }),\n    { status: 200 }\n  )\n}\n\nexport const DELETE: APIRoute = async ({ params }) => {\n  const { id } = params\n\n  if (!id) {\n    return new Response(\n      JSON.stringify({ error: 'ID required' }),\n      { status: 400 }\n    )\n  }\n\n  await userStore.delete(id)\n\n  return new Response(\n    JSON.stringify({ success: true }),\n    { status: 200 }\n  )\n}\n```\n\n### Complete CRUD API\n\n```typescript\n// src/pages/api/posts.json.ts\nimport type { APIRoute } from 'astro'\nimport { z } from 'zod'\nimport { postStore, PostSchema } from '@/stores/post'\nimport { Query } from 'appwrite'\n\n// CREATE\nexport const POST: APIRoute = async ({ request }) => {\n  try {\n    const body = await request.json()\n    const validated = PostSchema.parse(body)\n    const post = await postStore.create(validated)\n\n    return new Response(JSON.stringify({ post }), { status: 201 })\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return new Response(\n        JSON.stringify({ errors: error.errors }),\n        { status: 400 }\n      )\n    }\n    return new Response(\n      JSON.stringify({ error: 'Internal error' }),\n      { status: 500 }\n    )\n  }\n}\n\n// LIST\nexport const GET: APIRoute = async ({ url }) => {\n  try {\n    // Get query params\n    const page = parseInt(url.searchParams.get('page') ?? '1')\n    const limit = parseInt(url.searchParams.get('limit') ?? '10')\n    const offset = (page - 1) * limit\n\n    // Query posts\n    const posts = await postStore.list([\n      Query.orderDesc('$createdAt'),\n      Query.limit(limit),\n      Query.offset(offset)\n    ])\n\n    const total = await postStore.count()\n\n    return new Response(\n      JSON.stringify({\n        posts,\n        pagination: {\n          page,\n          limit,\n          total,\n          pages: Math.ceil(total / limit)\n        }\n      }),\n      { status: 200 }\n    )\n  } catch (error) {\n    return new Response(\n      JSON.stringify({ error: 'Internal error' }),\n      { status: 500 }\n    )\n  }\n}\n```\n\n## Passing Props to Components\n\n```astro\n---\n// Fetch data on server\nconst user = await userStore.getCurrentUser()\nconst posts = await postStore.list()\n\n// Complex data\nconst stats = {\n  totalPosts: posts.length,\n  totalViews: posts.reduce((sum, p) => sum + p.views, 0)\n}\n---\n\n<!-- Pass as props -->\n<UserProfile client:load user={user} />\n\n<!-- Pass multiple props -->\n<Dashboard\n  client:load\n  user={user}\n  posts={posts}\n  stats={stats}\n/>\n\n<!-- Serialize complex data -->\n<DataVisualization\n  client:load\n  data={JSON.stringify(stats)}\n/>\n```\n\n## Layouts\n\n```astro\n---\n// src/layouts/Layout.astro\ninterface Props {\n  title: string\n  description?: string\n}\n\nconst { title, description = 'Default description' } = Astro.props\n---\n\n<!DOCTYPE html>\n<html lang=\"en\" class=\"dark:bg-gray-900\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width\" />\n    <meta name=\"description\" content={description} />\n    <title>{title}</title>\n  </head>\n  <body class=\"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100\">\n    <!-- Teleport target for modals -->\n    <div id=\"teleport-layer\"></div>\n\n    <slot />\n  </body>\n</html>\n```\n\n## Error Pages\n\n```astro\n---\n// src/pages/404.astro\nimport Layout from '@/layouts/Layout.astro'\n---\n\n<Layout title=\"404 - Page Not Found\">\n  <div class=\"min-h-screen flex items-center justify-center\">\n    <div class=\"text-center\">\n      <h1 class=\"text-6xl font-bold text-gray-900 dark:text-gray-100\">\n        404\n      </h1>\n      <p class=\"text-xl text-gray-600 dark:text-gray-400 mt-4\">\n        Page not found\n      </p>\n      <a\n        href=\"/\"\n        class=\"mt-8 inline-block px-6 py-3 bg-blue-600 dark:bg-blue-500 text-white rounded-lg\"\n      >\n        Go Home\n      </a>\n    </div>\n  </div>\n</Layout>\n```\n\n## Best Practices\n\n### 1. Server vs Client Code\n\n```astro\n---\n// This runs on SERVER only (during build/SSR)\nconst data = await fetchData()\nconst computed = heavyComputation()\n\n// Client-side code must be in <script> tag\n---\n\n<script>\n  // This runs in BROWSER\n  console.log('Client-side code')\n\n  document.addEventListener('click', () => {\n    // Handle clicks\n  })\n</script>\n\n<template>\n  <!-- This renders on SERVER, hydrates on CLIENT -->\n  <Component client:load data={data} />\n</template>\n```\n\n### 2. SEO-Friendly Pages\n\n```astro\n---\nconst page = {\n  title: 'My Page',\n  description: 'Description for SEO',\n  image: '/og-image.jpg',\n  url: Astro.url.href\n}\n---\n\n<Layout title={page.title}>\n  <Fragment slot=\"head\">\n    <!-- Open Graph -->\n    <meta property=\"og:title\" content={page.title} />\n    <meta property=\"og:description\" content={page.description} />\n    <meta property=\"og:image\" content={page.image} />\n    <meta property=\"og:url\" content={page.url} />\n\n    <!-- Twitter Card -->\n    <meta name=\"twitter:card\" content=\"summary_large_image\" />\n    <meta name=\"twitter:title\" content={page.title} />\n    <meta name=\"twitter:description\" content={page.description} />\n    <meta name=\"twitter:image\" content={page.image} />\n  </Fragment>\n\n  <!-- Page content -->\n</Layout>\n```\n\n### 3. API Error Responses\n\nAlways include:\n- Appropriate status code\n- JSON response with error details\n- Content-Type header\n\n```typescript\n// Error helper\nfunction errorResponse(message: string, status: number = 400) {\n  return new Response(\n    JSON.stringify({\n      success: false,\n      error: message\n    }),\n    {\n      status,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }\n  )\n}\n\n// Usage\nif (!id) {\n  return errorResponse('ID required', 400)\n}\n```\n\n## Cross-References\n\nFor advanced patterns, see:\n- **astro-vue-architect** - Astro + Vue integration architecture, component decisions (.astro vs Vue), appEntrypoint configuration, client directive optimization, View Transitions with Vue islands, hybrid layouts, performance strategies\n- **zod-schema-architect** - API request/response validation with Zod, error handling patterns, schema organization\n\n## Further Reading\n\nSee supporting files:\n- [api-patterns.md] - REST API best practices\n","numLines":526,"startLine":1,"totalLines":526}}}
{"parentUuid":"dffd9a31-9238-4f8c-b5ff-a918996cb8e8","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018BCeBiNTv5vPn3ZbjKpd1X","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! Now I'll create the output directory and write the patterns JSON file:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":4,"cache_creation_input_tokens":17909,"cache_read_input_tokens":41793,"cache_creation":{"ephemeral_5m_input_tokens":17909,"ephemeral_1h_input_tokens":0},"output_tokens":117,"service_tier":"standard"}},"requestId":"req_011CUcsHJFBfwfjzSnTCpupa","type":"assistant","uuid":"69b7bb53-ff8d-4935-bc39-9d2262a75f89","timestamp":"2025-10-30T05:56:35.196Z"}
{"parentUuid":"69b7bb53-ff8d-4935-bc39-9d2262a75f89","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018BCeBiNTv5vPn3ZbjKpd1X","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01SJAkzbHZfNFVFUmCXsTB5w","name":"Bash","input":{"command":"mkdir -p /Users/natedamstra/.claude/plans/meta-skills-agent/.temp/phase1-discovery","description":"Create output directory for pattern analysis"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":4,"cache_creation_input_tokens":17909,"cache_read_input_tokens":41793,"cache_creation":{"ephemeral_5m_input_tokens":17909,"ephemeral_1h_input_tokens":0},"output_tokens":117,"service_tier":"standard"}},"requestId":"req_011CUcsHJFBfwfjzSnTCpupa","type":"assistant","uuid":"744ccaa7-9a00-4d42-a038-52a542c9e492","timestamp":"2025-10-30T05:56:36.699Z"}
{"parentUuid":"744ccaa7-9a00-4d42-a038-52a542c9e492","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01SJAkzbHZfNFVFUmCXsTB5w","type":"tool_result","content":"","is_error":false}]},"uuid":"4b3d3eb1-065f-44c5-83a1-3f2606935008","timestamp":"2025-10-30T05:56:37.825Z","toolUseResult":{"stdout":"","stderr":"","interrupted":false,"isImage":false}}
{"parentUuid":"4b3d3eb1-065f-44c5-83a1-3f2606935008","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01KiaaXMhKR9rzeKgDKHSEWJ","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Mu9Tn7PjpsSgDZMTTHkGGd","name":"Write","input":{"file_path":"/Users/natedamstra/.claude/plans/meta-skills-agent/.temp/phase1-discovery/patterns.json","content":"{\n  \"frontmatter_required\": [\n    \"name\",\n    \"description\"\n  ],\n  \"frontmatter_optional\": [\n    \"version\",\n    \"tags\",\n    \"tools\",\n    \"model\"\n  ],\n  \"frontmatter_patterns\": {\n    \"name\": {\n      \"format\": \"Display Name (PascalCase or Title Case)\",\n      \"examples\": [\n        \"Vue 3 Component Builder\",\n        \"Nanostore Builder\",\n        \"TypeScript Fixer\",\n        \"CC Skill Builder\"\n      ]\n    },\n    \"description\": {\n      \"format\": \"Multi-line string with pipe character (|)\",\n      \"structure\": \"[ACTION] [WHAT]. Use for [USE CASES]. Works with [FILE TYPES]. Use when [TRIGGER PHRASES]. Handles/Prevents [KEY FEATURES].\",\n      \"critical_importance\": \"Description is ONLY way to tell Claude when to invoke skill - must be specific with triggers, file types, and keywords\",\n      \"components\": [\n        \"WHAT it does - Core capability in one sentence\",\n        \"WHEN to use - Specific triggers and use cases\",\n        \"File types - .vue, .ts, .md, .json, etc.\",\n        \"Keywords - Search terms users might mention\",\n        \"Special capabilities - What it prevents/enforces\"\n      ],\n      \"examples\": [\n        \"Build Vue 3 components using Composition API, script setup syntax, TypeScript strict mode, and Tailwind CSS. Use when creating/modifying .vue SFCs, building form components, modals with Teleport, or integrating third-party libraries (HeadlessUI, Iconify, ECharts). CRITICAL RULES enforced: Tailwind preferred, always dark: mode classes, useMounted for SSR safety, TypeScript prop validation with withDefaults, ARIA labels for accessibility. Prevents common mistakes (missing dark mode, SSR hydration errors, inaccessible components). Use for \\\".vue\\\", \\\"component\\\", \\\"modal\\\", \\\"form\\\", \\\"icon\\\", \\\"chart\\\".\",\n        \"MUST BE USED for creating and designing Claude Code skills with proper structure, frontmatter, and progressive disclosure. Use when creating new skills, modifying existing skills, designing skill architectures, or asking \\\"how do I create a skill\\\", \\\"make a skill for\\\", \\\"design a skill\\\", \\\"skill best practices\\\".\"\n      ]\n    },\n    \"version\": {\n      \"format\": \"Semantic versioning (X.Y.Z)\",\n      \"examples\": [\n        \"1.0.0\",\n        \"2.0.0\",\n        \"3.0.0\"\n      ]\n    },\n    \"tags\": {\n      \"format\": \"Array of lowercase-kebab-case strings\",\n      \"categories\": [\n        \"technology (vue3, typescript, astro, zod)\",\n        \"use-case (component-builder, state-management, type-safety)\",\n        \"features (ssr, dark-mode, accessibility, validation)\"\n      ],\n      \"examples\": [\n        \"[vue3, script-setup, composition-api, typescript, tailwind, dark-mode, ssr, accessibility, modals, forms]\",\n        \"[nanostores, state-management, appwrite, basestore, zod, crud, persistence, reactivity]\"\n      ]\n    }\n  },\n  \"typical_sections\": [\n    \"Quick Start (2-3 bullets for immediate orientation)\",\n    \"Core Patterns / Instructions (numbered workflow steps)\",\n    \"Examples (inline basic examples)\",\n    \"Common Patterns / Usage (detailed patterns)\",\n    \"Best Practices\",\n    \"Troubleshooting / Error Handling\",\n    \"Checklist (verification before/after)\",\n    \"Cross-References (link to related skills)\",\n    \"Further Reading (link to supporting files)\"\n  ],\n  \"section_patterns\": {\n    \"Quick Start\": {\n      \"purpose\": \"Immediate orientation - what skill does, primary use cases\",\n      \"format\": \"2-5 bullet points\",\n      \"location\": \"After title, before main content\"\n    },\n    \"Core Patterns / Instructions\": {\n      \"purpose\": \"Main workflow steps and patterns\",\n      \"format\": \"Numbered lists or subsections with ### headings\",\n      \"includes\": [\n        \"Sequential steps\",\n        \"Decision points\",\n        \"Code examples\",\n        \"Critical rules (with ❌ and ✅ symbols)\"\n      ]\n    },\n    \"Examples\": {\n      \"purpose\": \"Concrete implementations and walkthroughs\",\n      \"format\": \"Code blocks with explanations\",\n      \"types\": [\n        \"Basic Example (inline in SKILL.md)\",\n        \"Advanced Example (inline or in examples.md)\",\n        \"Edge Cases (in examples.md or troubleshooting)\"\n      ]\n    },\n    \"Best Practices\": {\n      \"purpose\": \"Conventions, patterns to follow/avoid\",\n      \"format\": \"Bulleted lists with examples\"\n    },\n    \"Troubleshooting\": {\n      \"purpose\": \"Common issues and solutions\",\n      \"format\": \"### Issue: [Problem]\\nSolution: [Fix]\"\n    },\n    \"Checklist\": {\n      \"purpose\": \"Verification steps before/after implementation\",\n      \"format\": \"- [ ] Checkbox list\"\n    },\n    \"Cross-References\": {\n      \"purpose\": \"Links to related skills for additional context\",\n      \"format\": \"- **skill-name** - Brief description of relationship\"\n    },\n    \"Further Reading\": {\n      \"purpose\": \"Progressive disclosure - links to supporting files\",\n      \"format\": \"- [filename.md] - Description of contents\"\n    }\n  },\n  \"progressive_disclosure_pattern\": {\n    \"philosophy\": \"Load information only as needed to minimize context usage\",\n    \"lifecycle\": [\n      \"Initial Context: SKILL.md metadata only (~100 tokens) - name + description\",\n      \"Skill Triggered: SKILL.md full content loaded (~500-1000 tokens) - Instructions + basic examples\",\n      \"On Demand: Supporting files loaded when needed (~1000-5000 tokens/file) - reference.md, examples.md\",\n      \"Execution: Scripts run with specific parameters\"\n    ],\n    \"size_guidelines\": {\n      \"ideal\": \"< 2KB - always loads completely\",\n      \"good\": \"2-10KB - typical for most skills\",\n      \"consider_splitting\": \"10-50KB - move reference/examples to separate files\",\n      \"definitely_split\": \"> 50KB - separate files required\"\n    },\n    \"how_to_split\": {\n      \"SKILL.md_keeps\": [\n        \"Core workflow (3-5 steps)\",\n        \"1-2 basic examples inline\",\n        \"References to supporting files: See [examples.md](examples.md) for...\"\n      ],\n      \"supporting_files\": [\n        \"examples.md - Advanced use cases, edge cases, integration patterns\",\n        \"reference.md / api-reference.md - Detailed API specs\",\n        \"troubleshooting.md - Comprehensive error solutions\",\n        \"scripts/ - Executable helpers\",\n        \"templates/ - Boilerplate files\"\n      ]\n    }\n  },\n  \"critical_rules_pattern\": {\n    \"format\": \"Use emoji prefixes for visual emphasis\",\n    \"symbols\": {\n      \"never_do\": \"❌ NEVER / ❌ WRONG\",\n      \"always_do\": \"✅ ALWAYS / ✅ RIGHT / ✅ CORRECT\",\n      \"warning\": \"⚠️ WARNING\",\n      \"important\": \"❗ IMPORTANT / CRITICAL\"\n    },\n    \"examples\": [\n      \"❌ NEVER use `any`\",\n      \"✅ ALWAYS include `dark:` prefix for all color classes\",\n      \"⚠️ Requires `useMounted()` for SSR safety\"\n    ]\n  },\n  \"code_block_patterns\": {\n    \"inline_examples\": \"Use triple backticks with language identifier\",\n    \"comparison_blocks\": \"Show ❌ WRONG then ✅ RIGHT patterns\",\n    \"annotation\": \"Use // comments to explain critical parts\",\n    \"line_highlights\": \"Use // ← or // ^^^^^ to point to important lines\"\n  },\n  \"file_structure\": {\n    \"required\": [\n      \"SKILL.md - Main skill file with frontmatter + instructions\"\n    ],\n    \"optional\": [\n      \"examples.md - Detailed examples\",\n      \"reference.md - API documentation\",\n      \"troubleshooting.md - Error solutions\",\n      \"scripts/ - Helper scripts\",\n      \"templates/ - Boilerplate files\"\n    ],\n    \"naming_convention\": \"kebab-case for directory names\",\n    \"scope\": {\n      \"user_level\": \"~/.claude/skills/ - Personal workflows, cross-project\",\n      \"project_level\": \".claude/skills/ - Team standards, version controlled\"\n    }\n  },\n  \"best_practices\": [\n    \"Description is CRITICAL - only way Claude discovers skill - must include file types, triggers, and keywords\",\n    \"Keep SKILL.md concise (< 10KB) - use progressive disclosure for additional content\",\n    \"Always provide at least 1-2 inline examples\",\n    \"Use visual markers (❌ ✅ ⚠️) for critical rules\",\n    \"Include numbered workflow steps for instructions\",\n    \"Add checklists for verification\",\n    \"Cross-reference related skills\",\n    \"Link to supporting files for deep dives\",\n    \"Document version history and breaking changes\",\n    \"Use code comparison blocks (WRONG vs RIGHT)\",\n    \"Include troubleshooting section\",\n    \"Test skill discovery by describing relevant task\"\n  ],\n  \"anti_patterns\": [\n    \"Vague description without file types or triggers\",\n    \"SKILL.md > 50KB without splitting\",\n    \"No examples provided\",\n    \"Missing workflow steps\",\n    \"No cross-references to related skills\",\n    \"Hardcoded values instead of patterns\",\n    \"No progressive disclosure links\",\n    \"Abstract instructions without concrete code\"\n  ],\n  \"description_template\": \"[ACTION VERB] [WHAT]. Use for [USE CASE 1], [USE CASE 2], and [USE CASE 3]. Works with [FILE TYPES]. Use when [TRIGGER PHRASE 1], [TRIGGER PHRASE 2]. [CRITICAL CAPABILITIES]. Use for \\\"[keyword 1]\\\", \\\"[keyword 2]\\\", \\\"[keyword 3]\\\".\",\n  \"skill_types\": {\n    \"domain_knowledge\": {\n      \"purpose\": \"Expert knowledge in specific domain\",\n      \"examples\": [\n        \"vue-component-builder\",\n        \"nanostore-builder\"\n      ],\n      \"structure\": \"Quick Start → Instructions → Patterns → Examples → Best Practices\"\n    },\n    \"code_generation\": {\n      \"purpose\": \"Generate code following patterns\",\n      \"examples\": [\n        \"vue-component-builder\"\n      ],\n      \"structure\": \"Core Patterns → Templates → Instructions → Validation\"\n    },\n    \"analysis_review\": {\n      \"purpose\": \"Analyze/review artifacts\",\n      \"examples\": [\n        \"typescript-fixer\"\n      ],\n      \"structure\": \"Philosophy → Analysis Framework → Error Categories → Debugging Workflow\"\n    },\n    \"integration\": {\n      \"purpose\": \"Integrate external tools/APIs\",\n      \"examples\": [\n        \"astro-routing\"\n      ],\n      \"structure\": \"Setup → Operations → Best Practices → Security\"\n    },\n    \"meta_skill\": {\n      \"purpose\": \"Manage Claude Code ecosystem\",\n      \"examples\": [\n        \"cc-skill-builder\"\n      ],\n      \"structure\": \"Core Architecture → Templates → Workflow → Testing\"\n    }\n  },\n  \"discovered_from_files\": [\n    \"/Users/natedamstra/.claude/skills/vue-component-builder/SKILL.md\",\n    \"/Users/natedamstra/.claude/skills/nanostore-builder/SKILL.md\",\n    \"/Users/natedamstra/.claude/skills/cc-skill-builder/SKILL.md\",\n    \"/Users/natedamstra/.claude/skills/typescript-fixer/SKILL.md\",\n    \"/Users/natedamstra/.claude/skills/astro-routing/SKILL.md\"\n  ]\n}\n"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":142,"cache_read_input_tokens":59702,"cache_creation":{"ephemeral_5m_input_tokens":142,"ephemeral_1h_input_tokens":0},"output_tokens":3059,"service_tier":"standard"}},"requestId":"req_011CUcsHpJT3xZtKdtQKnkj3","type":"assistant","uuid":"8ae04713-f291-4f07-a53e-0ce77a657527","timestamp":"2025-10-30T05:57:40.736Z"}
{"parentUuid":"8ae04713-f291-4f07-a53e-0ce77a657527","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Mu9Tn7PjpsSgDZMTTHkGGd","type":"tool_result","content":"File created successfully at: /Users/natedamstra/.claude/plans/meta-skills-agent/.temp/phase1-discovery/patterns.json"}]},"uuid":"29bfd958-2ac3-48c0-a8b5-6cf8ff94d6b9","timestamp":"2025-10-30T05:57:40.938Z","toolUseResult":{"type":"create","filePath":"/Users/natedamstra/.claude/plans/meta-skills-agent/.temp/phase1-discovery/patterns.json","content":"{\n  \"frontmatter_required\": [\n    \"name\",\n    \"description\"\n  ],\n  \"frontmatter_optional\": [\n    \"version\",\n    \"tags\",\n    \"tools\",\n    \"model\"\n  ],\n  \"frontmatter_patterns\": {\n    \"name\": {\n      \"format\": \"Display Name (PascalCase or Title Case)\",\n      \"examples\": [\n        \"Vue 3 Component Builder\",\n        \"Nanostore Builder\",\n        \"TypeScript Fixer\",\n        \"CC Skill Builder\"\n      ]\n    },\n    \"description\": {\n      \"format\": \"Multi-line string with pipe character (|)\",\n      \"structure\": \"[ACTION] [WHAT]. Use for [USE CASES]. Works with [FILE TYPES]. Use when [TRIGGER PHRASES]. Handles/Prevents [KEY FEATURES].\",\n      \"critical_importance\": \"Description is ONLY way to tell Claude when to invoke skill - must be specific with triggers, file types, and keywords\",\n      \"components\": [\n        \"WHAT it does - Core capability in one sentence\",\n        \"WHEN to use - Specific triggers and use cases\",\n        \"File types - .vue, .ts, .md, .json, etc.\",\n        \"Keywords - Search terms users might mention\",\n        \"Special capabilities - What it prevents/enforces\"\n      ],\n      \"examples\": [\n        \"Build Vue 3 components using Composition API, script setup syntax, TypeScript strict mode, and Tailwind CSS. Use when creating/modifying .vue SFCs, building form components, modals with Teleport, or integrating third-party libraries (HeadlessUI, Iconify, ECharts). CRITICAL RULES enforced: Tailwind preferred, always dark: mode classes, useMounted for SSR safety, TypeScript prop validation with withDefaults, ARIA labels for accessibility. Prevents common mistakes (missing dark mode, SSR hydration errors, inaccessible components). Use for \\\".vue\\\", \\\"component\\\", \\\"modal\\\", \\\"form\\\", \\\"icon\\\", \\\"chart\\\".\",\n        \"MUST BE USED for creating and designing Claude Code skills with proper structure, frontmatter, and progressive disclosure. Use when creating new skills, modifying existing skills, designing skill architectures, or asking \\\"how do I create a skill\\\", \\\"make a skill for\\\", \\\"design a skill\\\", \\\"skill best practices\\\".\"\n      ]\n    },\n    \"version\": {\n      \"format\": \"Semantic versioning (X.Y.Z)\",\n      \"examples\": [\n        \"1.0.0\",\n        \"2.0.0\",\n        \"3.0.0\"\n      ]\n    },\n    \"tags\": {\n      \"format\": \"Array of lowercase-kebab-case strings\",\n      \"categories\": [\n        \"technology (vue3, typescript, astro, zod)\",\n        \"use-case (component-builder, state-management, type-safety)\",\n        \"features (ssr, dark-mode, accessibility, validation)\"\n      ],\n      \"examples\": [\n        \"[vue3, script-setup, composition-api, typescript, tailwind, dark-mode, ssr, accessibility, modals, forms]\",\n        \"[nanostores, state-management, appwrite, basestore, zod, crud, persistence, reactivity]\"\n      ]\n    }\n  },\n  \"typical_sections\": [\n    \"Quick Start (2-3 bullets for immediate orientation)\",\n    \"Core Patterns / Instructions (numbered workflow steps)\",\n    \"Examples (inline basic examples)\",\n    \"Common Patterns / Usage (detailed patterns)\",\n    \"Best Practices\",\n    \"Troubleshooting / Error Handling\",\n    \"Checklist (verification before/after)\",\n    \"Cross-References (link to related skills)\",\n    \"Further Reading (link to supporting files)\"\n  ],\n  \"section_patterns\": {\n    \"Quick Start\": {\n      \"purpose\": \"Immediate orientation - what skill does, primary use cases\",\n      \"format\": \"2-5 bullet points\",\n      \"location\": \"After title, before main content\"\n    },\n    \"Core Patterns / Instructions\": {\n      \"purpose\": \"Main workflow steps and patterns\",\n      \"format\": \"Numbered lists or subsections with ### headings\",\n      \"includes\": [\n        \"Sequential steps\",\n        \"Decision points\",\n        \"Code examples\",\n        \"Critical rules (with ❌ and ✅ symbols)\"\n      ]\n    },\n    \"Examples\": {\n      \"purpose\": \"Concrete implementations and walkthroughs\",\n      \"format\": \"Code blocks with explanations\",\n      \"types\": [\n        \"Basic Example (inline in SKILL.md)\",\n        \"Advanced Example (inline or in examples.md)\",\n        \"Edge Cases (in examples.md or troubleshooting)\"\n      ]\n    },\n    \"Best Practices\": {\n      \"purpose\": \"Conventions, patterns to follow/avoid\",\n      \"format\": \"Bulleted lists with examples\"\n    },\n    \"Troubleshooting\": {\n      \"purpose\": \"Common issues and solutions\",\n      \"format\": \"### Issue: [Problem]\\nSolution: [Fix]\"\n    },\n    \"Checklist\": {\n      \"purpose\": \"Verification steps before/after implementation\",\n      \"format\": \"- [ ] Checkbox list\"\n    },\n    \"Cross-References\": {\n      \"purpose\": \"Links to related skills for additional context\",\n      \"format\": \"- **skill-name** - Brief description of relationship\"\n    },\n    \"Further Reading\": {\n      \"purpose\": \"Progressive disclosure - links to supporting files\",\n      \"format\": \"- [filename.md] - Description of contents\"\n    }\n  },\n  \"progressive_disclosure_pattern\": {\n    \"philosophy\": \"Load information only as needed to minimize context usage\",\n    \"lifecycle\": [\n      \"Initial Context: SKILL.md metadata only (~100 tokens) - name + description\",\n      \"Skill Triggered: SKILL.md full content loaded (~500-1000 tokens) - Instructions + basic examples\",\n      \"On Demand: Supporting files loaded when needed (~1000-5000 tokens/file) - reference.md, examples.md\",\n      \"Execution: Scripts run with specific parameters\"\n    ],\n    \"size_guidelines\": {\n      \"ideal\": \"< 2KB - always loads completely\",\n      \"good\": \"2-10KB - typical for most skills\",\n      \"consider_splitting\": \"10-50KB - move reference/examples to separate files\",\n      \"definitely_split\": \"> 50KB - separate files required\"\n    },\n    \"how_to_split\": {\n      \"SKILL.md_keeps\": [\n        \"Core workflow (3-5 steps)\",\n        \"1-2 basic examples inline\",\n        \"References to supporting files: See [examples.md](examples.md) for...\"\n      ],\n      \"supporting_files\": [\n        \"examples.md - Advanced use cases, edge cases, integration patterns\",\n        \"reference.md / api-reference.md - Detailed API specs\",\n        \"troubleshooting.md - Comprehensive error solutions\",\n        \"scripts/ - Executable helpers\",\n        \"templates/ - Boilerplate files\"\n      ]\n    }\n  },\n  \"critical_rules_pattern\": {\n    \"format\": \"Use emoji prefixes for visual emphasis\",\n    \"symbols\": {\n      \"never_do\": \"❌ NEVER / ❌ WRONG\",\n      \"always_do\": \"✅ ALWAYS / ✅ RIGHT / ✅ CORRECT\",\n      \"warning\": \"⚠️ WARNING\",\n      \"important\": \"❗ IMPORTANT / CRITICAL\"\n    },\n    \"examples\": [\n      \"❌ NEVER use `any`\",\n      \"✅ ALWAYS include `dark:` prefix for all color classes\",\n      \"⚠️ Requires `useMounted()` for SSR safety\"\n    ]\n  },\n  \"code_block_patterns\": {\n    \"inline_examples\": \"Use triple backticks with language identifier\",\n    \"comparison_blocks\": \"Show ❌ WRONG then ✅ RIGHT patterns\",\n    \"annotation\": \"Use // comments to explain critical parts\",\n    \"line_highlights\": \"Use // ← or // ^^^^^ to point to important lines\"\n  },\n  \"file_structure\": {\n    \"required\": [\n      \"SKILL.md - Main skill file with frontmatter + instructions\"\n    ],\n    \"optional\": [\n      \"examples.md - Detailed examples\",\n      \"reference.md - API documentation\",\n      \"troubleshooting.md - Error solutions\",\n      \"scripts/ - Helper scripts\",\n      \"templates/ - Boilerplate files\"\n    ],\n    \"naming_convention\": \"kebab-case for directory names\",\n    \"scope\": {\n      \"user_level\": \"~/.claude/skills/ - Personal workflows, cross-project\",\n      \"project_level\": \".claude/skills/ - Team standards, version controlled\"\n    }\n  },\n  \"best_practices\": [\n    \"Description is CRITICAL - only way Claude discovers skill - must include file types, triggers, and keywords\",\n    \"Keep SKILL.md concise (< 10KB) - use progressive disclosure for additional content\",\n    \"Always provide at least 1-2 inline examples\",\n    \"Use visual markers (❌ ✅ ⚠️) for critical rules\",\n    \"Include numbered workflow steps for instructions\",\n    \"Add checklists for verification\",\n    \"Cross-reference related skills\",\n    \"Link to supporting files for deep dives\",\n    \"Document version history and breaking changes\",\n    \"Use code comparison blocks (WRONG vs RIGHT)\",\n    \"Include troubleshooting section\",\n    \"Test skill discovery by describing relevant task\"\n  ],\n  \"anti_patterns\": [\n    \"Vague description without file types or triggers\",\n    \"SKILL.md > 50KB without splitting\",\n    \"No examples provided\",\n    \"Missing workflow steps\",\n    \"No cross-references to related skills\",\n    \"Hardcoded values instead of patterns\",\n    \"No progressive disclosure links\",\n    \"Abstract instructions without concrete code\"\n  ],\n  \"description_template\": \"[ACTION VERB] [WHAT]. Use for [USE CASE 1], [USE CASE 2], and [USE CASE 3]. Works with [FILE TYPES]. Use when [TRIGGER PHRASE 1], [TRIGGER PHRASE 2]. [CRITICAL CAPABILITIES]. Use for \\\"[keyword 1]\\\", \\\"[keyword 2]\\\", \\\"[keyword 3]\\\".\",\n  \"skill_types\": {\n    \"domain_knowledge\": {\n      \"purpose\": \"Expert knowledge in specific domain\",\n      \"examples\": [\n        \"vue-component-builder\",\n        \"nanostore-builder\"\n      ],\n      \"structure\": \"Quick Start → Instructions → Patterns → Examples → Best Practices\"\n    },\n    \"code_generation\": {\n      \"purpose\": \"Generate code following patterns\",\n      \"examples\": [\n        \"vue-component-builder\"\n      ],\n      \"structure\": \"Core Patterns → Templates → Instructions → Validation\"\n    },\n    \"analysis_review\": {\n      \"purpose\": \"Analyze/review artifacts\",\n      \"examples\": [\n        \"typescript-fixer\"\n      ],\n      \"structure\": \"Philosophy → Analysis Framework → Error Categories → Debugging Workflow\"\n    },\n    \"integration\": {\n      \"purpose\": \"Integrate external tools/APIs\",\n      \"examples\": [\n        \"astro-routing\"\n      ],\n      \"structure\": \"Setup → Operations → Best Practices → Security\"\n    },\n    \"meta_skill\": {\n      \"purpose\": \"Manage Claude Code ecosystem\",\n      \"examples\": [\n        \"cc-skill-builder\"\n      ],\n      \"structure\": \"Core Architecture → Templates → Workflow → Testing\"\n    }\n  },\n  \"discovered_from_files\": [\n    \"/Users/natedamstra/.claude/skills/vue-component-builder/SKILL.md\",\n    \"/Users/natedamstra/.claude/skills/nanostore-builder/SKILL.md\",\n    \"/Users/natedamstra/.claude/skills/cc-skill-builder/SKILL.md\",\n    \"/Users/natedamstra/.claude/skills/typescript-fixer/SKILL.md\",\n    \"/Users/natedamstra/.claude/skills/astro-routing/SKILL.md\"\n  ]\n}\n","structuredPatch":[]}}
{"parentUuid":"29bfd958-2ac3-48c0-a8b5-6cf8ff94d6b9","isSidechain":true,"userType":"external","cwd":"/Users/natedamstra/.claude","sessionId":"1bce37bc-b4ec-49e5-9732-9d982ae2188a","version":"2.0.29","gitBranch":"","agentId":"77039320","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_015EEEvExZnfLmrwfbFwC5Qw","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! I've analyzed the existing skill files and extracted comprehensive patterns. Here's what I discovered:\n\n## Key Patterns Identified\n\n### Frontmatter Structure\n- **Required:** `name`, `description`\n- **Optional:** `version`, `tags`, `tools`, `model`\n- **Critical:** Description is the ONLY way Claude discovers skills - must include file types, triggers, and specific keywords\n\n### Description Formula\n```\n[ACTION] [WHAT]. Use for [USE CASES]. Works with [FILE TYPES]. \nUse when [TRIGGER PHRASES]. [KEY FEATURES]. \nUse for \"[keyword 1]\", \"[keyword 2]\".\n```\n\n### Progressive Disclosure\n- Keep SKILL.md under 10KB\n- Link to supporting files: examples.md, reference.md, troubleshooting.md\n- Load context only as needed (metadata → full skill → supporting files)\n\n### Common Sections\n1. Quick Start (2-3 bullets)\n2. Core Patterns/Instructions (numbered steps)\n3. Examples (inline basic + links to advanced)\n4. Best Practices\n5. Troubleshooting\n6. Checklist\n7. Cross-References\n8. Further Reading\n\n### Visual Patterns\n- ❌ NEVER / ❌ WRONG\n- ✅ ALWAYS / ✅ RIGHT\n- ⚠️ WARNING\n- Use code comparison blocks (WRONG → RIGHT)\n\nThe complete pattern analysis has been written to:\n`/Users/natedamstra/.claude/plans/meta-skills-agent/.temp/phase1-discovery/patterns.json`\n\nThis provides all the conventions needed for creating well-structured, discoverable skills that follow the established patterns in your codebase."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":3197,"cache_read_input_tokens":59844,"cache_creation":{"ephemeral_5m_input_tokens":3197,"ephemeral_1h_input_tokens":0},"output_tokens":399,"service_tier":"standard"}},"requestId":"req_011CUcsNUBce12pKLUhpc9Nx","type":"assistant","uuid":"0a06e72f-9a5b-4171-8394-1e2a564d6b6b","timestamp":"2025-10-30T05:57:51.094Z"}
